<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ÂæÆ‰ø°MarkdownËΩ¨Êç¢Âô®">
    <title>MDËΩ¨ÂÖ¨‰ºóÂè∑HTMLÂ∑•ÂÖ∑</title>
    <!-- MarkdownËß£ÊûêÂíåÊ†∑Âºè -->
    <script src="../../js/marked.min.js"></script>
    <link rel="stylesheet" href="../../css/github.min.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            box-sizing: border-box;
        }

        .container {
            display: flex;
            gap: 20px;
            flex: 1;
        }

        .editor-box {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        textarea {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: none;
            font-family: 'Courier New', monospace;
        }

        #preview {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow-y: auto;
            background: #fff;
        }

        .copy-btn {
            position: fixed;
            bottom: 20px;
            right: 135px;
            padding: 8px 15px;
            background: #07c160;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease, opacity 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0.3;
        }

        .copy-btn:hover {
            background: #06ad56;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            opacity: 1;
        }

        .copy-btn::before {
            content: "üìã";
            font-size: 16px;
        }

        /* ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑Ê†∑Âºè‰ºòÂåñ */
        .wx-content {
            line-height: 1.6;
            font-size: 16px;
            color: #333;
        }
        
        .wx-content img {
            max-width: 100%!important;
            height: auto!important;
        }

        /* ËøîÂõû‰∏ªÈ°µÊåâÈíÆÊ†∑Âºè */
        .back-home {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 8px 15px;
            background: #ffd93d;
            color: #333;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease, opacity 0.3s ease;
            z-index: 1000;
            opacity: 0.7;
        }

        .back-home:hover {
            background: #ffc107;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            opacity: 0.9;
        }

        .back-home::before {
            content: "üè†";
            font-size: 16px;
        }

        /* ÊµÆÂä®ÊèêÁ§∫Ê†∑Âºè */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #FFD1DC, #FFB5E8);
            color: #444;
            padding: 12px 24px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toast.show { opacity: 1; }
        .toast::before { content: "üéà"; }

        /* ÊÆµËêΩÂíåÂØπÈΩêÈÄâÈ°πÊ†∑Âºè */
        .options-bar {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 10px;
            font-size: 15px;
            user-select: none;
        }
        .options-bar label {
            margin-right: 8px;
            cursor: pointer;
        }
        .options-bar input[type="radio"] {
            margin-right: 3px;
        }
    </style>
</head>
<body>
    <a href="../../index.html" class="back-home"> ËøîÂõû‰∏ªÈ°µ</a>
    <div class="container">
        <div class="editor-box">
            <div class="options-bar">
                <div style="text-align: left;">    
                    <span>ÊÆµËêΩÔºö</span>
                    <label><input type="radio" name="paragraphMode" value="on" id="para-on" checked>ÊòØ</label>
                    <label><input type="radio" name="paragraphMode" value="off" id="para-off">Âê¶</label>
                    <span style="display: inline-block; width: 20px;margin: 10px 0px;"></span>
                    <span>ÂØπÈΩêÔºö</span>
                    <label><input type="radio" name="alignMode" value="left" id="align-left" >Â±ÖÂ∑¶</label>
                    <label><input type="radio" name="alignMode" value="center" id="align-center" checked>Â±Ö‰∏≠</label>
                    <span>‰π±Â∫èÔºö</span>
                    <label><input type="radio" name="sortMode" value="random" id="align-random" >ÈöèÊú∫</label>
                    <label><input type="radio" name="sortMode" value="sort" id="align-sort" checked>È°∫Â∫è</label>
                </div>
            </div>
            <div class="options-bar">
                    <span style="display: inline-block; width: 20px;margin: 10px 0px;"></span>
                    <span>URLÔºö</span>
                    <label><input type="radio" name="urlMode" value="qpic.cn" id="url-pic" >ÂõæÁâáURL</label>
                    <label><input type="radio" name="urlMode" value="mp.weixin.qq.com" id="url-wz">ÊñáÁ´†URL</label>
                    <label><input type="radio" name="urlMode" value="fullurl" id="url-fullurl" checked>ÂÖ®ÈÉ®URL</label>
                    <span style="display: inline-block; width: 20px;margin: 10px 0px;"></span>
                        
                    <div style="text-align: right;"><input type="button" name="clearEnter" value="Âà†Èô§Á©∫Ë°å" id="clear-enter"/></div>
                    <div style="text-align: right;"><input type="button" name="clearSort" value="ÂÜÖÂÆπ‰π±Â∫è" id="clear-sort"/></div>
                    <div style="text-align: right;"><input type="button" name="clearShort" value="Âà†Èô§Áü≠ËØç" id="clear-short"/></div>
                    <div style="text-align: right;"><input type="button" name="formatUrl" value="ÊèêÂèñURL" id="format-url"/></div>
                    <div text-align: right;><input type="button" name="periodLine" value="Âè•Âè∑Êç¢Ë°å" id="period-line"/></div>
            </div>
            <div class="options-bar">
                    <span style="display: inline-block; width: 20px;margin: 10px 0px;"></span>
                    <button id="pick-images-btn"
                            class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow">
                        ÈÄâÊã©ÂõæÁâá
                    </button>
                    <button id="clear-images-btn"
                            class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow">
                        Ê∏ÖÁ©∫ÂõæÁâá
                    </button>
                    <input id="file-input-btn" type="file" accept="image/*" multiple style="display: none;" />
                    <input id="file-src-array" type="textarea"/>
                    <input id="valueDisplay" type="hidden" /> 
                    <div style="text-align: right;">
                        <label for="user-id" style="margin-right: 5px;">Áî®Êà∑IDÔºö</label>
                        <input type="text" name="userid" value="MzI2OTQ4MDcxOA==" id="user-id" title="ËØ∑ËæìÂÖ•Áî®Êà∑ID" placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑ID"/>
                    </div>
                    <div style="text-align: right;">
                        <label for="user-name" style="margin-right: 5px;">Áî®Êà∑ÂêçÔºö</label>
                        <input type="text" name="username" value="ÂåóÂ±øÁöÑËìùËâ≤" id="user-name" title="ËØ∑ËæìÂÖ•Áî®Êà∑Âêç" placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑Âêç"/>
                    </div>
            </div>
            <div class="options-bar" style="width: 100%;"> 
                 <div id="image-list" style="float: left; width: 100%; min-height:60px; border: #444 1px solid;"></div>

            </div>

            <textarea id="editor" placeholder="ËæìÂÖ•MarkdownÂÜÖÂÆπ..."></textarea>
        </div>
        <div class="editor-box">
            <div id="preview" class="wx-content"></div>
            <button class="copy-btn" onclick="copyWechatHTML()">Â§çÂà∂ÂÖ¨‰ºóÂè∑ÂÜÖÂÆπ</button>
        </div>
    </div>

    <!-- Ê∑ªÂä†ÊèêÁ§∫ÂÖÉÁ¥† -->
    <div id="toast" class="toast">Â§çÂà∂ÊàêÂäüÔºÅ</div>

    <script>
    // ÊÆµËêΩÊ®°ÂºèÂíåÂØπÈΩêÊñπÂºèÁöÑÂÖ®Â±ÄÂèòÈáè
    let paragraphMode = true; // true: ÊÆµËêΩÂàÜÂâ≤Ôºåfalse: ÊØèË°å‰∏∫‰∏Ä‰∏™Âùó
    let alignMode = 'center';   // 'left' or 'center'
    let sortMode = 'sort';      // 'sort' or 'random'

    // ÂúñÁâáÂàóË°®
    let imageFiles = [];

    // ÂÖ®Â±Ä src ÂàóË°®ÔºàÂ≠òÂÇ®ÂèØÁõ¥Êé•Áî®‰∫é img.src ÁöÑÂ≠óÁ¨¶‰∏≤Ôºâ
    let imageSrcList = [];


    // ÁõëÂê¨ÊÆµËêΩÊ®°ÂºèÂàáÊç¢
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('para-on').addEventListener('change', function() {
            if (this.checked) {
                paragraphMode = true;
                updatePreview();
            }
        });
        document.getElementById('para-off').addEventListener('change', function() {
            if (this.checked) {
                paragraphMode = false;
                updatePreview();
            }
        });
        document.getElementById('align-left').addEventListener('change', function() {
            if (this.checked) {
                alignMode = 'left';
                updatePreview();
            }
        });
        document.getElementById('align-center').addEventListener('change', function() {
            if (this.checked) {
                alignMode = 'center';
                updatePreview();
            }
        });
        document.getElementById('align-random').addEventListener('change', function() {
            if (this.checked) {
                sortMode = 'random';
                updatePreview();
            }
        });
        document.getElementById('align-random').addEventListener('click', function() {
            if (this.checked) {
                sortMode = 'random';
                updatePreview();
            }
        });
        document.getElementById('align-sort').addEventListener('change', function() {
            if (this.checked) {
                sortMode = 'sort';
                updatePreview();
            }
        });
        // ËøôÈáåÂèØ‰ª•Ê≠£Â∏∏ÂèñÂÄº„ÄÇchange‰∫ã‰ª∂‰ºöÂú®ËæìÂÖ•Ê°ÜÂ§±ÂéªÁÑ¶ÁÇπÊàñÂÜÖÂÆπÊîπÂèòÂêéËß¶ÂèëÔºåËÉΩËé∑ÂèñÂà∞ÊúÄÊñ∞ÁöÑÂÄº„ÄÇ
        document.getElementById('user-id').addEventListener('change', function(e) {
            userId =  e.target.value;
            updatePreview();
        });
        document.getElementById('user-name').addEventListener('change', function(e) {
            userName = e.target.value;
            updatePreview();
        });
        document.getElementById('clear-enter').addEventListener('click', function() {
            clearEnter()
        });
        document.getElementById('clear-sort').addEventListener('click', function() {
            clearSort()
        });
        document.getElementById('clear-short').addEventListener('click', function() {
            clearShort()
        });
        document.getElementById('format-url').addEventListener('click', function() {
            setUniqueUrlsToEditor()
        });
        document.getElementById('period-line').addEventListener('click', function() {
            periodLine()
        });    });

    
    function clearEnter(){
            // Âà†Èô§Â§ö‰ΩôÁöÑÁ©∫Ë°åÔºàËøûÁª≠‰∏§‰∏™Âèä‰ª•‰∏äÁöÑÁ©∫Ë°åÂèòÊàê‰∏Ä‰∏™Á©∫Ë°åÔºâÔºåÂπ∂ÂéªÈô§È¶ñÂ∞æÁ©∫ÁôΩ
            let textArea = document.getElementById('editor');
            let text = textArea.value;
            // ÂÖºÂÆπWindows(\r\n)„ÄÅMac(\r)ÂíåUnix(\n)Êç¢Ë°åÁ¨¶
            // 1. ÊõøÊç¢ÊâÄÊúâ\r\nÂíå\r‰∏∫\n
            // text = text.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            // 1. ÊõøÊç¢ÊâÄÊúâ\r\nÂíå\r‰∏∫\n
            text = text.replace(/\r\n/g, '').replace(/\r/g, '').replace(/\n\n/g, '\n');
            // 2. ËøûÁª≠‰∏§‰∏™Âèä‰ª•‰∏äÁöÑÁ©∫Ë°åÂèòÊàê‰∏Ä‰∏™Á©∫Ë°å
            //text = text.replace(/\n{1,}/g, '\n\n');
            // 3. ÂéªÈô§È¶ñÂ∞æÁ©∫ÁôΩ
            text = text.trim();
            textArea.value = text;
            updatePreview();
    } 
    
    function periodLine(){
            // Âà†Èô§Â§ö‰ΩôÁöÑÁ©∫Ë°åÔºàËøûÁª≠‰∏§‰∏™Âèä‰ª•‰∏äÁöÑÁ©∫Ë°åÂèòÊàê‰∏Ä‰∏™Á©∫Ë°åÔºâÔºåÂπ∂ÂéªÈô§È¶ñÂ∞æÁ©∫ÁôΩ
            let textArea = document.getElementById('editor');
            let text = textArea.value;
            // ÂÖºÂÆπWindows(\r\n)„ÄÅMac(\r)ÂíåUnix(\n)Êç¢Ë°åÁ¨¶
            // 1. ÊõøÊç¢ÊâÄÊúâ\r\nÂíå\r‰∏∫\n
            // text = text.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            // 1. ÊõøÊç¢ÊâÄÊúâ\r\nÂíå\r‰∏∫\n
            text = text.replace(/[„ÄÇÔºÅ]/g, '„ÄÇ\n');
            // 2. ËøûÁª≠‰∏§‰∏™Âèä‰ª•‰∏äÁöÑÁ©∫Ë°åÂèòÊàê‰∏Ä‰∏™Á©∫Ë°å
            //text = text.replace(/\n{1,}/g, '\n\n');
            // 3. ÂéªÈô§È¶ñÂ∞æÁ©∫ÁôΩ
            text = text.trim();
            textArea.value = text;
            updatePreview();
    } 
    
    
    function clearSort(){
            let textArea = document.getElementById('editor');
            let text = textArea.value;
            // ÈöèÊú∫‰π±Â∫è
            let lines = text.split('\n');
            let filteredLines = lines.sort(() => Math.random() - 0.5);
            textArea.value =  filteredLines.join('\n');
            updatePreview();
    } 

    
    function clearShort(){
            let textArea = document.getElementById('editor');
            let text = textArea.value;
            // ÊäätextÊãÜÂàÜÊàêÂ§öË°åÁöÑÊï∞ÊçÆÔºå ‰ªÖ‰øùÁïôÊØèË°åÂ≠óÁ¨¶‰∏≤ÂéªÈô§ÂâçÂêéÁ©∫Ê†ºÂêéÈïøÂ∫¶Â§ß‰∫é3ÁöÑ  
            let lines = text.split('\n');
            let filteredLines = lines.filter(line => {
                return line.trim() === '' || line.trim().length > 3;
            });
            textArea.value = filteredLines.join('\n');
            updatePreview();
    } 
    
    const imgtx = [
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400687305",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400687508",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400687629",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400687710",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400687826",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400743924",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400744121",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400744211",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400744290",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400744476",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400792184",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400792381",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401002298",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401002474",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401059143",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401059323",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401059410",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401059538",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401059708",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401059631",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401059802",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401059885",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401059997",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401111082",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401111208",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401111291",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401111388",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401111471",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401111558",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401111635",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401111744",   
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752401137939", 
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400687024", 
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400687121", 
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400687217"   

    ]

    let imgLinks = [
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431221577",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431221748",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431221929",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222005",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222116",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431221856",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222370",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222487",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222229"
    ]

    function autoFormatText(rawText) {
        debugger
        // ÊÆµËêΩÂàÜÂâ≤
        let paragraphs = [];
        if (paragraphMode) {
            // ÊÆµËêΩÊ®°ÂºèÔºö‰ª•‰∏§‰∏™Âèä‰ª•‰∏äÊç¢Ë°åÂàÜÂâ≤‰∏∫ÊÆµËêΩ
            paragraphs = rawText.split(/\n{2,}/g);
        } else {
            // ÈùûÊÆµËêΩÊ®°ÂºèÔºöÊØè‰∏ÄË°å‰∏∫‰∏Ä‰∏™ÊÆµ
            paragraphs = rawText.split('\n').filter(line => line.trim() !== '');
        }

        let html = [];
        let index = 0;
        userId = document.getElementById("user-id").value
        userName = document.getElementById("user-name").value

        // ÈöèÊú∫Ê†áÁ≠æÊï∞ÊçÆ
        const times = [
            "3ÂàÜÈíüÂâç", "5ÂàÜÈíüÂâç", "10ÂàÜÈíüÂâç", "ÂàÜ‰∫´‰ºöÊö¥ÂØå", "ÁÇπËµû‰ºöÊö¥ÂØå"
        ];
        const names = [
            "‰∫ëËàí", "ÊòüÁú†", "ÊúàÊ±Ä", "È£éÁ¶æ", "Ê°ëÊ¶Ü",
            "Ê∏ÖÊôè", "Âçó‰πî", "Áü•Â§è", "Á†öÁßã", "Ê±ÄÂÖ∞",
            "Ê°ÉÂ§≠", "Â∞èÊª°", "ÊüöÊüö", "Ê£†Ê¢®", "ÈùíÈõÄ",
            "Daisy", "Luna", "Willow", "Elena", "Clover",
            "‰∫àÂÆâ", "Áü•ÈÅ•", "ÂøµÂàù", "ÁÆÄÂÆÅ", "Êú™Êôû",
            "ËéìËéì", "Ê£†Ê£†", "Á©óÁ©ó", "ÁöéÁöé", "Ê≤ÖÊ≤Ö",
            "Â∞èÂàù", "Èõ®Êüî", "ÂÆâÂ©â", "ÈùíÊü†", "Ë•øÁìú", "Â§èÂ§è", "Spring"
        ];
        const symbols = [
            'ùíÆùìäùìÉ ‚òÄÔ∏è ùíÆùíΩùíæùìÉùëí','üç∏ ùíûùíΩùíæùìÅùìÅ ùíØùíæùìÇùëí','üåº ùí©ùí∂ùìâùìäùìáùëí ùíüùëíùìÅùíæùëîùíΩùìâ','ùêøùëúùìãùëíüíï ùí•ùëúùìäùìáùìÉùëíùìé','üçü ùíØùí∂ùìàùìâùìé ùíØùíæùìÖ','ùêµùìéùëí üçØ ùíÆùëúùìäùìÅ','üåä ùíÆùëíùí∂ ùíûùí∂ùìÅùìÇ','üéà ùíûùëíùìÅùëíùí∑ùìáùí∂ùìâùëí','üçµ ùíØùëíùí∂ ùíûùí∂ùìÅùìÇ','ùíÆùìâùí∂ùìá üåü ùíüùìáùëíùí∂ùìÇ',
            'üå∑ ùí´ùí∂ùìàùìàùíæùëúùìÉ ùíÆùìÖùí∂ùìáùìÄ','üçé ùí©ùìäùìâùìáùíæùìâùíæùëúùìÉ ùíÆùëúùìäùìÅ','üåø ùí©ùí∂ùìâùìäùìáùëí ùíØùëúùìäùí∏ùíΩ','ùêµùìÅùëúùëúùìÇ üå∏ ùíØùíæùìÇùëí','üç∞ ùíüùëíùìàùìàùëíùìáùìâ ùíüùìáùëíùí∂ùìÇ','üå¥ ùíØùìáùí∂ùìãùëíùìÅ ùíüùëüùëíùí∂ùìÇ','üçï ùí´ùíæùìèùìèùí∂ ùíØùíæùìÇùëí','üå≥ ùí≤ùëúùëúùíπùìà ùíØùíæùìÇùëí','üçë ùíÆùìåùëíùëíùìâ ùíÆùëúùìäùìÅ','ùêπùëôùë¶ üå¨ ùíüùëüùëíùí∂ùìÇ',
            // ... ÁúÅÁï•ÈÉ®ÂàÜÔºåÂéüÊúâÂÜÖÂÆπÁªßÁª≠ ...
            'ùìàùìÅùëíùëíùìÖ üí§ ùíÆùëúùìäùìÅ'
        ];

        
    
        function getRandomItem(arr) {
            const randomIndex = Math.floor(Math.random() * arr.length);
            return arr[randomIndex];
        }

        function processInlineMarkdown(text) {
            text = text.replace(/(\*\*|__)(.*?)\1/g, (match, p1, p2) => {
                return ` <strong>${p2}</strong> `;
            });
            text = text.replace(/(\*|_)(.*?)\1/g, '<em>$2</em>');
            text = text.replace(/~~(.*?)~~/g, '<del>$1</del>');
            text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
            text = text.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
            text = text.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '<img src="$2" alt="$1">');
            text = text.replace(/\s+/g, ' ').trim();
            return text;
        }
        
         

        // ÈÅçÂéÜÊØè‰∏™ÊÆµËêΩÊàñË°å
        paragraphs.forEach((para) => {
            // ÊÆµËêΩÂÜÖÂÆπÊåâÊç¢Ë°åÂàÜÂè•
            // Â∞ÜÊÆµËêΩÂÜÖÂÆπÊåâË°åÂàÜÂâ≤ÔºåÊèêÂèñÊâÄÊúâ‰ª• https:// ÂºÄÂ§¥ÁöÑÂõæÁâáÈìæÊé•
            let lines = para
                .split('\n')
                .map(line => line.trim())
                .filter(line => line.length > 0);

            // ÊèêÂèñÊâÄÊúâ‰ª• https:// ÂºÄÂ§¥ÁöÑÂõæÁâáÈìæÊé•
            let imageLinks = [];
            lines.forEach(line => {
                // ÂÖÅËÆ∏‰∏ÄË°åÊúâÂ§ö‰∏™ÈìæÊé•ÔºåÁî®Ê≠£ÂàôÊèêÂèñ
                const matches = line.match(/https:\/\/[^\s",]+/g);
                if (matches) {
                    imageLinks.push(...matches);
                }
            });
 
            debugger
            if (imageLinks.length === 0) return;
 
            // ÊòæÁ§∫Â∞èÂõæ
            showImageList(imageLinks)

            imageSrcList = [...imageLinks]

            index++; 
            // const name = getRandomItem(names);
            // const time = getRandomItem(times);
            // Âè•Â≠êÂàÜÂâ≤ÔºàÂèØÊ†πÊçÆÈúÄË¶ÅÊõ¥ÁªÜËá¥ÂàÜÂâ≤Ôºâ
            
            
            let sentenceHtmlArr = [];
            let sentenceUrlArr = imageLinks


            if(sortMode === 'random'){
                let  maxLength = sentenceUrlArr.length
                sentenceUrlArr = [...sentenceUrlArr]
                    .sort(() => Math.random() - 0.5)
                    .slice(0, maxLength);
            }


            debugger
            if(sentenceUrlArr.length>0 && sentenceUrlArr.length %2 !== 0){
                sentenceUrlArr.pop(); // Âà†Èô§ÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†
            }

            // ÂèåÂõæÊ®°Âºè
            for(let i = 0; i <sentenceUrlArr.length; i+=3){
                 const imgurlLeft = sentenceUrlArr[i]
                const imgurlRight = sentenceUrlArr[i+1]
                const imgurlThree = sentenceUrlArr[i+2]

                const block = `

                <section style="width:100%;text-align:center;">
                    <section style="max-width:100%;width:100%;margin:0 auto;padding:6px 2vw;font-size:16px;font-weight:400;font-style:normal;text-align:center;justify-content:center;display:flex;flex-flow:row;box-sizing:border-box;visibility:visible;gap:1vw;">
                        <section style="display:inline-block;vertical-align:top;width:48%;min-width:0;align-self:flex-start;flex:1 1 0;padding:0;margin:0;border-radius:16px;overflow:hidden;box-shadow:0 2px 8px 0 rgba(160,160,160,0.15);height:auto;box-sizing:border-box;visibility:visible;" data-eusoft-scrollable-element="1">
                            <section style="margin:0;line-height:0;box-sizing:border-box;visibility:visible;">
                                <section style="visibility:visible;">
                                    <section style="display:inline-block;visibility:visible;width:100%;">
                                        <span leaf="">
                                            <img 
                                                data-src="${imgurlLeft}" 
                                                class="rich_pages wxw-img" 
                                                style="width:100%;height:auto;max-width:100vw;display:block;margin:0 auto;border-radius:16px;box-shadow:0 2px 8px 0 rgba(160,160,160,0.15);" 
                                                src="${imgurlLeft}"
                                            >
                                        </span>
                                    </section>
                                </section>
                                <section style="box-shadow: rgb(0, 0, 0) 0px 0px 10px 0px;max-width:100%;vertical-align:middle;display:inline-block;line-height:0;width:100%;height:auto;box-sizing:border-box;visibility:visible;">
                                    <span leaf=""><br></span>
                                </section>
                            </section>
                        </section>
                        <section style="display:inline-block;vertical-align:top;width:48%;min-width:0;align-self:flex-start;flex:1 1 0;padding:0;margin:0 0 0 1vw;border-radius:16px;overflow:hidden;height:auto;box-shadow:0 2px 8px 0 rgba(160,160,160,0.15);box-sizing:border-box;visibility:visible;" data-eusoft-scrollable-element="1">
                            <section style="margin:0;line-height:0;box-sizing:border-box;visibility:visible;">
                                <section style="visibility:visible;">
                                    <section style="display:inline-block;visibility:visible;width:100%;">
                                        <span leaf="">
                                            <img 
                                                data-src="${imgurlRight}" 
                                                class="rich_pages wxw-img" 
                                                style="width:100%;height:auto;max-width:100vw;display:block;margin:0 auto;border-radius:16px;box-shadow:0 2px 8px 0 rgba(160,160,160,0.15);" 
                                                src="${imgurlRight}"
                                            >
                                        </span>
                                    </section>
                                </section>
                                <section style="box-shadow: rgb(0, 0, 0) 0px 0px 10px 0px;max-width:100%;vertical-align:middle;display:inline-block;line-height:0;width:100%;height:auto;box-sizing:border-box;visibility:visible;">
                                    <span leaf=""><br></span>
                                </section>
                            </section>
                        </section>
                        <section style="display:inline-block;vertical-align:top;width:48%;min-width:0;align-self:flex-start;flex:1 1 0;padding:0;margin:0 0 0 1vw;border-radius:16px;overflow:hidden;height:auto;box-shadow:0 2px 8px 0 rgba(160,160,160,0.15);box-sizing:border-box;visibility:visible;" data-eusoft-scrollable-element="1">
                            <section style="margin:0;line-height:0;box-sizing:border-box;visibility:visible;">
                                <section style="visibility:visible;">
                                    <section style="display:inline-block;visibility:visible;width:100%;">
                                        <span leaf="">
                                            <img 
                                                data-src="${imgurlThree}" 
                                                class="rich_pages wxw-img" 
                                                style="width:100%;height:auto;max-width:100vw;display:block;margin:0 auto;border-radius:16px;box-shadow:0 2px 8px 0 rgba(160,160,160,0.15);" 
                                                src="${imgurlThree}"
                                            >
                                        </span>
                                    </section>
                                </section>
                                <section style="box-shadow: rgb(0, 0, 0) 0px 0px 10px 0px;max-width:100%;vertical-align:middle;display:inline-block;line-height:0;width:100%;height:auto;box-sizing:border-box;visibility:visible;">
                                    <span leaf=""><br></span>
                                </section>
                            </section>
                        </section>
                    </section>
                </section>
                `
                sentenceHtmlArr.push(block)
            }
            html.push(sentenceHtmlArr.join(''))
        });
 
        // html.push(htmlWenan())
        // html.push(htmlCloudImg())

        return htmlWxw(html)        
    }
 
    function htmlWxw(html){
        return `
            <article class="wechat-article">
                
                <section style="width:95%;text-align:center;">
                    ${html.join('')}
                </section>
                

            </article>
            <style>
                .wechat-article {
                    max-width: 640px;
                    margin: 20px auto;
                    padding: 20px;
                    font-family: -apple-system, BlinkMacSystemFont, 
                                "Helvetica Neue", "PingFang SC", 
                                "Microsoft YaHei", sans-serif;
                    color: #333;
                    line-height: 1.8;
                    text-align: justify;
                }

                .part-container {
                    display: flex;
                    align-items: center;
                    margin: 2em 0;
                    position: relative;
                    justify-content: center;
                }

                .part-title {
                    color: #3498db;
                    font-size: 24px;
                    font-weight: bold;
                    margin: 0;
                    position: relative;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .part-decorator {
                    width: 3px;
                    height: 24px;
                    background: #3498db;
                    margin-right: 15px;
                }

                .part-label {
                    font-size: 11px;
                    color: #64748b;
                }

                [class^="heading-"] {
                    margin: 1.5em 0 1em;
                    font-weight: 500;
                    border-left: 4px solid;
                    padding-left: 12px;
                }

                .heading-1 { font-size: 20px; color: #2c3e50; border-color: #166a9f; }
                .heading-2 { font-size: 18px; color: #34495e; border-color: #44b0ce; }
                .heading-3 { font-size: 16px; color: #4a5568; border-color: #1abc9c; }
                .heading-4 { font-size: 15px; color: #555; border-color: #f1c40f; }
                .heading-5 { font-size: 14px; color: #666; border-color: #e67e22; }
                .heading-6 { font-size: 13px; color: #777; border-color: #e74c3c; }

                .article-paragraph {
                    margin: 0.8em 0;
                    text-indent: 2em;
                }

                .custom-list {
                    margin: 1em 2em;
                    padding-left: 1.2em;
                    color: #475569;
                    counter-reset: item;
                }

                .custom-list li {
                    margin: 0.6em 0;
                    padding-left: 0.8em;
                }

                ol.custom-list {
                    list-style-type: decimal;
                }

                ul.custom-list {
                    list-style-type: disc;
                }

                .custom-list li::marker {
                    color: #3498db;
                    font-weight: bold;
                }

                strong {
                    font-weight: 600;
                    color: #3498db;
                }

                em {
                    font-style: italic;
                    color: #334155;
                }

                del {
                    text-decoration: line-through;
                    color: #94a3b8;
                }

                code {
                    background: #f1f5f9;
                    padding: 2px 4px;
                    border-radius: 3px;
                    font-family: Consolas, Monaco, monospace;
                    font-size: 0.9em;
                    color: #dc2626;
                }

                a {
                    color: #3b82f6;
                    text-decoration: none;
                    border-bottom: 1px solid #3b82f6;
                    transition: all 0.2s;
                }

                a:hover {
                    color: #1d4ed8;
                    border-bottom-color: #1d4ed8;
                }

                img {
                    max-width: 100%;
                    height: auto;
                    margin: 1em auto;
                    display: block;
                    border-radius: 4px;
                }

                @media (max-width: 480px) {
                    .wechat-article {
                        padding: 15px;
                        font-size: 16px;
                    }
                    .heading-1 { font-size: 19px; }
                    .heading-2 { font-size: 17px; }
                    img {
                        width: 100%;
                    }
                }
            </style>
        `;
    }

    const rawText = `"https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400242579", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400242375", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400242155", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400242488", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400242881", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400242781", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400277068", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400277220", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400410984", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400500142", 
            "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752400551667", 
			
			
		    n2.AAA\n1.BBB\n1.CCC\nÂπ∂ÂùáÂåÄÂàÜÊï£‰∫éÂõ∫‰ΩìÊùêÊñô‰∏≠ÁöÑ‰∏ÄÁ±ª È´òÂàÜÂ≠êÊùêÊñô„ÄÇ`;



    function htmlHead(){
        return `
            <section style="width:100%;text-align:center;">
                <section style="">
                    <p>
                    <span leaf=""><br></span>
                    </p>
                    <section class="" nodeleaf="">
                        <mp-common-profile class="js_uneditable custom_select_card mp_profile_iframe" data-pluginname="mpprofile" data-nickname="${userName}" data-alias="hot-books" data-from="0" data-headimg="http://mmbiz.qpic.cn/sz_mmbiz_png/SafC09p6yPmkKicjV7Eib4QicxEsLtDy0akTFJOkpZu5pfCpw4MtoZLdTY2l0eGlEwmVbNOyK7EaEndpqCrvlXwBQ/0?wx_fmt=png" data-signature="Ê¨¢ËøéÔΩûÂÖ≥Ê≥®ÂêéËèúÂçïÊ†èÈáåÂèñÂõæü´∞" data-id="${userId}" data-is_biz_ban="0" data-service_type="1" data-verify_status="0">
                                        <section data-pm-slice="0 0 []" nodeleaf="">
                                        <img class="wx_profile_avatar" data-ratio="1" data-w="272" style="max-width: 300px;height: 100px;margin: 1em auto;display: block;border-radius: 4px;text-align: center;max-height: 300px;width: 100px;" data-imgqrcoded="1" data-src="http://mmbiz.qpic.cn/sz_mmbiz_png/SafC09p6yPmkKicjV7Eib4QicxEsLtDy0akTFJOkpZu5pfCpw4MtoZLdTY2l0eGlEwmVbNOyK7EaEndpqCrvlXwBQ/0?wx_fmt=png" src="http://mmbiz.qpic.cn/sz_mmbiz_png/SafC09p6yPmkKicjV7Eib4QicxEsLtDy0akTFJOkpZu5pfCpw4MtoZLdTY2l0eGlEwmVbNOyK7EaEndpqCrvlXwBQ/0?wx_fmt=png">
                                        </section>
                                        <p style="text-align: center;">
                                        <strong id="js_a11y_wx_profile_nickname" class="wx_profile_nickname" style="font-weight: 600;color: rgb(52, 152, 219);"><span leaf="">${userName}</span></strong>
                                        <span class="wx_follow_verify"></span>
                                        </p>
                                        <p style="text-align: center;">
                                        <span leaf="">Ê¨¢ËøéÔΩûÂÖ≥Ê≥®ÂêéËèúÂçïÊ†èÈáåÂèñÂõæü´∞</span>
                                        </p>
                        </mp-common-profile>
                    </section>
                    <p>
                    <span leaf=""><br></span>
                    </p>
                </section>
            </section>
        `
    }
    
    function html(){

        return `
        <section>
            <span leaf=""><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAEAAAAAAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAD8At4DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooprMQaAFMgU4pPNFRuw3c9aY0ig0AT+aKPNFV/NFNacA9aALXmijzRVUXAo+0CgC15oo80VTa6ANJ9roAu+aKPNFUvtdH2ugC75oo80VRN1z1qWOYMgJNAFnzRShgR1qBXUipEZdooAkopm/wBOlOVuOTQAtFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUZFABRTTIAaUMCOtAC0UUUAFFFIZApxQAtFML5PHSjeaAH0UzeaUSAdetADqKb5opwO4ZoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKazEGhmINRu53GgBWlYHrSeaO55qN3O41FLLt+tAEk8gyTUD3Cge9QzXeOpqlLdM8m1QST6dqALr3u0dai+39eVJp9lpDyqPMOc/hWhBpUUC4CLn1PNAGP8A2jnqQDSHUsdvxrfFrGB/q4/++RVe60qC6ZgVCt7cYoAxW1NQ3WkfU1AHOM0zV/C0tsm6I7yx6elXNJ8LGJUeZRv7jPSgBlo73jHywWHYkYqdbSdSQyDI9K1o7dIV+VQv0oBxQBjOZYF+ZelEN/kDt7VrTp5keO1Zt/o7LB5sf3u4oAkjvAe9TJcZPtWFFf4OG4I6irkGoLxzQBsRygmntIAaz4b0E5BqZZ97UAW1fI46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gGePSgDoopFY5qYNg5FZ1rcrsFWluAV60AWPNb1oZzsz3qJZQRTJrggYB4oAdJJxk9ahe4UD3qGa7x1NUrq+Cg880AWpb5V781Xk1JAfUms2S+Msu1fmLenatjR/DokVZZhuz0GcYoHYhV5ZmwsT/UDrT/sVz/cP41tJCIxgDGKlT7ooEczdyTWHMiHb6gdKqNqQdgQxwe+Oa6+WETKVYBlPY1n/APCMWy3olEYGeoycUAZthbTXhygzGehNaEeiuUGWwa0UgEa4UBR6U4IVGAf1oA5sytdThFPzE1uWlstsoCrg45rnvCj/AG3VyTlSiZHHGa6fHOT1oGmPT7ooKgmhPuiiQ7V4oJbFAxRUauSOtPU5FAJi0UjHGPrSngGgY1kJNKEGBkCkEgHXrTgdwzQK5R17Rk1ywe3ckBz19KzovAenRIB5YYgYJLHn9a38dfejA9BQM5vUvANnc25WIPE/qCSKx9G8Bz6B4ngmeQzQe4ANd3tHpSGJSemaBtggDLmnAYoA2jAooENZiDSqcigqCaUDFAkgooooGFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAjKG60Y5paKAADA4ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApjfep9IVBNAFa7tftkLKOucH34rhZbk2N88Z4KsRXogGK4Dx5pE8et+fBDI6OQX2jOeBQBoWOohlXmtGG9BA54rkrC5mhfEkMigeoxWnb6mMDBoA6EXQAqKe8HNZf9pj+9UN1qqqp55oGkWry+Ck881k6jqQVCQ3Jqvf6puUlWBJ7ViX99MSGWKQsTxhaCrHb+BtON5G9xMMgcAetdZCgSMADAFUPD1qLTRrZBydgJ+p5/rV4MRQJscVBNITtOBSqcigqCaCQU5FLjJz6UAYooAKKKKAIFtwj7kRVOMZAxT0jIUVIBiigBFGBSkbhzRRQAgQDtSgYoooACM0daKKAGNFk05V2rilooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKjZCCQOhqSigCtcafFdxbHVc9+K5/WPBRQl7V8cZK11JGaQIAc96APLLrVZLGdopwInQ4we9X/AA/otz4ncuR5UIPDf3q6rxD4ItPEVykkilGjOcgferVtLKO0tViRAiKMACgaZnaf4TtLCJcRI+OpOTmryaZbMQ4gjBAwPlqyBgUUBcQRqoAAwBRsFLRQIAMUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//9k=" alt="È¢ÑËßàÂõæ" class="w-full h-40 object-cover"></span>
        </section>
        `
    } 

     function htmlCloudImg(){

        return `
        <section>
            <span leaf=""><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAEAAAAAAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAD8At4DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooprMQaAFMgU4pPNFRuw3c9aY0ig0AT+aKPNFV/NFNacA9aALXmijzRVUXAo+0CgC15oo80VTa6ANJ9roAu+aKPNFUvtdH2ugC75oo80VRN1z1qWOYMgJNAFnzRShgR1qBXUipEZdooAkopm/wBOlOVuOTQAtFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUZFABRTTIAaUMCOtAC0UUUAFFFIZApxQAtFML5PHSjeaAH0UzeaUSAdetADqKb5opwO4ZoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKazEGhmINRu53GgBWlYHrSeaO55qN3O41FLLt+tAEk8gyTUD3Cge9QzXeOpqlLdM8m1QST6dqALr3u0dai+39eVJp9lpDyqPMOc/hWhBpUUC4CLn1PNAGP8A2jnqQDSHUsdvxrfFrGB/q4/++RVe60qC6ZgVCt7cYoAxW1NQ3WkfU1AHOM0zV/C0tsm6I7yx6elXNJ8LGJUeZRv7jPSgBlo73jHywWHYkYqdbSdSQyDI9K1o7dIV+VQv0oBxQBjOZYF+ZelEN/kDt7VrTp5keO1Zt/o7LB5sf3u4oAkjvAe9TJcZPtWFFf4OG4I6irkGoLxzQBsRygmntIAaz4b0E5BqZZ97UAW1fI46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gGePSgDoopFY5qYNg5FZ1rcrsFWluAV60AWPNb1oZzsz3qJZQRTJrggYB4oAdJJxk9ahe4UD3qGa7x1NUrq+Cg880AWpb5V781Xk1JAfUms2S+Msu1fmLenatjR/DokVZZhuz0GcYoHYhV5ZmwsT/UDrT/sVz/cP41tJCIxgDGKlT7ooEczdyTWHMiHb6gdKqNqQdgQxwe+Oa6+WETKVYBlPY1n/APCMWy3olEYGeoycUAZthbTXhygzGehNaEeiuUGWwa0UgEa4UBR6U4IVGAf1oA5sytdThFPzE1uWlstsoCrg45rnvCj/AG3VyTlSiZHHGa6fHOT1oGmPT7ooKgmhPuiiQ7V4oJbFAxRUauSOtPU5FAJi0UjHGPrSngGgY1kJNKEGBkCkEgHXrTgdwzQK5R17Rk1ywe3ckBz19KzovAenRIB5YYgYJLHn9a38dfejA9BQM5vUvANnc25WIPE/qCSKx9G8Bz6B4ngmeQzQe4ANd3tHpSGJSemaBtggDLmnAYoA2jAooENZiDSqcigqCaUDFAkgooooGFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAjKG60Y5paKAADA4ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApjfep9IVBNAFa7tftkLKOucH34rhZbk2N88Z4KsRXogGK4Dx5pE8et+fBDI6OQX2jOeBQBoWOohlXmtGG9BA54rkrC5mhfEkMigeoxWnb6mMDBoA6EXQAqKe8HNZf9pj+9UN1qqqp55oGkWry+Ck881k6jqQVCQ3Jqvf6puUlWBJ7ViX99MSGWKQsTxhaCrHb+BtON5G9xMMgcAetdZCgSMADAFUPD1qLTRrZBydgJ+p5/rV4MRQJscVBNITtOBSqcigqCaCQU5FLjJz6UAYooAKKKKAIFtwj7kRVOMZAxT0jIUVIBiigBFGBSkbhzRRQAgQDtSgYoooACM0daKKAGNFk05V2rilooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKjZCCQOhqSigCtcafFdxbHVc9+K5/WPBRQl7V8cZK11JGaQIAc96APLLrVZLGdopwInQ4we9X/AA/otz4ncuR5UIPDf3q6rxD4ItPEVykkilGjOcgferVtLKO0tViRAiKMACgaZnaf4TtLCJcRI+OpOTmryaZbMQ4gjBAwPlqyBgUUBcQRqoAAwBRsFLRQIAMUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//9k=" alt="È¢ÑËßàÂõæ" class="w-full h-40 object-cover"></span>
        </section>
        `
    }

    

    function htmlWenan(){

        return `
        <section style="text-align: center;box-sizing: border-box;" data-pm-slice="0 0 []">
            <p style="font-size: 16px;font-weight: 400;font-style: normal;margin: 0px;padding: 0px;box-sizing: border-box;">
                <strong style="font-weight: 600;color: rgb(52, 152, 219);box-sizing: border-box;"><em style="font-style: italic;color: rgb(51, 65, 85);box-sizing: border-box;"><span leaf="">‰ªäÊó•Ëá™ÂñúÊñáÊ°à</span></em></strong>
            </p>
            <p style="margin: 0px;padding: 0px;box-sizing: border-box;">
                <span style="box-sizing: border-box;"><span style="box-sizing: border-box;font-size: 14px;line-height: 1.7;"><span leaf="">Êó∂Èó¥ÊòØËâØËçØÊòéÂ§©‰ºöÊØî‰ªäÂ§©Â•Ω</span><span leaf=""><br></span><span leaf="">Âè™Ë¶Å‰∏çÂÅöÊÄùÊÉ≥ÁöÑÂõöÁ¨ºÊàë‰ª¨ÊúâÁöÑÊòØÊú™Êù•</span><span leaf=""><br></span><span leaf="">Êñ≠ËàçÁ¶ªÊòØÊàêÂπ¥‰∫∫ÁöÑÈ°∂Á∫ßËá™Âæã</span></span></span>
            </p>
        </section>
        `
    }


    

    function htmlCardBeiYu(){

        return `
        <section class="mp_profile_iframe_wrp" nodeleaf="">
            <mp-common-profile class="js_uneditable custom_select_card mp_profile_iframe" data-pluginname="mpprofile" data-nickname="ÂåóÂ±øÁöÑËìùËâ≤" data-alias="hot-books" data-from="2" data-headimg="http://mmbiz.qpic.cn/sz_mmbiz_png/SafC09p6yPmkKicjV7Eib4QicxEsLtDy0akTFJOkpZu5pfCpw4MtoZLdTY2l0eGlEwmVbNOyK7EaEndpqCrvlXwBQ/0?wx_fmt=png" data-signature="Ê¨¢ËøéÔΩûÂÖ≥Ê≥®ÂêéËèúÂçïÊ†èÈáåÂèñÂõæü´∞" data-id="MzI2OTQ4MDcxOA==" data-is_biz_ban="0" data-service_type="1" data-verify_status="0">
            </mp-common-profile>
        </section>
        `
    }

  

    // ‰∏ÄÂè•ËØù
    function htmlLineWord(){

        return `
            <p data-mq-box-wenan="1" data-mq-wenan-text="1" data-eusoft-scrollable-element="1" style="-webkit-tap-highlight-color: transparent;margin: 21px 0px 20px;padding: 0px 32px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;clear: both;min-height: 1em;font-family: &quot;PingFang SC&quot;, system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: normal;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;text-align: center;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 0px;line-height: 18px;">
                <span leaf="">‰∏çÂæòÂæä„ÄÅ‰∏çÈÄÄÁº©„ÄÅ‰∏çÁïèÊÉßÔºåÂ§ßÊ≠•ËøàÂêëÊú™Áü•ÁöÑËøúÊñπ„ÄÇ</span>
            </p>
        `
    }

    // ÂèåÊéíÂõæ
    function htmlShuangPaiImg(){

        return `
            <section data-mq-box-parent="1" style="-webkit-tap-highlight-color: transparent;margin: 21px 0px 20px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgba(0, 0, 0, 0.9);font-family: &quot;PingFang SC&quot;, system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.544px;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;display: flex;flex-flow: row;text-align: center;justify-content: center;">
                <section style="-webkit-tap-highlight-color: transparent;margin: 10px 10px 10px 20px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;flex: 1 1 0%;aspect-ratio: 1 / 1;border-radius: 2px;overflow: hidden;box-shadow: rgb(160, 160, 160) 1px 3px 5px 3px;" nodeleaf="">
                    <img data-src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/SafC09p6yPlU1x8plZfggicv1BvFJJUErykJJDp0tiaedoQfCAcqfvOSEQ7m8ZC4dNnwhT0FNNOMib2NYW3KrpuSg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=10" alt="ÂõæÁâá" class="rich_pages wxw-img" data-ratio="0.9851851851851852" data-w="1080" style="-webkit-tap-highlight-color: transparent;margin: 0px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;height: auto !important;object-fit: cover;aspect-ratio: 1 / 1;width: 305.5px !important;vertical-align: bottom;min-height: 100%;visibility: visible !important;" data-imgqrcoded="1" src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/SafC09p6yPlU1x8plZfggicv1BvFJJUErykJJDp0tiaedoQfCAcqfvOSEQ7m8ZC4dNnwhT0FNNOMib2NYW3KrpuSg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=10">
                </section>
                <section style="-webkit-tap-highlight-color: transparent;margin: 10px 20px 10px 10px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;flex: 1 1 0%;aspect-ratio: 1 / 1;border-radius: 3px;overflow: hidden;box-shadow: rgb(160, 160, 160) 1px 3px 5px 3px;" nodeleaf="">
                    <img data-src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/SafC09p6yPlU1x8plZfggicv1BvFJJUErrStUGuH3WI9nAVVcSaHsiastz8D5yaofHIZrLQVJErtV6icqLIicmzv7Q/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=11" alt="ÂõæÁâá" class="rich_pages wxw-img" data-ratio="1" data-w="300" style="-webkit-tap-highlight-color: transparent;margin: 0px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;height: auto !important;object-fit: cover;aspect-ratio: 1 / 1;width: 305.5px !important;vertical-align: bottom;min-height: 100%;visibility: visible !important;" data-imgqrcoded="1" src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/SafC09p6yPlU1x8plZfggicv1BvFJJUErrStUGuH3WI9nAVVcSaHsiastz8D5yaofHIZrLQVJErtV6icqLIicmzv7Q/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=11">
                </section>
            </section>
        `
    }


    // ËæÖÂä©ÔºöÂ∞Ü File[] ËΩ¨‰∏∫ Data URLÔºàbase64Ôºâ
    async function filesToDataURLs(files) {
        const tasks = files.map(file => new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = () => resolve(reader.result); // "data:image/...;base64,..."
            reader.onerror = reject;
            reader.readAsDataURL(file);
        }));
        return Promise.all(tasks);
    }

    // ÔºàÂèØÈÄâÔºâËæÖÂä©ÔºöÂ∞Ü File[] ËΩ¨‰∏∫ Object URLÔºàÊÄßËÉΩÂ•ΩÔºåÈúÄÊâãÂä®ÈáäÊîæÔºâ
    function filesToObjectURLs(files) {
      return files.map(file => URL.createObjectURL(file));
    }

    const btnPickImage = document.getElementById('pick-images-btn');
    const btnFile = document.getElementById('file-input-btn');
    const btnImageSrcArray = document.getElementById('file-src-array');
    const btnImageDiv = document.getElementById('image-list');

    // ÁÇπÂáªÊåâÈíÆÊâìÂºÄÊñá‰ª∂ÈÄâÊã©Ê°Ü
    btnPickImage.addEventListener('click', () => btnFile.click());

    // ÈÄâÊã©Êñá‰ª∂ÂêéÂ§ÑÁêÜ 
    btnFile.addEventListener('change', async (e) => {

        const files = Array.from(e.target.files).filter(f => f.type.startsWith('image/'));
        if (!files.length) return;

        await handleFiles(files);
        
    });


    function deleteImage(index){
        //  if(true) return
        //  // ÊöÇÊó∂‰∏çÊîØÊåÅÂà†Èô§
         // ‰ªéÊï∞ÁªÑ‰∏≠ÁßªÈô§

        editor.value = editor.value.replace(imageSrcList[index], '')

        // imageSrcList.splice(index, 1);
        // showImageList(imageSrcList)

        updatePreview();
        
    }

    // ÂèñÂæóÊúÄÊñ∞ÁöÑÂõæÁâáimageSrcList=['data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADh0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uMy4yLjIsIGh0dHA6Ly9tYXRwbG90bGliLm9yZy+WH4yJAAAGFklEQVR4nO3deXxU1RnH8e9VpKqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKq'] ÁîüÊàêÈ¢ÑËßà ÊîæÂÖ•Âà∞id=image-listÁöÑdiv‰∏≠,ÊØè‰∏™ÂõæÁâá50*50
    function showImageList(imageSrcList) {
        btnImageDiv.innerHTML = "";
        let html = ''
         // Âæ™ÁéØ
        for (let i = 0; i < imageSrcList.length; i++) {
            let img = `<img src="${imageSrcList[i]}" style="width:60px;height:60px;display:inline-block; margin-right:5px" onclick="deleteImage(${i})">`;
            // ÊãºÊé•
            html += img;
        }
        btnImageDiv.innerHTML = html
        btnImageSrcArray.value = '["' + imageSrcList.join('",\r\n"') + '"]'
          
        // ÂèòÊõ¥ËÉåÊôØÂõæÁâá
        imgLinks = [...imageSrcList];

    }
    

    const clearImagesBtn = document.getElementById('clear-images-btn');
    clearImagesBtn.addEventListener('click', () => {
        imageSrcList = [];
        showImageList(imageSrcList)
    });
    
    // ÊîØÊåÅÊãñÊîæÂäüËÉΩ
    const dropArea = document.getElementById('preview');

    
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
    });
    
    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }
    
    ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false);
    });
    
    ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false);
    });
    
    function highlight() {
        dropArea.classList.add('border-primary', 'bg-blue-50');
    }
    
    function unhighlight() {
        dropArea.classList.remove('border-primary', 'bg-blue-50');
    }
    
    dropArea.addEventListener('drop', handleDrop, false);
    
    // ÊãñÊãΩ
    function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        debugger
        handleDropFiles({ target: { files } });
    }

     // Â§ÑÁêÜÊãñÊãΩÈÄâÊã©ÁöÑÊñá‰ª∂
    async function handleDropFiles(e) {
        const files = e.target.files;
        
        if (!files.length) return;
        
        // ËøáÊª§ÈùûÂõæÁâáÊñá‰ª∂
        const imageFiles = Array.from(files).filter(file => file.type.startsWith('image/'));
        
        if (!imageFiles.length) {
            alert('ËØ∑ÈÄâÊã©ÂõæÁâáÊñá‰ª∂ÔºàJPG„ÄÅPNG„ÄÅGIFÁ≠âÔºâ');
            return;
        }
         handleFiles(imageFiles)
    }

    async function handleFiles(files) {
        debugger
        imageFiles = [...imageFiles, ...files];
         
        // ÊñπÂºè‰∏ÄÔºöData URLÔºàÈÄÇÂêàÁîüÊàêÂèØÊã∑Ë¥ùÁöÑÈùôÊÄÅ HTMLÔºâ
        const newSrcs = await filesToDataURLs(files);

        // ÊñπÂºè‰∫åÔºöObject URLÔºàÊõ¥Âø´Ôºâ
        //  const newSrcs = filesToObjectURLs(files);

        imageSrcList.push(...newSrcs);

        // btnImageDiv.innerText = imageSrcList.join('\n');

        // Âà∑Êñ∞‰Ω†ÁöÑÈ¢ÑËßàÔºàÂ¶ÇÊûú‰Ω†Â∑≤ÊúâÈ¢ÑËßàÂáΩÊï∞ÔºåÊõøÊç¢‰∏∫ÂØπÂ∫îË∞ÉÁî®Ôºâ
        if (typeof updateImagePreviewFromSrc === 'function') {
            updateImagePreviewFromSrc(srcList);
        }

        // Êõ¥Êñ∞ËÆ°Êï∞ÔºàÂ¶ÇÊûúÂ∑≤ÊúâËÆ°Êï∞ÂáΩÊï∞Ôºâ
        if (typeof updateFileCountFromSrc === 'function') {
            updateFileCountFromSrc();
        }

        // ÊòæÁ§∫Â∑≤ÈÄâÊã©ÂõæÁâá
        showImageList(imageSrcList);



        // Êõ¥Êñ∞È¢ÑËßà
        // updatePreview();

        // ÂÖÅËÆ∏ÂÜçÊ¨°ÈÄâÊã©Âêå‰∏ÄÊñá‰ª∂
        btnFile.value = '';
    }

    // ÂàùÂßãÂåñMarkdownËß£ÊûêÂô®
    marked.setOptions({
        breaks: true,
        highlight: function(code) {
            return hljs.highlightAuto(code).value;
        }
    });

    // ÂÆûÊó∂ÂèñÂÄº
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');

    function updatePreview() {
        const markdown = editor.value;
        const html = autoFormatText(markdown);
        preview.innerHTML = html;
    }

    // ÂÆûÊó∂È¢ÑËßà
    editor.addEventListener('input', updatePreview);

    debugger
    // È°µÈù¢Âä†ËΩΩÊó∂ÔºåËá™Âä®È¢ÑËßà
    editor.value = rawText;
    updatePreview();



    // ÈáçÊñ∞ËÆæÁΩÆid="editor"ÁöÑÊñáÊú¨Ê°ÜÂÜÖÂÆπÔºåÂè™‰øùÁïôÂéªÈáçÂêéÁöÑurlÔºåÊØèË°å‰∏Ä‰∏™
    function setUniqueUrlsToEditor() {
        debugger
        // ÂåπÈÖçÊâÄÊúâ‰ª• http Êàñ https ÂºÄÂ§¥ÁöÑ url
        const urlRegex = /https?:\/\/[^\s",]+/g;
        const textarea = document.getElementById('editor');
        const text = textarea.value;
        let urls = text.match(urlRegex) || [];

        // ÈÅçÂéÜÂ§ÑÁêÜÊØè‰∏™URL
        urls = urls.map(url => {
            // ÂÖàÁßªÈô§Êú´Â∞æÂèØËÉΩÂ≠òÂú®ÁöÑ );
            let processedUrl = url.replace(/\);$/, '');
            
            // ÂÜçÁßªÈô§Êú´Â∞æÁöÑ /300 Êàñ /640
            processedUrl = processedUrl.replace(/\/(300|640)*$/, '/');
            console.log('url:', processedUrl)
            
            return processedUrl;
        });
        // Ëé∑ÂèñÂΩìÂâçÈÄâ‰∏≠ÁöÑurlMode
        const urlMode = document.querySelector('input[name="urlMode"]:checked').value;

        // Ê†πÊçÆurlModeËøáÊª§url
        if (urlMode !== 'fullurl') {
            // Âè™‰øùÁïôÂåÖÂê´ÈÄâ‰∏≠valueÁöÑurl
            urls = urls.filter(url => url.includes(urlMode));
        }


        // ÂéªÈáç
        const uniqueUrls = Array.from(new Set(urls));


        // Ëøõ‰∏ÄÊ≠•ÂéªÈáçÔºöÂ¶ÇÊûúÂ§ö‰∏™urlÂõæÁâáÂêçÁõ∏ÂêåÔºåÂè™‰øùÁïôÊúÄÁü≠ÁöÑÈÇ£‰∏™
        // ÊèêÂèñÂõæÁâáÂêçÁöÑÂáΩÊï∞
        function getImgName(url) {
            // ‰ªÖÂ§ÑÁêÜ mmbiz.qpic.cn ÁöÑÂõæÁâáÈìæÊé•ÔºåÂÖ∂‰ªñÁõ¥Êé•ËøîÂõûurl
            if (!url.includes('mmbiz.qpic.cn')) {
                return url;
            }
            // Áî® / ÂàÜÂâ≤ÔºåÂèñÂàÜÂâ≤ÂêéÊúÄÈïøÁöÑÈÉ®ÂàÜ‰Ωú‰∏∫ÂõæÁâáÂêç
            let parts = url.split('/');
            let maxPart = parts.reduce((a, b) => a.length >= b.length ? a : b, '');
            return maxPart;
        }
        // Áî®MapÂ≠òÂÇ®ÂõæÁâáÂêçÂà∞url
        const imgNameToUrl = new Map();
        debugger
        uniqueUrls.forEach(url => {
            const imgName = getImgName(url);
            if (!imgNameToUrl.has(imgName)) {
                imgNameToUrl.set(imgName, url);
            } else {
                // Â¶ÇÊûúÂ∑≤Â≠òÂú®Ôºå‰øùÁïôÊõ¥Áü≠ÁöÑurl
                if (url.length < imgNameToUrl.get(imgName).length) {
                    imgNameToUrl.set(imgName, url);
                }
            }
        });
        // ÊúÄÁªàÂè™‰øùÁïôMap‰∏≠ÁöÑurl
        const finalUrls = Array.from(imgNameToUrl.values());
        // Êç¢Ë°åÊãºÊé•
        const result = finalUrls.join('\n');
        textarea.value = result;
        updatePreview();
    }
    // ‰Ω†ÂèØ‰ª•Âú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôË∞ÉÁî® setUniqueUrlsToEditor()
    // setUniqueUrlsToEditor()


    // Â§çÂà∂ÂÖ¨‰ºóÂè∑ÂÖºÂÆπÂÜÖÂÆπÁöÑhtml Áî®‰∫é‰ª£Á†ÅpushÂà∞ÂÖ¨‰ºóÂè∑
    function copyWechatHTML() {
        const markdown = editor.value;
        const htmlContent = autoFormatText(markdown);

        // ÂàõÂª∫‰∏¥Êó∂textareaÂÖÉÁ¥†
        const textarea = document.createElement('textarea');
        textarea.value = htmlContent;
        document.body.appendChild(textarea);

        try {
            // ÈÄâÊã©ÊñáÊú¨
            textarea.select();
            textarea.setSelectionRange(0, textarea.value.length);

            // ÊâßË°åÂ§çÂà∂ÂëΩ‰ª§
            const successful = document.execCommand('copy');
            
            if (successful) {
                showToast('‚ú® Â§çÂà∂ÊàêÂäüÔºÅ');
            } else {
                showToast('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑‰ΩøÁî®Ctrl+CÊâãÂä®Â§çÂà∂');
            }
        } catch (err) {
            console.error('Â§çÂà∂Â§±Ë¥•:', err);
            showToast('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑‰ΩøÁî®Ctrl+CÊâãÂä®Â§çÂà∂');
        } finally {
            // ÁßªÈô§‰∏¥Êó∂ÂÖÉÁ¥†
            document.body.removeChild(textarea);
        }
    }

    // ÊòæÁ§∫toast Â§çÂà∂ÊèêÁ§∫‰ø°ÊÅØ
    function showToast(message, duration = 2000) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, duration);
    }
    </script>
    
    <!-- ‰ª£Á†ÅÈ´ò‰∫Æ -->
    <script src="../../js/highlight.min.js"></script>
</body>
</html>