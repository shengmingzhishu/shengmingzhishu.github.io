<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å¾®ä¿¡Markdownè½¬æ¢å™¨">
    <title>MDè½¬å…¬ä¼—å·HTMLå·¥å…·</title>
    <!-- Markdownè§£æå’Œæ ·å¼ -->
    <script src="../../js/marked.min.js"></script>
    <link rel="stylesheet" href="../../css/github.min.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            box-sizing: border-box;
        }

        .container {
            display: flex;
            gap: 20px;
            flex: 1;
        }

        .editor-box {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        textarea {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: none;
            font-family: 'Courier New', monospace;
        }

        #preview {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow-y: auto;
            background: #fff;
        }

        .copy-btn {
            position: fixed;
            bottom: 20px;
            right: 135px;
            padding: 8px 15px;
            background: #07c160;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease, opacity 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0.3;
        }

        .copy-btn:hover {
            background: #06ad56;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            opacity: 1;
        }

        .copy-btn::before {
            content: "ğŸ“‹";
            font-size: 16px;
        }

        /* å¾®ä¿¡å…¬ä¼—å·æ ·å¼ä¼˜åŒ– */
        .wx-content {
            line-height: 1.6;
            font-size: 16px;
            color: #333;
        }
        
        .wx-content img {
            max-width: 100%!important;
            height: auto!important;
        }

        /* è¿”å›ä¸»é¡µæŒ‰é’®æ ·å¼ */
        .back-home {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 8px 15px;
            background: #ffd93d;
            color: #333;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease, opacity 0.3s ease;
            z-index: 1000;
            opacity: 0.7;
        }

        .back-home:hover {
            background: #ffc107;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            opacity: 0.9;
        }

        .back-home::before {
            content: "ğŸ ";
            font-size: 16px;
        }

        /* æµ®åŠ¨æç¤ºæ ·å¼ */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #FFD1DC, #FFB5E8);
            color: #444;
            padding: 12px 24px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toast.show { opacity: 1; }
        .toast::before { content: "ğŸˆ"; }

        /* æ®µè½å’Œå¯¹é½é€‰é¡¹æ ·å¼ */
        .options-bar {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 10px;
            font-size: 15px;
            user-select: none;
        }
        .options-bar label {
            margin-right: 8px;
            cursor: pointer;
        }
        .options-bar input[type="radio"] {
            margin-right: 3px;
        }
    </style>
</head>
<body>
    <a href="../../index.html" class="back-home"> è¿”å›ä¸»é¡µ</a>
    <div class="container">
        <div class="editor-box">
            <div class="options-bar">
                <div style="text-align: left;">    
                    <span>æ®µè½ï¼š</span>
                    <label><input type="radio" name="paragraphMode" value="on" id="para-on" checked>æ˜¯</label>
                    <label><input type="radio" name="paragraphMode" value="off" id="para-off">å¦</label>
                    <span style="display: inline-block; width: 20px;margin: 10px 0px;"></span>
                    <span>å¯¹é½ï¼š</span>
                    <label><input type="radio" name="alignMode" value="left" id="align-left" checked>å±…å·¦</label>
                    <label><input type="radio" name="alignMode" value="center" id="align-center">å±…ä¸­</label>
                    <span style="display: inline-block; width: 20px;margin: 10px 0px;"></span>
                </div>
                <div text-align: right;"><input type="button" name="clearEnter" value="åˆ é™¤ç©ºè¡Œ" id="clear-enter"/></div>
                <div text-align: right;"><input type="button" name="clearSort" value="å†…å®¹ä¹±åº" id="clear-sort"/></div>
                <div text-align: right;"><input type="button" name="clearShort" value="åˆ é™¤çŸ­è¯" id="clear-short"/></div>
                <div text-align: right;"><input type="button" name="periodLine" value="å¥å·æ¢è¡Œ" id="period-line"/></div>
                <div class="mt-4">
                    <button id="pick-images-btn"
                            class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow">
                        é€‰æ‹©å›¾ç‰‡
                    </button>
                    <button id="clear-images-btn"
                            class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow">
                        æ¸…ç©ºå›¾ç‰‡
                    </button>
                    <input id="file-input-btn" type="file" accept="image/*" multiple style="display: none;" />
                    <input id="file-src-array" type="textarea"/>
                    <input id="valueDisplay" type="hidden" />
                </div> 
            </div>
            <div class="options-bar" style="width: 100%;"> 
                 <div id="image-list" style="float: left; width: 100%; min-height:60px; border: #444 1px solid;"></div>

            </div>
            <textarea id="editor" placeholder="è¾“å…¥Markdownå†…å®¹..."></textarea>
        </div>
        <div class="editor-box">
            <div id="preview" class="wx-content"></div>
            <button class="copy-btn" onclick="copyWechatHTML()">å¤åˆ¶å…¬ä¼—å·å†…å®¹</button>
        </div>
    </div>

    <!-- æ·»åŠ æç¤ºå…ƒç´  -->
    <div id="toast" class="toast">å¤åˆ¶æˆåŠŸï¼</div>

    <script>
    // æ®µè½æ¨¡å¼å’Œå¯¹é½æ–¹å¼çš„å…¨å±€å˜é‡
    let paragraphMode = true; // true: æ®µè½åˆ†å‰²ï¼Œfalse: æ¯è¡Œä¸ºä¸€ä¸ªå—
    let alignMode = 'left';   // 'left' or 'center'

    // åœ–ç‰‡åˆ—è¡¨
    let imageFiles = [];

    // å…¨å±€ src åˆ—è¡¨ï¼ˆå­˜å‚¨å¯ç›´æ¥ç”¨äº img.src çš„å­—ç¬¦ä¸²ï¼‰
    let imageSrcList = [];

    // ç›‘å¬æ®µè½æ¨¡å¼åˆ‡æ¢
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('para-on').addEventListener('change', function() {
            if (this.checked) {
                paragraphMode = true;
                updatePreview();
            }
        });
        document.getElementById('para-off').addEventListener('change', function() {
            if (this.checked) {
                paragraphMode = false;
                updatePreview();
            }
        });
        document.getElementById('align-left').addEventListener('change', function() {
            if (this.checked) {
                alignMode = 'left';
                updatePreview();
            }
        });
        document.getElementById('align-center').addEventListener('change', function() {
            if (this.checked) {
                alignMode = 'center';
                updatePreview();
            }
        });
        document.getElementById('clear-enter').addEventListener('click', function() {
            clearEnter()
        });
        document.getElementById('clear-sort').addEventListener('click', function() {
            clearSort()
        });
        document.getElementById('clear-short').addEventListener('click', function() {
            clearShort()
        });
        document.getElementById('period-line').addEventListener('click', function() {
            periodLine()
        });
        
    });

    
    function clearEnter(){
            // åˆ é™¤å¤šä½™çš„ç©ºè¡Œï¼ˆè¿ç»­ä¸¤ä¸ªåŠä»¥ä¸Šçš„ç©ºè¡Œå˜æˆä¸€ä¸ªç©ºè¡Œï¼‰ï¼Œå¹¶å»é™¤é¦–å°¾ç©ºç™½
            let textArea = document.getElementById('editor');
            let text = textArea.value;
            // å…¼å®¹Windows(\r\n)ã€Mac(\r)å’ŒUnix(\n)æ¢è¡Œç¬¦
            // 1. æ›¿æ¢æ‰€æœ‰\r\nå’Œ\rä¸º\n
            // text = text.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            // 1. æ›¿æ¢æ‰€æœ‰\r\nå’Œ\rä¸º\n
            text = text.replace(/\r\n/g, '').replace(/\r/g, '').replace(/\n\n/g, '\n');
            // 2. è¿ç»­ä¸¤ä¸ªåŠä»¥ä¸Šçš„ç©ºè¡Œå˜æˆä¸€ä¸ªç©ºè¡Œ
            //text = text.replace(/\n{1,}/g, '\n\n');
            // 3. å»é™¤é¦–å°¾ç©ºç™½
            text = text.trim();
            textArea.value = text;
            updatePreview();
    } 

    function periodLine(){
            // åˆ é™¤å¤šä½™çš„ç©ºè¡Œï¼ˆè¿ç»­ä¸¤ä¸ªåŠä»¥ä¸Šçš„ç©ºè¡Œå˜æˆä¸€ä¸ªç©ºè¡Œï¼‰ï¼Œå¹¶å»é™¤é¦–å°¾ç©ºç™½
            let textArea = document.getElementById('editor');
            let text = textArea.value;
            // å…¼å®¹Windows(\r\n)ã€Mac(\r)å’ŒUnix(\n)æ¢è¡Œç¬¦
            // 1. æ›¿æ¢æ‰€æœ‰\r\nå’Œ\rä¸º\n
            // text = text.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
            // 1. æ›¿æ¢æ‰€æœ‰\r\nå’Œ\rä¸º\n
            text = text.replace(/[ã€‚ï¼]/g, 'ã€‚\n');
            // 2. è¿ç»­ä¸¤ä¸ªåŠä»¥ä¸Šçš„ç©ºè¡Œå˜æˆä¸€ä¸ªç©ºè¡Œ
            //text = text.replace(/\n{1,}/g, '\n\n');
            // 3. å»é™¤é¦–å°¾ç©ºç™½
            text = text.trim();
            textArea.value = text;
            updatePreview();
    } 
    
    function clearSort(){
            let textArea = document.getElementById('editor');
            let text = textArea.value;
            // éšæœºä¹±åº
            let lines = text.split('\n');
            let filteredLines = lines.sort(() => Math.random() - 0.5);
            textArea.value =  filteredLines.join('\n');
            updatePreview();
    } 

    
    function clearShort(){
            let textArea = document.getElementById('editor');
            let text = textArea.value;
            // æŠŠtextæ‹†åˆ†æˆå¤šè¡Œçš„æ•°æ®ï¼Œ ä»…ä¿ç•™æ¯è¡Œå­—ç¬¦ä¸²å»é™¤å‰åç©ºæ ¼åé•¿åº¦å¤§äº3çš„  
            let lines = text.split('\n');
            let filteredLines = lines.filter(line => {
                return line.trim() === '' || line.trim().length > 3;
            });
            textArea.value = filteredLines.join('\n');
            updatePreview();
    } 

    let imgLinks = [
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431221577",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431221748",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431221929",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222005",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222116",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431221856",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222370",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222487",
        "https://tencentcdna.production.link3.cc/user_create_images/link3_1741542924688/multiple_images/1752431222229"
    ]

    function autoFormatText(rawText) {
        // æ®µè½åˆ†å‰²
        let paragraphs = [];
        if (paragraphMode) {
            // æ®µè½æ¨¡å¼ï¼šä»¥ä¸¤ä¸ªåŠä»¥ä¸Šæ¢è¡Œåˆ†å‰²ä¸ºæ®µè½
            paragraphs = rawText.split(/\n{2,}/g);
        } else {
            // éæ®µè½æ¨¡å¼ï¼šæ¯ä¸€è¡Œä¸ºä¸€ä¸ªæ®µ
            paragraphs = rawText.split('\n').filter(line => line.trim() !== '');
        }

        let html = [];
        let index = 0;

        // éšæœºæ ‡ç­¾æ•°æ®
        const times = [
            "3åˆ†é’Ÿå‰", "5åˆ†é’Ÿå‰", "10åˆ†é’Ÿå‰", "åˆ†äº«ä¼šæš´å¯Œ", "ç‚¹èµä¼šæš´å¯Œ"
        ];
        const names = [
            "äº‘èˆ’", "æ˜Ÿçœ ", "æœˆæ±€", "é£ç¦¾", "æ¡‘æ¦†",
            "æ¸…æ™", "å—ä¹”", "çŸ¥å¤", "ç šç§‹", "æ±€å…°",
            "æ¡ƒå¤­", "å°æ»¡", "æŸšæŸš", "æ£ æ¢¨", "é’é›€",
            "Daisy", "Luna", "Willow", "Elena", "Clover",
            "äºˆå®‰", "çŸ¥é¥", "å¿µåˆ", "ç®€å®", "æœªæ™",
            "è“è“", "æ£ æ£ ", "ç©—ç©—", "çšçš", "æ²…æ²…",
            "å°åˆ", "é›¨æŸ”", "å®‰å©‰", "é’æŸ ", "è¥¿ç“œ", "å¤å¤", "Spring"
        ];
        const symbols = [
            'ğ’®ğ“Šğ“ƒ â˜€ï¸ ğ’®ğ’½ğ’¾ğ“ƒğ‘’','ğŸ¸ ğ’ğ’½ğ’¾ğ“ğ“ ğ’¯ğ’¾ğ“‚ğ‘’','ğŸŒ¼ ğ’©ğ’¶ğ“‰ğ“Šğ“‡ğ‘’ ğ’Ÿğ‘’ğ“ğ’¾ğ‘”ğ’½ğ“‰','ğ¿ğ‘œğ“‹ğ‘’ğŸ’• ğ’¥ğ‘œğ“Šğ“‡ğ“ƒğ‘’ğ“','ğŸŸ ğ’¯ğ’¶ğ“ˆğ“‰ğ“ ğ’¯ğ’¾ğ“…','ğµğ“ğ‘’ ğŸ¯ ğ’®ğ‘œğ“Šğ“','ğŸŒŠ ğ’®ğ‘’ğ’¶ ğ’ğ’¶ğ“ğ“‚','ğŸˆ ğ’ğ‘’ğ“ğ‘’ğ’·ğ“‡ğ’¶ğ“‰ğ‘’','ğŸµ ğ’¯ğ‘’ğ’¶ ğ’ğ’¶ğ“ğ“‚','ğ’®ğ“‰ğ’¶ğ“‡ ğŸŒŸ ğ’Ÿğ“‡ğ‘’ğ’¶ğ“‚',
            'ğŸŒ· ğ’«ğ’¶ğ“ˆğ“ˆğ’¾ğ‘œğ“ƒ ğ’®ğ“…ğ’¶ğ“‡ğ“€','ğŸ ğ’©ğ“Šğ“‰ğ“‡ğ’¾ğ“‰ğ’¾ğ‘œğ“ƒ ğ’®ğ‘œğ“Šğ“','ğŸŒ¿ ğ’©ğ’¶ğ“‰ğ“Šğ“‡ğ‘’ ğ’¯ğ‘œğ“Šğ’¸ğ’½','ğµğ“ğ‘œğ‘œğ“‚ ğŸŒ¸ ğ’¯ğ’¾ğ“‚ğ‘’','ğŸ° ğ’Ÿğ‘’ğ“ˆğ“ˆğ‘’ğ“‡ğ“‰ ğ’Ÿğ“‡ğ‘’ğ’¶ğ“‚','ğŸŒ´ ğ’¯ğ“‡ğ’¶ğ“‹ğ‘’ğ“ ğ’Ÿğ‘Ÿğ‘’ğ’¶ğ“‚','ğŸ• ğ’«ğ’¾ğ“ğ“ğ’¶ ğ’¯ğ’¾ğ“‚ğ‘’','ğŸŒ³ ğ’²ğ‘œğ‘œğ’¹ğ“ˆ ğ’¯ğ’¾ğ“‚ğ‘’','ğŸ‘ ğ’®ğ“Œğ‘’ğ‘’ğ“‰ ğ’®ğ‘œğ“Šğ“','ğ¹ğ‘™ğ‘¦ ğŸŒ¬ ğ’Ÿğ‘Ÿğ‘’ğ’¶ğ“‚',
            // ... çœç•¥éƒ¨åˆ†ï¼ŒåŸæœ‰å†…å®¹ç»§ç»­ ...
            'ğ“ˆğ“ğ‘’ğ‘’ğ“… ğŸ’¤ ğ’®ğ‘œğ“Šğ“'
        ];

        function getRandomItem(arr) {
            const randomIndex = Math.floor(Math.random() * arr.length);
            return arr[randomIndex];
        }

        function processInlineMarkdown(text) {
            text = text.replace(/(\*\*|__)(.*?)\1/g, (match, p1, p2) => {
                return ` <strong>${p2}</strong> `;
            });
            text = text.replace(/(\*|_)(.*?)\1/g, '<em>$2</em>');
            text = text.replace(/~~(.*?)~~/g, '<del>$1</del>');
            text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
            text = text.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
            text = text.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '<img src="$2" alt="$1">');
            text = text.replace(/\s+/g, ' ').trim();
            return text;
        }

        // éå†æ¯ä¸ªæ®µè½æˆ–è¡Œ
        paragraphs.forEach((para) => {
            // æ®µè½å†…å®¹æŒ‰æ¢è¡Œåˆ†å¥
            let lines = para.split('\n').filter(line => line.trim() !== '');
            if (lines.length === 0) return;

            index++;
            const symbol = getRandomItem(symbols);
            const name = getRandomItem(names);
            const time = getRandomItem(times);
            const imgurl = getRandomItem(imgLinks);

            // å¥å­åˆ†å‰²ï¼ˆå¯æ ¹æ®éœ€è¦æ›´ç»†è‡´åˆ†å‰²ï¼‰
            let sentenceHtmlArr = [];
            lines.forEach(line => {
                // ä»¥å¥å·ã€é—®å·ã€æ„Ÿå¹å·ã€åˆ†å·ã€æ¢è¡Œç­‰åˆ†å¥
                let sentences = line.split(/(?<=[ã€‚ï¼ï¼Ÿï¼›;.!?])\s*/g).filter(s => s.trim() !== '');
                sentences.forEach(sentence => {
                    const trimmed = processInlineMarkdown(sentence.trim());
                    if (trimmed !== '') {
                        sentenceHtmlArr.push(`<p style="text-align: ${alignMode};text-indent: 2em;visibility: visible; margin:5px;"><span leaf=""
                                                                                                          mpa-font-style="mcnioc8317ki"
                                                                                                          style="font-size: 13px; visibility: visible;">${trimmed}</span>`);
                    }
                });
            });

            const block = `
<section label="xmyeditor" style="margin: 0em;outline: 0px;visibility: visible;" mpa-from-tpl="t">
    <section
            style="background-color: rgb(255, 255, 255); letter-spacing: 1px; box-sizing: border-box; max-width: 100% !important; visibility: visible;"
            mpa-from-tpl="t">
        <section style="box-sizing: border-box; max-width: 100% !important; visibility: visible;" mpa-from-tpl="t">
            <section
                    style="line-height: 25.6px; white-space: normal; overflow-wrap: break-word !important; visibility: visible;"
                    mpa-from-tpl="t">
                <section
                        style="margin-right: auto; margin-left: auto; clear: both; width: 556px; overflow: hidden; overflow-wrap: break-word !important; visibility: visible;"
                        mpa-from-tpl="t">
                    <section data-id="86043"
                             style="border-width: 0px; border-style: none; overflow-wrap: break-word !important; visibility: visible;"
                             mpa-from-tpl="t">
                        <section
                                style="margin-top: 20px; margin-bottom: 20px; padding: 15px 20px; border-radius: 20px; word-break: break-all; border-width: 3px; border-style: groove; border-color: rgb(237, 237, 237); font-stretch: normal; overflow-wrap: break-word !important; visibility: visible;"
                                mpa-from-tpl="t">
                            <section style="color: rgb(85, 85, 86); font-size: 15px; visibility: visible;"
                                     mpa-from-tpl="t">
                                <section mpa-from-tpl="t" style="visibility: visible;">
                                    <section mpa-from-tpl="t" style="visibility: visible;">
                                        <section mpa-from-tpl="t" style="visibility: visible;">
                                            <section style="display: inline-block; visibility: visible;" nodeleaf=""
                                                     mpa-from-tpl="t"><img
                                                    data-src="${imgurl}"
                                                    alt="å›¾ç‰‡" class="rich_pages wxw-img" data-ratio="1.413888888888889"
                                                    data-type="jpeg" data-w="1080"
                                                    style="height: auto !important; visibility: visible !important; width: 510.093px !important;"
                                                    data-original-style="height: auto !important;visibility: visible !important;width: 510.667px !important;"
                                                    data-index="1"
                                                    src="${imgurl}"
                                                    _width="510.667px" data-report-img-idx="0" data-fail="0"></section>
                                        </section>
                                    </section>
                                    <section mpa-from-tpl="t" style="visibility: visible;">
                                        <section style="display: inline-block; visibility: visible;" mpa-from-tpl="t">
                                            <span leaf="" style="visibility: visible;"><br style="visibility: visible;"></span>
                                        </section>
                                    </section>
                                </section>
                            </section>
                            <section
                                    style="text-align: center; color: rgb(85, 85, 86); line-height: 2em; visibility: visible;"
                                    mpa-from-tpl="t" data-mpa-action-id="mcnioc9id4z" data-pm-slice="0 0 []">
                                <section mpa-from-tpl="t" style="visibility: visible;"><span
                                        style="font-size: 15px; visibility: visible;"></span></section>
                                <p dir="ltr"
                                   style="color: rgb(85, 85, 86); font-size: 15px; text-align: left; line-height: 1.92; visibility: visible;">
                                    <span leaf="" style="visibility: visible;">â—&nbsp;</span><span leaf=""
                                                                                                   style="visibility: visible;"><span
                                        textstyle="" style="font-weight: bold; visibility: visible;">Part ${index}</span></span>
                                </p>
                                
                                ${sentenceHtmlArr.join('\n')}
                            <section
                                    style="color: rgb(85, 85, 86);text-align: justify;line-height: 2em;margin-left: 32px;margin-right: 32px;"
                                    mpa-from-tpl="t"><span style="font-size: 15px;"><span leaf=""
                                                                                          style=""><br></span></span>
                            </section>
                            <section style="color: rgb(85, 85, 86);text-align: center;line-height: 2em;"
                                     mpa-from-tpl="t"><span style="font-size: 15px;font-weight: 700;"></span></section>
                        </section>
                    </section>
                </section>
            </section>
        </section>
    </section>    
            `;
            html.push(block);
        });


 
        let beginHtml = `
            <section style="text-align: left;-webkit-tap-highlight-color: transparent;margin: 0px 0px 24px;padding: 0px;outline: 0px;max-width: 100%;font-family: &quot;PingFang SC&quot;, system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.544px;orphans: 2;text-indent: 2em;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;text-align: left;font-size: 13px;color: grey;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;line-height: 1.75em;" data-pm-slice="0 0 []">
                <span leaf="" style="-webkit-tap-highlight-color: transparent;margin: 0px;padding: 0px;outline: 0px;max-width: 100%;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;"></span>
            </section>
        `
 
        let endHtml = `
            <section style="text-align: center;">
            <span style="color: rgb(178, 178, 178);font-family: &quot;PingFang SC&quot;, system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 13px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.544px;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;float: none;display: inline !important;" data-pm-slice="0 0 []"><span leaf=""><br></span></span>
            </section>
            <section style="max-width: 100%;box-sizing: border-box;margin-bottom: 0px;overflow-wrap: break-word !important;" mpa-from-tpl="t">
            <section style="padding-right: 10px;padding-left: 10px;max-width: 100%;box-sizing: border-box;line-height: 1.6;overflow-wrap: break-word !important;" mpa-from-tpl="t">
                <section style="max-width: 100%;box-sizing: border-box;overflow-wrap: break-word !important;" mpa-from-tpl="t">
                <section style="" mpa-from-tpl="t">
                    <section style="letter-spacing: 1px;background-color: rgb(255, 255, 255);color: rgb(62, 62, 62);font-size: 16px;white-space: normal;text-align: center;" mpa-from-tpl="t">
                    <span style="color: rgb(136, 136, 136);font-size: 12px;letter-spacing: 1px;"><span leaf="">åŒ—å±¿çš„è“è‰²æ•´ç¼–ï¼Œä»…ä¾›äº¤æµ</span></span>
                    </section>
                    <section style="background-color: rgb(255, 255, 255);text-align: center;" mpa-from-tpl="t">
                    <font color="#888888" face="system-ui, -apple-system, BlinkMacSystemFont, Helvetica Neue, PingFang SC, Hiragino Sans GB, Microsoft YaHei UI, Microsoft YaHei, Arial, sans-serif">
                        <span style="font-size: 12px;letter-spacing: 1px;"><span leaf="">Shanhe Jingming</span></span>
                    </font>
                    </section>
                    <section style="letter-spacing: 1px;background-color: rgb(255, 255, 255);color: rgb(62, 62, 62);font-size: 16px;white-space: normal;text-align: center;" mpa-from-tpl="t">
                    <span style="color: rgb(136, 136, 136);font-size: 12px;caret-color: var(--weui-BRAND);"><span leaf="">è½¬è½½è¯·è”ç³»ã€‚</span></span>
                    </section>
                </section>
                </section>
            </section>
            </section>
        `
        debugger
        document.getElementById('valueDisplay').value =  imgLinks.join('\r\n') ;

        return `
            <article class="wechat-article">
                ${beginHtml}
                ${html.join('')}
                ${endHtml}
            </article>
            <style>
                .wechat-article {
                    max-width: 640px;
                    margin: 20px auto;
                    padding: 20px;
                    font-family: -apple-system, BlinkMacSystemFont, 
                                "Helvetica Neue", "PingFang SC", 
                                "Microsoft YaHei", sans-serif;
                    color: #333;
                    line-height: 1.8;
                    text-align: justify;
                }

                .part-container {
                    display: flex;
                    align-items: center;
                    margin: 2em 0;
                    position: relative;
                    justify-content: center;
                }

                .part-title {
                    color: #3498db;
                    font-size: 24px;
                    font-weight: bold;
                    margin: 0;
                    position: relative;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .part-decorator {
                    width: 3px;
                    height: 24px;
                    background: #3498db;
                    margin-right: 15px;
                }

                .part-label {
                    font-size: 11px;
                    color: #64748b;
                }

                [class^="heading-"] {
                    margin: 1.5em 0 1em;
                    font-weight: 500;
                    border-left: 4px solid;
                    padding-left: 12px;
                }

                .heading-1 { font-size: 20px; color: #2c3e50; border-color: #166a9f; }
                .heading-2 { font-size: 18px; color: #34495e; border-color: #44b0ce; }
                .heading-3 { font-size: 16px; color: #4a5568; border-color: #1abc9c; }
                .heading-4 { font-size: 15px; color: #555; border-color: #f1c40f; }
                .heading-5 { font-size: 14px; color: #666; border-color: #e67e22; }
                .heading-6 { font-size: 13px; color: #777; border-color: #e74c3c; }

                .article-paragraph {
                    margin: 0.8em 0;
                    text-indent: 2em;
                }

                .custom-list {
                    margin: 1em 2em;
                    padding-left: 1.2em;
                    color: #475569;
                    counter-reset: item;
                }

                .custom-list li {
                    margin: 0.6em 0;
                    padding-left: 0.8em;
                }

                ol.custom-list {
                    list-style-type: decimal;
                }

                ul.custom-list {
                    list-style-type: disc;
                }

                .custom-list li::marker {
                    color: #3498db;
                    font-weight: bold;
                }

                strong {
                    font-weight: 600;
                    color: #3498db;
                }

                em {
                    font-style: italic;
                    color: #334155;
                }

                del {
                    text-decoration: line-through;
                    color: #94a3b8;
                }

                code {
                    background: #f1f5f9;
                    padding: 2px 4px;
                    border-radius: 3px;
                    font-family: Consolas, Monaco, monospace;
                    font-size: 0.9em;
                    color: #dc2626;
                }

                a {
                    color: #3b82f6;
                    text-decoration: none;
                    border-bottom: 1px solid #3b82f6;
                    transition: all 0.2s;
                }

                a:hover {
                    color: #1d4ed8;
                    border-bottom-color: #1d4ed8;
                }

                img {
                    max-width: 100%;
                    height: auto;
                    margin: 1em auto;
                    display: block;
                    border-radius: 4px;
                }

                @media (max-width: 480px) {
                    .wechat-article {
                        padding: 15px;
                        font-size: 16px;
                    }
                    .heading-1 { font-size: 19px; }
                    .heading-2 { font-size: 17px; }
                    img {
                        width: 100%;
                    }
                }
            </style>
        `;
    }

    const rawText = `\n# åŒ—å±¿çš„è“è‰²1\n\n## åŒ—å±¿çš„è“è‰²2\n### åŒ—å±¿çš„è“è‰²3\n#### åŒ—å±¿çš„è“è‰²4\n##### åŒ—å±¿çš„è“è‰²5\n###### åŒ—å±¿çš„è“è‰²6\n####### åŒ—å±¿çš„è“è‰²7 ######## åŒ—å±¿çš„è“è‰²8+AI \n\n1æœˆä»½çš„æ—¶å€™ï¼Œå¸‚åœºæ›¾ç‚’ä½œè¿‡ä¸€æ®µæ—¶é—´çš„æƒ…æ„Ÿäº¤äº’ã€‚å½¼æ—¶ï¼Œ**è‹è±ªå¼˜ä¸šè¿ç»­æ¶¨åœ**ã€‚##æ˜¨å¤©ï¼Œ\n-ç¬¬ä¸€éƒ¨åˆ†ï¼Œ\n*ç¬¬äºŒéƒ¨åˆ†ï¼Œ\n+ç¬¬ä¸‰éƒ¨åˆ†ï¼Œ\nåœ¨DeepSeekçš„åŠ æŒä¹‹ä¸‹ï¼Œè¿™ä¸ªé¢˜æå†åº¦å‘é…µï¼Œæµ™æ±Ÿä¼—æˆç­‰è‚¡ç¥¨æ¶¨åœï¼Œä»Šå¤©ï¼Œç¡…å®ç§‘æŠ€ã€æµ™æ±Ÿä¼—æˆã€è¶£ç¡ç§‘æŠ€ã€\n2.AAA\n1.BBB\n1.CCC\nçˆ±æ…•è‚¡ä»½å†åº¦é›†ä½“æ¶¨åœã€‚\nä¸€ä»½å¸‚åœºç‚¹è¯„è®¤ä¸ºï¼ŒAIå¤§æ¨¡å‹+æŸ”æ€§ææ–™+ç”Ÿç†ä¼ æ„ŸæŠ€æœ¯é©±åŠ¨ä¸‹ï¼Œæƒ…è¶£æœºå™¨äººæ­£ä»"ç”Ÿç†å·¥å…·"å‘"æƒ…æ„Ÿä¼´ä¾£"è·ƒè¿ï¼Œæ‰“å¼€æ–°å¸‚åœºç©ºé—´ã€‚æ®æµ‹ç®—ï¼Œå…¨çƒæƒ…è¶£æœºå™¨äººå¸‚åœºè§„æ¨¡2031å¹´å°†çªç ´3äº¿ç¾å…ƒï¼ŒæŠ€æœ¯è¿­ä»£ä¸ä¼¦ç†ç ´å†°ä¸‹ï¼Œå…·å¤‡ææ–™ã€AIäº¤äº’ã€å¥åº·ç›‘æµ‹èƒ½åŠ›çš„å‚å•†å°†ç‡å…ˆå—ç›Šã€‚\n\n#é›†ä½“æ¶¨åœ\n\nä»Šå¤©ï¼Œæœ‰ä¸€ä¸ªèµ›é“è·‘å‡ºæ¥äº†ï¼Œé‚£å°±æ˜¯2025å¹´äººå½¢ä¼´ä¾£æœºå™¨äººèµ›é“ã€‚æˆªè‡³ç›®å‰ï¼Œè¯¥æ¡èµ›é“çš„è‚¡ç¥¨å…¨çº¿æ¶¨åœã€‚\n\nè¡Œä¸šå¤„åœ¨"åŠŸèƒ½æ»¡è¶³"åˆ°"æƒ…ç»ªä»·å€¼"çš„é˜¶æ®µã€‚DeepSeekç­‰å¼€æºå¤§æ¨¡å‹èµ‹èƒ½æƒ…æ„Ÿäº¤äº’ï¼ŒAIå¨ƒå¨ƒå¯å®ç°é•¿æœŸè®°å¿†å­˜å‚¨ã€ä¸ªæ€§åŒ–åé¦ˆåŠç”Ÿç†æ•°æ®è”åŠ¨ï¼ˆå¦‚æ ¹æ®å¿ƒç‡åŠ¨æ€è°ƒæ•´äº’åŠ¨æ¨¡å¼ï¼‰ã€‚éœ€æ±‚åˆšæ€§äº¦å‡¸æ˜¾ï¼Œä¸­å›½å•èº«äººå£è¶…2.4äº¿ï¼Œå åŠ è€é¾„åŒ–è¶‹åŠ¿ï¼Œæƒ…æ„Ÿé™ªä¼´éœ€æ±‚æ¿€å¢ã€‚\næœºå™¨äººæ¿å—å†åº¦çˆ†å‘\nä¸æ­¤åŒæ—¶ï¼Œåˆåï¼Œæœºå™¨äººæ¿å—å†åº¦æ‹‰å‡ã€‚é•¿ç››è½´æ‰¿åˆåå¤§æ¶¨è¶…15%ï¼Œå†åˆ›å†å²æ–°é«˜ï¼Œè‚¡ä»·æ¶¨è¶…110å…ƒï¼Œç›¸æ¯”å»å¹´2æœˆ6æ—¥æœ€ä½ä»·10.84å…ƒè‚¡ä»·æ¶¨è¶…10å€ï¼Œç´¯è®¡æ¶¨å¹…è¶…830%ã€‚æœºå™¨äººETFä¸€åº¦å¤§æ¶¨è¶…2%ã€‚\näº‹ä»¶æ–¹é¢ï¼Œ2025å…¨çƒå¼€å‘è€…å…ˆé”‹å¤§ä¼šå°†äº2æœˆ21æ—¥è‡³23æ—¥åœ¨ä¸Šæµ·å¾æ±‡ä¸¾åŠï¼Œå¤§ä¼šä»¥"æ¨¡å¡‘å…¨çƒ æ— é™å¯èƒ½"ä¸ºä¸»é¢˜ï¼Œèšç„¦å¤§æ¨¡å‹ã€ç®—åŠ›ã€è¯­æ–™ã€å·¥å…·ã€è½¯ä»¶å¹³å°ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œå‚ä¸çš„å¼€å‘è€…ç¾¤ä½“åŒ…æ‹¬ç¡¬ä»¶å¼€å‘ã€äº‘è®¡ç®—ã€å¤§æ•°æ®ã€ç‰©è”ç½‘ã€äººå·¥æ™ºèƒ½ã€æœºå™¨äººã€åŒºå—é“¾å’Œå…ƒå®‡å®™ã€‚æœ¬æ¬¡å¤§ä¼šå®šä½äº"ç¤¾åŒºçš„ç¤¾åŒº"ï¼Œå……åˆ†å¸å¼•å›½é™…å¼€å‘è€…ç¤¾åŒºå‚ä¸æœ¬æ¬¡å¤§ä¼šã€‚\næ®æ‚‰ï¼Œæœ¬æ¬¡å¤§ä¼šäº®ç‚¹ä¸»è¦ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼šä¸€æ˜¯ä½“ç°ä¸Šæµ·å¸‚äººå·¥æ™ºèƒ½äº§ä¸šç”Ÿæ€é›†ç¾¤ä¸°å¯Œï¼Œå·²åˆæ­¥å½¢æˆäººå·¥æ™ºèƒ½ä¸Šæµ·é˜Ÿï¼›äºŒæ˜¯æœ¬æ¬¡å¤§ä¼šæ˜¯å…¨çƒç¬¬ä¸€ä¸ªå®šä½æœåŠ¡äºå…¨å‘˜å¼€å‘è€…çš„å¤§ä¼šï¼Œé›†èšå›½å†…å¤–100å®¶å¼€å‘è€…ç¤¾åŒºå‚ä¸æœ¬æ¬¡å¤§ä¼šï¼›ä¸‰æ˜¯åœºæ™¯å…¨è¦†ç›–ï¼Œé’ˆå¯¹"5+6"é¢†åŸŸå’Œè¡Œä¸šï¼Œæ¢ç´¢å¤§æ¨¡å‹äº§ä¸šåŒ–è§£å†³æ–¹æ¡ˆï¼Œæ¨è¿›åœºæ™¯è½åœ°åº”ç”¨ï¼Œå®ç°å•†ä¸šæ¨¡å¼çš„æ­£å‘é—­ç¯ï¼Œæ¨åŠ¨ç”Ÿæ€é“¾æ¥åˆä½œã€‚\nå¦ä¸€æ–¹é¢ï¼Œæ®ä¸­æ–°ç¤¾æœ€æ–°æŠ¥é“ï¼Œä¸Šæµ·é¦–åº§åŒ—å±¿çš„è“è‰²é‡äº§åœ°â€”â€”æ™ºå…ƒæœºå™¨äººåˆ¶é€ å·¥å‚æŠ•äº§ä¸è¿‡æ•°æœˆï¼Œ2024å¹´å·²ä¸‹çº¿1000å°åŒ—å±¿çš„è“è‰²ï¼Œå¹¶å°†åœ¨2025å¹´å®ç°æ•°åƒå°çš„å¹´äº§é‡ã€‚ä¸šå†…è®¤ä¸ºï¼Œ2025å¹´å°†æ˜¯åŒ—å±¿çš„è“è‰²çš„é‡äº§å…ƒå¹´ï¼Œè¯¥äº§ä¸šæ­£ä»¥è¶…çº¿æ€§çš„é€Ÿåº¦çªç ´ä¸´ç•Œç‚¹ã€‚ä¸Šæµ·æ‹¥æœ‰é«˜ç«¯åˆ¶é€ ä¸šçš„åŸºç¡€ã€é•¿ä¸‰è§’å®Œå¤‡çš„ä¾›åº”é“¾åŠäº§ä¸šé…å¥—ï¼Œä»¥åŠä¸°å¯Œçš„é«˜æ ¡èµ„æºå’Œäººæ‰å‚¨å¤‡ï¼Œæ˜¯äº§ä¸šåŠ é€Ÿçš„åŸºç¡€ã€‚\nå…‰å¤§è¯åˆ¸è®¤ä¸ºï¼Œæœºå™¨äººäº§ä¸šè¶‹åŠ¿åŠ é€ŸèƒŒæ™¯ä¸‹ï¼Œå»ºè®®å…³æ³¨ PEEKã€ç¢³çº¤ç»´ã€è¶…é«˜åˆ†å­é‡èšä¹™çƒ¯ã€èšçƒ¯çƒƒå‘æ³¡ææ–™ç­‰åŒ–å·¥ææ–™ã€‚\nï¼ˆ1ï¼‰è½»é‡åŒ–æ˜¯è¾ƒå¥½å®ç°åŒ—å±¿çš„è“è‰²è´Ÿè½½ã€ç»­èˆªèƒ½åŠ›å’Œçµæ´»æ€§ç­‰çš„è§£å†³æ–¹æ³•ä¹‹ä¸€ã€‚PEEKã€ç¢³çº¤ç»´ç­‰æ€§èƒ½æä½³çš„è½»é‡åŒ–ææ–™ï¼Œåœ¨æœºå™¨äººé¢†åŸŸçš„æ½œåœ¨åº”ç”¨ç©ºé—´è¾ƒå¤§ï¼Œéœ€æ±‚ç©ºé—´æœ‰æœ›å¤§å¹…æå‡ã€‚æ­¤å¤–ï¼Œé€šè¿‡ä½¿ç”¨ç¢³çº¤ç»´å¯¹PEEKæ”¹æ€§è¿˜å¯ä»¥æå‡PEEKææ–™çš„æœºæ¢°å¼ºåº¦ã€è€æ‘©æ“¦å’ŒæŠ—ç£¨æŸæ€§èƒ½ï¼Œå¯åº”ç”¨åœ¨æœºå™¨äººçš„æœºæ¢°è‡‚ã€å…³èŠ‚è¿æ†ã€é½¿è½®è½´æ‰¿ç­‰éƒ¨ä½ã€‚ï¼ˆ2ï¼‰è¶…é«˜åˆ†å­é‡èšä¹™çƒ¯æ€§èƒ½ä¼˜å¼‚åº”ç”¨å¹¿æ³›ï¼Œä¸‹æ¸¸å¯ç”¨äºåŒ—å±¿çš„è“è‰²é¢†åŸŸã€‚å…¶å…·æœ‰é«˜å¼ºé«˜æ¨¡ã€è€å†²å‡»æ€§ã€è€ç£¨æ€§ã€è€åŒ–å­¦è…èš€ã€ç”µç»ç¼˜å’Œè€å…‰æ€§ç­‰ä¼˜å¼‚æ€§èƒ½ï¼Œæ¯”å¼ºåº¦ç›¸å½“äºä¼˜è´¨é’¢ä¸çš„ 15 å€ã€ ç¢³çº¤ç»´çš„ 1.8 å€ã€èŠ³çº¶çš„ 1.6 å€ï¼Œæ‹¥æœ‰è¶…ä½çš„æ–­è£‚ä¼¸é•¿ç‡ï¼Œèƒ½é‡å¸æ”¶ç‡é«˜ï¼Œå¯†åº¦æ¯”æ°´å°ï¼ŒæŸ”è½¯æ˜“å¼¯æ›²ã€‚è¶…é«˜åˆ†å­é‡èšä¹™çƒ¯çº¤ç»´æœ‰æœ›åœ¨æœªæ¥çš„çµå·§æ‰‹ä¸­å æ®ä¸€å¸­ä¹‹åœ°ï¼Œè¿˜å¯ä»¥åº”ç”¨ä¸ºåŒ—å±¿çš„è“è‰²è…±ç»³ä¼ å¯¼ææ–™ï¼Œæä¾›æ‰€éœ€çš„å¼ºåº¦å’Œè€ä¹…æ€§ã€‚\nï¼ˆ3ï¼‰èšçƒ¯çƒƒå‘æ³¡ææ–™æ˜¯ä»¥çƒ¯çƒƒèšåˆç‰©ä¸ºä¸»è¦åŸææ–™ï¼Œé€šè¿‡å¤æ‚çš„å‘æ³¡å·¥è‰ºä½¿ææ–™ä¸­äº§ç”Ÿå¤§é‡ç‹¬ç«‹çš„ç»†å¾®æ³¡å­”ï¼Œ\n2.AAA\n1.BBB\n1.CCC\nå¹¶å‡åŒ€åˆ†æ•£äºå›ºä½“ææ–™ä¸­çš„ä¸€ç±» é«˜åˆ†å­ææ–™ã€‚`;

    function htmlCloudImg(){

        return `
        <section>
            <span leaf=""><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAEAAAAAAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAD8At4DASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooprMQaAFMgU4pPNFRuw3c9aY0ig0AT+aKPNFV/NFNacA9aALXmijzRVUXAo+0CgC15oo80VTa6ANJ9roAu+aKPNFUvtdH2ugC75oo80VRN1z1qWOYMgJNAFnzRShgR1qBXUipEZdooAkopm/wBOlOVuOTQAtFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUZFABRTTIAaUMCOtAC0UUUAFFFIZApxQAtFML5PHSjeaAH0UzeaUSAdetADqKb5opwO4ZoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKazEGhmINRu53GgBWlYHrSeaO55qN3O41FLLt+tAEk8gyTUD3Cge9QzXeOpqlLdM8m1QST6dqALr3u0dai+39eVJp9lpDyqPMOc/hWhBpUUC4CLn1PNAGP8A2jnqQDSHUsdvxrfFrGB/q4/++RVe60qC6ZgVCt7cYoAxW1NQ3WkfU1AHOM0zV/C0tsm6I7yx6elXNJ8LGJUeZRv7jPSgBlo73jHywWHYkYqdbSdSQyDI9K1o7dIV+VQv0oBxQBjOZYF+ZelEN/kDt7VrTp5keO1Zt/o7LB5sf3u4oAkjvAe9TJcZPtWFFf4OG4I6irkGoLxzQBsRygmntIAaz4b0E5BqZZ97UAW1fI46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gGePSgDoopFY5qYNg5FZ1rcrsFWluAV60AWPNb1oZzsz3qJZQRTJrggYB4oAdJJxk9ahe4UD3qGa7x1NUrq+Cg880AWpb5V781Xk1JAfUms2S+Msu1fmLenatjR/DokVZZhuz0GcYoHYhV5ZmwsT/UDrT/sVz/cP41tJCIxgDGKlT7ooEczdyTWHMiHb6gdKqNqQdgQxwe+Oa6+WETKVYBlPY1n/APCMWy3olEYGeoycUAZthbTXhygzGehNaEeiuUGWwa0UgEa4UBR6U4IVGAf1oA5sytdThFPzE1uWlstsoCrg45rnvCj/AG3VyTlSiZHHGa6fHOT1oGmPT7ooKgmhPuiiQ7V4oJbFAxRUauSOtPU5FAJi0UjHGPrSngGgY1kJNKEGBkCkEgHXrTgdwzQK5R17Rk1ywe3ckBz19KzovAenRIB5YYgYJLHn9a38dfejA9BQM5vUvANnc25WIPE/qCSKx9G8Bz6B4ngmeQzQe4ANd3tHpSGJSemaBtggDLmnAYoA2jAooENZiDSqcigqCaUDFAkgooooGFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAjKG60Y5paKAADA4ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApjfep9IVBNAFa7tftkLKOucH34rhZbk2N88Z4KsRXogGK4Dx5pE8et+fBDI6OQX2jOeBQBoWOohlXmtGG9BA54rkrC5mhfEkMigeoxWnb6mMDBoA6EXQAqKe8HNZf9pj+9UN1qqqp55oGkWry+Ck881k6jqQVCQ3Jqvf6puUlWBJ7ViX99MSGWKQsTxhaCrHb+BtON5G9xMMgcAetdZCgSMADAFUPD1qLTRrZBydgJ+p5/rV4MRQJscVBNITtOBSqcigqCaCQU5FLjJz6UAYooAKKKKAIFtwj7kRVOMZAxT0jIUVIBiigBFGBSkbhzRRQAgQDtSgYoooACM0daKKAGNFk05V2rilooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKjZCCQOhqSigCtcafFdxbHVc9+K5/WPBRQl7V8cZK11JGaQIAc96APLLrVZLGdopwInQ4we9X/AA/otz4ncuR5UIPDf3q6rxD4ItPEVykkilGjOcgferVtLKO0tViRAiKMACgaZnaf4TtLCJcRI+OpOTmryaZbMQ4gjBAwPlqyBgUUBcQRqoAAwBRsFLRQIAMUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//9k=" alt="é¢„è§ˆå›¾" class="w-full h-40 object-cover"></span>
        </section>
        `
    }

    

    function htmlWenan(){

        return `
        <section style="text-align: center;box-sizing: border-box;" data-pm-slice="0 0 []">
            <p style="font-size: 16px;font-weight: 400;font-style: normal;margin: 0px;padding: 0px;box-sizing: border-box;">
                <strong style="font-weight: 600;color: rgb(52, 152, 219);box-sizing: border-box;"><em style="font-style: italic;color: rgb(51, 65, 85);box-sizing: border-box;"><span leaf="">ä»Šæ—¥è‡ªå–œæ–‡æ¡ˆ</span></em></strong>
            </p>
            <p style="margin: 0px;padding: 0px;box-sizing: border-box;">
                <span style="box-sizing: border-box;"><span style="box-sizing: border-box;font-size: 14px;line-height: 1.7;"><span leaf="">æ—¶é—´æ˜¯è‰¯è¯æ˜å¤©ä¼šæ¯”ä»Šå¤©å¥½</span><span leaf=""><br></span><span leaf="">åªè¦ä¸åšæ€æƒ³çš„å›šç¬¼æˆ‘ä»¬æœ‰çš„æ˜¯æœªæ¥</span><span leaf=""><br></span><span leaf="">æ–­èˆç¦»æ˜¯æˆå¹´äººçš„é¡¶çº§è‡ªå¾‹</span></span></span>
            </p>
        </section>
        `
    }


    

    function htmlCardBeiYu(){

        return `
        <section class="mp_profile_iframe_wrp" nodeleaf="">
            <mp-common-profile class="js_uneditable custom_select_card mp_profile_iframe" data-pluginname="mpprofile" data-nickname="åŒ—å±¿çš„è“è‰²" data-alias="hot-books" data-from="2" data-headimg="http://mmbiz.qpic.cn/sz_mmbiz_png/SafC09p6yPmkKicjV7Eib4QicxEsLtDy0akTFJOkpZu5pfCpw4MtoZLdTY2l0eGlEwmVbNOyK7EaEndpqCrvlXwBQ/0?wx_fmt=png" data-signature="æ¬¢è¿ï½å…³æ³¨åèœå•æ é‡Œå–å›¾ğŸ«°" data-id="MzI2OTQ4MDcxOA==" data-is_biz_ban="0" data-service_type="1" data-verify_status="0">
            </mp-common-profile>
        </section>
        `
    }

  

    // ä¸€å¥è¯
    function htmlLineWord(){

        return `
            <p data-mq-box-wenan="1" data-mq-wenan-text="1" data-eusoft-scrollable-element="1" style="-webkit-tap-highlight-color: transparent;margin: 21px 0px 20px;padding: 0px 32px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;clear: both;min-height: 1em;font-family: &quot;PingFang SC&quot;, system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: normal;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;text-align: center;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 0px;line-height: 18px;">
                <span leaf="">ä¸å¾˜å¾Šã€ä¸é€€ç¼©ã€ä¸ç•æƒ§ï¼Œå¤§æ­¥è¿ˆå‘æœªçŸ¥çš„è¿œæ–¹ã€‚</span>
            </p>
        `
    }

    // åŒæ’å›¾
    function htmlShuangPaiImg(){

        return `
            <section data-mq-box-parent="1" style="-webkit-tap-highlight-color: transparent;margin: 21px 0px 20px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgba(0, 0, 0, 0.9);font-family: &quot;PingFang SC&quot;, system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.544px;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;display: flex;flex-flow: row;text-align: center;justify-content: center;">
                <section style="-webkit-tap-highlight-color: transparent;margin: 10px 10px 10px 20px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;flex: 1 1 0%;aspect-ratio: 1 / 1;border-radius: 2px;overflow: hidden;box-shadow: rgb(160, 160, 160) 1px 3px 5px 3px;" nodeleaf="">
                    <img data-src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/SafC09p6yPlU1x8plZfggicv1BvFJJUErykJJDp0tiaedoQfCAcqfvOSEQ7m8ZC4dNnwhT0FNNOMib2NYW3KrpuSg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=10" alt="å›¾ç‰‡" class="rich_pages wxw-img" data-ratio="0.9851851851851852" data-w="1080" style="-webkit-tap-highlight-color: transparent;margin: 0px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;height: auto !important;object-fit: cover;aspect-ratio: 1 / 1;width: 305.5px !important;vertical-align: bottom;min-height: 100%;visibility: visible !important;" data-imgqrcoded="1" src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/SafC09p6yPlU1x8plZfggicv1BvFJJUErykJJDp0tiaedoQfCAcqfvOSEQ7m8ZC4dNnwhT0FNNOMib2NYW3KrpuSg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=10">
                </section>
                <section style="-webkit-tap-highlight-color: transparent;margin: 10px 20px 10px 10px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;flex: 1 1 0%;aspect-ratio: 1 / 1;border-radius: 3px;overflow: hidden;box-shadow: rgb(160, 160, 160) 1px 3px 5px 3px;" nodeleaf="">
                    <img data-src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/SafC09p6yPlU1x8plZfggicv1BvFJJUErrStUGuH3WI9nAVVcSaHsiastz8D5yaofHIZrLQVJErtV6icqLIicmzv7Q/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=11" alt="å›¾ç‰‡" class="rich_pages wxw-img" data-ratio="1" data-w="300" style="-webkit-tap-highlight-color: transparent;margin: 0px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;height: auto !important;object-fit: cover;aspect-ratio: 1 / 1;width: 305.5px !important;vertical-align: bottom;min-height: 100%;visibility: visible !important;" data-imgqrcoded="1" src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/SafC09p6yPlU1x8plZfggicv1BvFJJUErrStUGuH3WI9nAVVcSaHsiastz8D5yaofHIZrLQVJErtV6icqLIicmzv7Q/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1#imgIndex=11">
                </section>
            </section>
        `
    }


    // è¾…åŠ©ï¼šå°† File[] è½¬ä¸º Data URLï¼ˆbase64ï¼‰
    async function filesToDataURLs(files) {
        const tasks = files.map(file => new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = () => resolve(reader.result); // "data:image/...;base64,..."
            reader.onerror = reject;
            reader.readAsDataURL(file);
        }));
        return Promise.all(tasks);
    }

    // ï¼ˆå¯é€‰ï¼‰è¾…åŠ©ï¼šå°† File[] è½¬ä¸º Object URLï¼ˆæ€§èƒ½å¥½ï¼Œéœ€æ‰‹åŠ¨é‡Šæ”¾ï¼‰
    function filesToObjectURLs(files) {
      return files.map(file => URL.createObjectURL(file));
    }

    const btnPickImage = document.getElementById('pick-images-btn');
    const btnFile = document.getElementById('file-input-btn');
    const btnImageSrcArray = document.getElementById('file-src-array');
    const btnImageDiv = document.getElementById('image-list');

    // ç‚¹å‡»æŒ‰é’®æ‰“å¼€æ–‡ä»¶é€‰æ‹©æ¡†
    btnPickImage.addEventListener('click', () => btnFile.click());

    // é€‰æ‹©æ–‡ä»¶åå¤„ç† 
    btnFile.addEventListener('change', async (e) => {

        const files = Array.from(e.target.files).filter(f => f.type.startsWith('image/'));
        if (!files.length) return;

        await handleFiles(files);
        
    });


    function deleteImage(index){
         // ä»æ•°ç»„ä¸­ç§»é™¤
         imageSrcList.splice(index, 1);
         showImageList(imageSrcList)
    }

    // å–å¾—æœ€æ–°çš„å›¾ç‰‡imageSrcList=['data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADh0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uMy4yLjIsIGh0dHA6Ly9tYXRwbG90bGliLm9yZy+WH4yJAAAGFklEQVR4nO3deXxU1RnH8e9VpKqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKqoqKq'] ç”Ÿæˆé¢„è§ˆ æ”¾å…¥åˆ°id=image-listçš„divä¸­,æ¯ä¸ªå›¾ç‰‡50*50
    function showImageList(imageSrcList) {
        btnImageDiv.innerHTML = "";
        let html = ''
         // å¾ªç¯
        for (let i = 0; i < imageSrcList.length; i++) {
            let img = `<img src="${imageSrcList[i]}" style="width:60px;height:60px;display:inline-block; margin-right:5px" onclick="deleteImage(${i})">`;
            // æ‹¼æ¥
            html += img;
        }
        btnImageDiv.innerHTML = html
        btnImageSrcArray.value = '["' + imageSrcList.join('",\r\n"') + '"]'
         
        // å˜æ›´èƒŒæ™¯å›¾ç‰‡
        imgLinks = [...imageSrcList];

    }
    

    const clearImagesBtn = document.getElementById('clear-images-btn');
    clearImagesBtn.addEventListener('click', () => {
        imageSrcList = [];
        showImageList(imageSrcList)
    });
    
    // æ”¯æŒæ‹–æ”¾åŠŸèƒ½
    const dropArea = document.getElementById('preview');

    
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
    });
    
    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }
    
    ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false);
    });
    
    ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false);
    });
    
    function highlight() {
        dropArea.classList.add('border-primary', 'bg-blue-50');
    }
    
    function unhighlight() {
        dropArea.classList.remove('border-primary', 'bg-blue-50');
    }
    
    dropArea.addEventListener('drop', handleDrop, false);
    
    // æ‹–æ‹½
    function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        debugger
        handleDropFiles({ target: { files } });
    }

     // å¤„ç†æ‹–æ‹½é€‰æ‹©çš„æ–‡ä»¶
    async function handleDropFiles(e) {
        const files = e.target.files;
        
        if (!files.length) return;
        
        // è¿‡æ»¤éå›¾ç‰‡æ–‡ä»¶
        const imageFiles = Array.from(files).filter(file => file.type.startsWith('image/'));
        
        if (!imageFiles.length) {
            alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼ˆJPGã€PNGã€GIFç­‰ï¼‰');
            return;
        }
         handleFiles(imageFiles)
    }

    async function handleFiles(files) {
        debugger
        imageFiles = [...imageFiles, ...files];
         
        // æ–¹å¼ä¸€ï¼šData URLï¼ˆé€‚åˆç”Ÿæˆå¯æ‹·è´çš„é™æ€ HTMLï¼‰
        const newSrcs = await filesToDataURLs(files);

        // æ–¹å¼äºŒï¼šObject URLï¼ˆæ›´å¿«ï¼‰
        //  const newSrcs = filesToObjectURLs(files);

        imageSrcList.push(...newSrcs);

        // btnImageDiv.innerText = imageSrcList.join('\n');

        // åˆ·æ–°ä½ çš„é¢„è§ˆï¼ˆå¦‚æœä½ å·²æœ‰é¢„è§ˆå‡½æ•°ï¼Œæ›¿æ¢ä¸ºå¯¹åº”è°ƒç”¨ï¼‰
        if (typeof updateImagePreviewFromSrc === 'function') {
            updateImagePreviewFromSrc(srcList);
        }

        // æ›´æ–°è®¡æ•°ï¼ˆå¦‚æœå·²æœ‰è®¡æ•°å‡½æ•°ï¼‰
        if (typeof updateFileCountFromSrc === 'function') {
            updateFileCountFromSrc();
        }

        // æ˜¾ç¤ºå·²é€‰æ‹©å›¾ç‰‡
        showImageList(imageSrcList);



        // æ›´æ–°é¢„è§ˆ
        updatePreview();

        // å…è®¸å†æ¬¡é€‰æ‹©åŒä¸€æ–‡ä»¶
        btnFile.value = '';
    }

    // åˆå§‹åŒ–Markdownè§£æå™¨
    marked.setOptions({
        breaks: true,
        highlight: function(code) {
            return hljs.highlightAuto(code).value;
        }
    });

    // å®æ—¶å–å€¼
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');

    function updatePreview() {
        const markdown = editor.value;
        const html = autoFormatText(markdown);
        preview.innerHTML = html;
    }

    // å®æ—¶é¢„è§ˆ
    editor.addEventListener('input', updatePreview);

    // é¡µé¢åŠ è½½æ—¶ï¼Œè‡ªåŠ¨é¢„è§ˆ
    editor.value = rawText;
    updatePreview();

    // å¤åˆ¶å…¬ä¼—å·å…¼å®¹å†…å®¹çš„html ç”¨äºä»£ç pushåˆ°å…¬ä¼—å·
    function copyWechatHTML() {
        const markdown = editor.value;
        const htmlContent = autoFormatText(markdown);

        // åˆ›å»ºä¸´æ—¶textareaå…ƒç´ 
        const textarea = document.createElement('textarea');
        textarea.value = htmlContent;
        document.body.appendChild(textarea);

        try {
            // é€‰æ‹©æ–‡æœ¬
            textarea.select();
            textarea.setSelectionRange(0, textarea.value.length);

            // æ‰§è¡Œå¤åˆ¶å‘½ä»¤
            const successful = document.execCommand('copy');
            
            if (successful) {
                showToast('âœ¨ å¤åˆ¶æˆåŠŸï¼');
            } else {
                showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·ä½¿ç”¨Ctrl+Cæ‰‹åŠ¨å¤åˆ¶');
            }
        } catch (err) {
            console.error('å¤åˆ¶å¤±è´¥:', err);
            showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·ä½¿ç”¨Ctrl+Cæ‰‹åŠ¨å¤åˆ¶');
        } finally {
            // ç§»é™¤ä¸´æ—¶å…ƒç´ 
            document.body.removeChild(textarea);
        }
    }

    // æ˜¾ç¤ºtoast å¤åˆ¶æç¤ºä¿¡æ¯
    function showToast(message, duration = 2000) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, duration);
    }
    </script>
    
    <!-- ä»£ç é«˜äº® -->
    <script src="../../js/highlight.min.js"></script>
</body>
</html>