<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="æ™ºèƒ½æ–‡æœ¬è½¬Markdownæ ¼å¼åŒ–å·¥å…· - AIé©±åŠ¨çš„å†…å®¹è¯†åˆ«å’Œè‡ªåŠ¨æ’ç‰ˆ">
    <title>æ™ºèƒ½æ–‡æœ¬æ ¼å¼åŒ–å·¥å…· v2.0</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 
                        "Helvetica Neue", "PingFang SC", 
                        "Microsoft YaHei", sans-serif;
        }

        .container {
            display: flex;
            gap: 20px;
            flex: 1;
        }

        .editor-box {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        textarea {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: none;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        #preview {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow-y: auto;
            background: #fff;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .header {
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .title {
            font-size: 16px;
            color: #333;
            margin: 0;
        }

        .feature-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 12px;
            line-height: 1.6;
        }

        .feature-info h4 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #fff;
        }

        .feature-info ul {
            margin: 0;
            padding-left: 15px;
        }

        .feature-info li {
            margin-bottom: 3px;
            color: rgba(255, 255, 255, 0.9);
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 15px;
            background: #07c160;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .btn:hover {
            background: #06ad56;
        }

        .btn.secondary {
            background: #3498db;
        }

        .btn.secondary:hover {
            background: #2980b9;
        }

        /* è¿”å›ä¸»é¡µæŒ‰é’®æ ·å¼ */
        .back-home {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 8px 15px;
            background: #ffd93d;
            color: #333;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease, opacity 0.3s ease;
            z-index: 1000;
            opacity: 0.7;
        }

        .back-home:hover {
            background: #ffc107;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            opacity: 0.9;
        }

        .back-home::before {
            content: "ğŸ ";
            font-size: 16px;
        }

        /* å¤åˆ¶æŒ‰é’®æ ·å¼ */
        .copy-btn {
            position: fixed;
            bottom: 20px;
            right: 135px;
            padding: 8px 15px;
            background: #07c160;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease, opacity 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0.3;
        }

        .copy-btn:hover {
            background: #06ad56;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            opacity: 1;
        }

        .copy-btn::before {
            content: "ğŸ“‹";
            font-size: 16px;
        }

        /* æµ®åŠ¨æç¤ºæ ·å¼ */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #FFD1DC, #FFB5E8); /* æ¸å˜é©¬å¡é¾™è‰² */
            color: #444;
            padding: 12px 24px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toast.show {
            opacity: 1;
        }

        .toast::before {
            content: "ğŸˆ"; /* æ›´æ¢ä¸ºæ°”çƒå›¾æ ‡ */
        }
    </style>
</head>
<body>
    <a href="../index.html" class="back-home"> è¿”å›ä¸»é¡µ</a>
    
    <!-- æ–°å¢åŠŸèƒ½è¯´æ˜åŒºåŸŸ -->
    <div class="feature-info">
        <h4>ğŸ§  å…¨æ–°AIæ™ºèƒ½æ ¼å¼åŒ– - ç‰ˆæœ¬2.1ï¼ˆæ¢è¡Œä¼˜åŒ–ç‰ˆï¼‰</h4>
        <ul>
            <li><strong>æ™ºèƒ½æ®µè½æ¢è¡Œ</strong>ï¼šğŸ†• å®Œç¾ä¿ç•™åŸæ–‡æ®µè½ç»“æ„ï¼Œç‹¬ç«‹çŸ­å¥ï¼ˆå¦‚ï¼šç¬¬ä¸€æ®µã€ç¬¬äºŒæ®µï¼‰è‡ªåŠ¨åˆ†æ®µå¤„ç†</li>
            <li><strong>æ™ºèƒ½æ ‡é¢˜è¯†åˆ«</strong>ï¼šåŸºäºä¸Šä¸‹æ–‡åˆ†æï¼Œç²¾ç¡®è¯†åˆ«å¤šçº§æ ‡é¢˜ï¼ˆæ•°å­—ç¼–å·ã€æ–¹æ‹¬å·ã€æ”¿ç­–æ–‡ä»¶ç­‰æ ¼å¼ï¼‰</li>
            <li><strong>æ™ºèƒ½æ®µè½åˆ†å‰²</strong>ï¼šé€šè¿‡å†…å®¹è·³è·ƒåº¦ç®—æ³•ï¼Œå‡†ç¡®åˆ¤æ–­æ®µè½è¾¹ç•Œï¼Œä¿æŒè¯­ä¹‰è¿è´¯æ€§</li>
            <li><strong>æ™ºèƒ½åˆ—è¡¨è¯†åˆ«</strong>ï¼šæ”¯æŒå¤šç§åˆ—è¡¨æ ¼å¼ï¼Œè‡ªåŠ¨è¯†åˆ«åŸºäºä¸Šä¸‹æ–‡çš„åˆ—è¡¨é¡¹</li>
            <li><strong>é‡ç‚¹å†…å®¹æ ‡è¯†</strong>ï¼šå¤šç»´åº¦åˆ†æï¼ˆå…³é”®è¯ã€æ•°å­—æŒ‡æ ‡ã€å¥å¼ç‰¹å¾ã€ä¸Šä¸‹æ–‡ï¼‰æ™ºèƒ½æ ‡è®°é‡è¦ä¿¡æ¯</li>
            <li><strong>æ™ºèƒ½åˆ†å¥å¤„ç†</strong>ï¼šä¿æŒæ ‡ç‚¹ç¬¦å·çš„å‡†ç¡®åˆ†å¥ï¼Œé¿å…è¿‡åº¦åˆ†å‰²</li>
            <li><strong>æ ¼å¼è‡ªåŠ¨ä¼˜åŒ–</strong>ï¼šæ¸…ç†å†—ä½™æ ¼å¼ï¼Œä¼˜åŒ–æ•´ä½“æ’ç‰ˆæ•ˆæœ</li>
        </ul>
    </div>
    
    <div class="container">
        <div class="editor-box">
            <div class="header">
                <h3 class="title">åŸå§‹æ–‡æœ¬</h3>
                <div class="button-group">
                    <button class="btn" onclick="loadSampleData()">æ™ºèƒ½ç¤ºä¾‹</button>
                    <button class="btn secondary" onclick="loadSimpleDemo()">ç®€å•æ¼”ç¤º</button>
                    <button class="btn secondary" onclick="clearInput()">æ¸…ç©º</button>
                </div>
            </div>
            <textarea id="textInput" placeholder="è¯·è¾“å…¥éœ€è¦æ ¼å¼åŒ–çš„æ–‡æœ¬å†…å®¹...&#10;&#10;ğŸ†• å‡çº§åŠŸèƒ½ï¼š&#10;âœ“ æ™ºèƒ½ä¿ç•™åŸæ–‡æ®µè½ç»“æ„å’Œæ¢è¡Œ&#10;âœ“ ç‹¬ç«‹çŸ­å¥è‡ªåŠ¨åˆ†æ®µï¼ˆå¦‚ï¼šç¬¬ä¸€æ®µã€ç¬¬äºŒæ®µç­‰ï¼‰&#10;âœ“ æ ‡é¢˜ã€åˆ—è¡¨ã€é‡ç‚¹å†…å®¹æ™ºèƒ½è¯†åˆ«&#10;âœ“ è‡ªåŠ¨è¿›è¡ŒMarkdownæ ¼å¼åŒ–"></textarea>
        </div>
        <div class="editor-box">
            <div class="header">
                <h3 class="title">Markdowné¢„è§ˆ</h3>
            </div>
            <div id="preview"></div>
            <button class="copy-btn" onclick="copyMarkdown()">å¤åˆ¶Markdown</button>
        </div>
    </div>

    <!-- æ·»åŠ æç¤ºå…ƒç´  -->
    <div id="toast" class="toast">å¤åˆ¶æˆåŠŸï¼</div>

    <script>
        function formatToMarkdown(text) {
            if (!text.trim()) return '';
            
            // ä¿ç•™åŸå§‹æ¢è¡Œç»“æ„ï¼Œä½†è¿‡æ»¤ç©ºè¡Œ
            const originalLines = text.split('\n');
            const lines = originalLines.map(line => line.trim()).filter(line => line);
            let markdown = [];
            
            // æ™ºèƒ½å†…å®¹åˆ†æå’Œé¢„å¤„ç†
            const analysis = analyzeContentStructure(lines);
            
            // æ™ºèƒ½ç”Ÿæˆä¸»æ ‡é¢˜
            if (lines.length > 0 && !lines[0].startsWith('#') && !detectHeadingLevel(lines[0], analysis).isHeading) {
                const mainTitle = generateMainTitle(lines[0], analysis);
                markdown.push(`# ${mainTitle}\n`);
            }

            // æ™ºèƒ½æ®µè½å¤„ç† - ä¿ç•™åŸå§‹æ¢è¡Œè¯­ä¹‰
            let currentParagraph = [];
            let lastWasEmpty = false; // è·Ÿè¸ªç©ºè¡Œ
            let isInList = false;
            let consecutiveShortLines = 0; // è¿ç»­çŸ­å¥è®¡æ•°
            
            for (let i = 0; i < originalLines.length; i++) {
                const originalLine = originalLines[i];
                const line = originalLine.trim();
                
                // å¦‚æœæ˜¯ç©ºè¡Œï¼Œä¿ç•™æ¢è¡Œå¹¶ç»“æŸå½“å‰æ®µè½
                if (!line) {
                    if (currentParagraph.length > 0) {
                        // ç©ºè¡Œè¡¨ç¤ºæ®µè½ç»“æŸ
                        markdown.push(formatParagraph(currentParagraph, analysis));
                        currentParagraph = [];
                    }
                    // ä¿ç•™æ¢è¡Œï¼šæ·»åŠ ä¸€ä¸ªç©ºè¡Œ
                    markdown.push('');
                    lastWasEmpty = true;
                    consecutiveShortLines = 0;
                    isInList = false;
                    continue;
                }
                
                // æ£€æµ‹å†…å®¹ç±»å‹
                const headingInfo = detectHeadingLevel(line, analysis);
                const isListItem = isLikelyListItem(line, i, originalLines, analysis);
                
                // è®¡ç®—å½“å‰è¡Œåœ¨linesæ•°ç»„ä¸­çš„ä½ç½®ï¼ˆç¡®ä¿ç´¢å¼•æ­£ç¡®ï¼‰
                const filteredIndex = lines.indexOf(line);
                const isImportant = filteredIndex >= 0 ? isImportantSentence(line, analysis, filteredIndex, lines) : false;
                const isQuote = isQuoteText(line);
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯ç‹¬ç«‹çŸ­å¥ï¼ˆé€‚åˆç‹¬ç«‹æ®µè½ï¼‰
                const isIndependentShort = isIndependentSentence(line);
                
                // å¤„ç†æ ‡é¢˜
                if (headingInfo.isHeading) {
                    if (currentParagraph.length > 0) {
                        markdown.push(formatParagraph(currentParagraph, analysis));
                        currentParagraph = [];
                    }
                    markdown.push(`${'#'.repeat(headingInfo.level)} ${line}\n`);
                    isInList = false;
                    lastWasEmpty = false;
                    consecutiveShortLines = 0;
                    continue;
                }
                
                // å¤„ç†åˆ—è¡¨é¡¹
                if (isListItem) {
                    if (currentParagraph.length > 0) {
                        markdown.push(formatParagraph(currentParagraph, analysis));
                        currentParagraph = [];
                    }
                    
                    const formattedListItem = formatListItem(line, analysis);
                    markdown.push(formattedListItem);
                    isInList = true;
                    lastWasEmpty = false;
                    consecutiveShortLines = 0;
                    continue;
                }
                
                // å¤„ç†å¼•ç”¨
                if (isQuote) {
                    if (currentParagraph.length > 0) {
                        markdown.push(formatParagraph(currentParagraph, analysis));
                        currentParagraph = [];
                    }
                    markdown.push(formatQuote(line, analysis));
                    isInList = false;
                    lastWasEmpty = false;
                    consecutiveShortLines = 0;
                    continue;
                }
                
                // æ™ºèƒ½æ®µè½åˆå¹¶ç­–ç•¥
                const shouldStartNewParagraph = shouldStartNewParagraphLogic(
                    line, currentParagraph, lastWasEmpty, consecutiveShortLines, 
                    isInList, i, originalLines, analysis
                );
                
                if (shouldStartNewParagraph && currentParagraph.length > 0) {
                    markdown.push(formatParagraph(currentParagraph, analysis));
                    currentParagraph = [];
                    consecutiveShortLines = 0;
                    isInList = false;
                }
                
                currentParagraph.push(line);
                
                // æ›´æ–°çŸ­å¥è®¡æ•°
                if (line.length < 25 && !line.includes('ï¼Œ') && line.length > 3) {
                    consecutiveShortLines++;
                } else {
                    consecutiveShortLines = 0;
                }
                
                lastWasEmpty = false;
            }
            
            // å¤„ç†æœ€åä¸€ä¸ªæ®µè½
            if (currentParagraph.length > 0) {
                markdown.push(formatParagraph(currentParagraph, analysis));
            }

            return cleanMarkdown(markdown.join('\n\n')).replace(/\n\n\n+/g, '\n\n');
        }

        // æ™ºèƒ½æ®µè½åˆ¤æ–­é€»è¾‘
        function shouldStartNewParagraphLogic(line, currentParagraph, lastWasEmpty, consecutiveShortLines, isInList, index, allLines, analysis) {
            // å¦‚æœåˆšæœ‰æ®µè½åˆ†éš”ï¼Œå¼€å§‹æ–°æ®µè½
            if (lastWasEmpty) return true;
            
            // å¦‚æœå½“å‰æ˜¯çŸ­å¥ä¸”è¿ç»­å¤šä¸ªï¼Œå¯èƒ½éœ€è¦åˆ†æ®µ
            if (consecutiveShortLines >= 2 && line.length < 30) {
                return true;
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯æ–°çš„è¯é¢˜å¼€å§‹
            const prevLine = allLines[index - 1];
            if (prevLine && isNewTopic(line, prevLine)) {
                return true;
            }
            
            // å¦‚æœå½“å‰è¡Œå¾ˆé•¿ä¸”åŒ…å«å¤šä¸ªå¥å·ï¼Œè¯´æ˜æ˜¯å¤åˆæ®µè½
            const sentenceCount = (line.match(/[ã€‚ï¼ï¼Ÿ]/g) || []).length;
            if (sentenceCount >= 2 && currentParagraph.length === 0) {
                return false; // è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¤åˆå¥ï¼Œä¿æŒä¸ºä¸€æ®µ
            }
            
            // å¦‚æœå½“å‰æ®µè½å·²ç»å¾ˆé•¿ï¼ˆè¶…è¿‡200å­—ç¬¦ï¼‰ï¼Œå»ºè®®åˆ†æ®µ
            const currentLength = currentParagraph.join(' ').length;
            if (currentLength > 200) {
                return true;
            }
            
            return false;
        }

        // æ£€æµ‹æ˜¯å¦æ˜¯æ–°è¯é¢˜å¼€å§‹
        function isNewTopic(currentLine, prevLine) {
            // æ£€æŸ¥æ˜æ˜¾çš„è½¬æŠ˜
            const transitions = ['ä½†æ˜¯', 'ç„¶è€Œ', 'ä¸è¿‡', 'ç›¸å', 'åŒæ—¶', 'å¦å¤–', 'æ­¤å¤–', 'æ­¤å¤–'];
            if (transitions.some(word => currentLine.includes(word))) {
                return true;
            }
            
            // æ£€æŸ¥æ•°å­—ç¼–å·æˆ–æ–°çš„ç« èŠ‚
            if (/^[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å][ã€.]/.test(currentLine) || /^\d+[ã€.]/.test(currentLine)) {
                return true;
            }
            
            // æ£€æŸ¥é•¿åº¦è·³è·ƒ
            if (currentLine.length < 30 && prevLine.length > 50) {
                return true;
            }
            
            return false;
        }

        // æ£€æµ‹æ˜¯å¦åº”è¯¥ç‹¬ç«‹æˆæ®µçš„çŸ­å¥
        function isIndependentSentence(line) {
            // åŒ…å«å†’å·çš„å®šä¹‰æ€§å¥å­
            if (line.includes('ï¼š') || line.includes(':')) {
                return true;
            }
            
            // ä»¥"æ‰€è°“"ã€"å³"ã€"æŒ‡çš„æ˜¯"å¼€å¤´çš„å®šä¹‰å¥
            if (/^(æ‰€è°“|å³|æŒ‡çš„æ˜¯|ä¹Ÿå°±æ˜¯è¯´)/.test(line)) {
                return true;
            }
            
            // åŒ…å«"ç¬¬ä¸€"ã€"ç¬¬äºŒ"ç­‰åºå·çš„çŸ­å¥
            if (/^(ç¬¬ä¸€|ç¬¬äºŒ|ç¬¬ä¸‰|ç¬¬å››|ç¬¬äº”|ç¬¬å…­|ç¬¬ä¸ƒ|ç¬¬å…«|ç¬¬ä¹|ç¬¬å)[ã€.]/.test(line)) {
                return true;
            }
            
            // éå¸¸çŸ­çš„å®šä¹‰æ€§å¥å­
            if (line.length < 20 && (line.includes('æ˜¯') || line.includes('ä¸º'))) {
                return true;
            }
            
            return false;
        }

        // å†…å®¹ç»“æ„åˆ†æ
        function analyzeContentStructure(lines) {
            const analysis = {
                lineCount: lines.length,
                avgLength: lines.reduce((sum, line) => sum + line.length, 0) / lines.length,
                shortLines: lines.filter(line => line.length < 30).length,
                numberedLines: lines.filter(line => /^\d+[.ã€]/.test(line)).length,
                chineseNumberedLines: lines.filter(line => /^[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å][ã€]/.test(line)).length,
                bracketLines: lines.filter(line => /^[ã€\[\(ï¼ˆ].*[ã€‘\]\)ï¼‰]$/.test(line)).length,
                questionLines: lines.filter(line => line.startsWith('å¦‚ä½•') || line.startsWith('ä»€ä¹ˆ') || line.startsWith('ä¸ºä»€ä¹ˆ') || line.startsWith('æ€ä¹ˆ')).length,
                policyLines: lines.filter(line => line.startsWith('å…³äº') || line.startsWith('æ ¹æ®') || line.startsWith('æŒ‰ç…§')).length,
                colonLines: lines.filter(line => line.includes('ï¼š') || line.includes(':')).length,
                hasSpecialChars: lines.filter(line => /[ï¼!ï¼Ÿ?]$/.test(line)).length,
                contentTypes: []
            };
            
            // åˆ†æå†…å®¹ç±»å‹åˆ†å¸ƒ
            for (const line of lines) {
                const type = getContentType(line);
                analysis.contentTypes.push(type);
            }
            
            return analysis;
        }

        // è·å–å†…å®¹ç±»å‹
        function getContentType(line) {
            if (/^[â€¢Â·\-\*]\s/.test(line) || /^\d+[.ã€]\s/.test(line)) return 'list';
            if (/^[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å][ã€]\s/.test(line)) return 'chinese_list';
            if (/^[ã€\[\(ï¼ˆ].*[ã€‘\]\)ï¼‰]$/.test(line)) return 'bracket';
            if (/^\d+[.ã€]\s/.test(line)) return 'numbered';
            if (line.startsWith('å…³äº') || line.startsWith('æ ¹æ®')) return 'policy';
            if (line.startsWith('å¦‚ä½•') || line.includes('ï¼Ÿ') || line.includes('?')) return 'question';
            if (line.length < 15 && !line.includes('ï¼Œ') && !line.includes('ã€‚')) return 'short';
            if (line.includes('ï¼š') || line.includes(':')) return 'definition';
            return 'paragraph';
        }

        // ç”Ÿæˆä¸»æ ‡é¢˜
        function generateMainTitle(firstLine, analysis) {
            if (!firstLine || typeof firstLine !== 'string') {
                return 'æ™ºèƒ½æ’ç‰ˆæ–‡æ¡£';
            }
            
            if (firstLine.length <= 30 && !firstLine.includes('ã€‚')) {
                return firstLine;
            }
            
            // æ ¹æ®å†…å®¹ç±»å‹é€‰æ‹©æ ‡é¢˜
            const titlePatterns = [
                { pattern: /^(.{1,20})[ï¼š:]/, title: '$1' },
                { pattern: /^(.{1,25})[ï¼!]/, title: '$1' },
                { pattern: /^[^ã€‚ï¼ï¼Ÿ]{8,20}/, title: 'é¦–è¡Œå†…å®¹' }
            ];
            
            for (const pattern of titlePatterns) {
                const match = firstLine.match(pattern.pattern);
                if (match && match.title) {
                    return match.title.trim();
                }
            }
            
            return 'æ™ºèƒ½æ’ç‰ˆæ–‡æ¡£';
        }

        // å¢å¼ºçš„æ ‡é¢˜æ£€æµ‹
        function detectHeadingLevel(line, analysis = null) {
            const cleanLine = line.trim();
            const length = cleanLine.length;
            
            // æ˜ç¡®çš„æ ‡é¢˜æ ‡è®°
            const headingPatterns = [
                // ä¸­æ–‡æ•°å­—ç¼–å·
                { pattern: /^[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å][ã€.ï¼]\s*/, level: 2, weight: 1.0 },
                // é˜¿æ‹‰ä¼¯æ•°å­—ç¼–å·
                { pattern: /^\d+[ã€.ï¼]\s*/, level: 3, weight: 0.9 },
                // å¤šçº§æ•°å­—ç¼–å·
                { pattern: /^(\d+\.){2,4}\d+/, level: 2, weight: 0.8 },
                // æ‹¬å·ç¼–å·
                { pattern: /^[ï¼ˆ(][ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å1-9][)ï¼‰]\s*/, level: 3, weight: 0.7 },
                // æ–¹æ‹¬å·åŒ…å›´
                { pattern: /^[ã€\[\(ï¼ˆ].*[ã€‘\]\)ï¼‰]$/, level: 2, weight: 0.8 },
                // æ–¹æ‹¬å·å¼€å¤´
                { pattern: /^ã€.*?ã€‘/, level: 2, weight: 0.6 },
                // æ”¿ç­–æ–‡ä»¶å¼€å¤´
                { pattern: /^å…³äº/, level: 2, weight: 0.9 },
                // é—®é¢˜å‹æ ‡é¢˜
                { pattern: /^å¦‚ä½•/, level: 2, weight: 0.8 },
                // å­—æ¯ç¼–å·
                { pattern: /^[A-Z]\./, level: 3, weight: 0.6 },
                // å®šä¹‰å‹æ ‡é¢˜
                { pattern: /^[^\s]{2,15}[ï¼š:]/, level: 3, weight: 0.7 }
            ];
            
            // ç²¾ç¡®åŒ¹é…
            for (const pattern of headingPatterns) {
                if (pattern.pattern.test(cleanLine)) {
                    return { isHeading: true, level: pattern.level, confidence: pattern.weight };
                }
            }
            
            // åŸºäºé•¿åº¦çš„å¯å‘å¼åˆ¤æ–­
            if (length < 25 && (analysis ? analysis.shortLines > 5 : true)) {
                // çŸ­å¥ä¸”æ— å¥å·ï¼Œå¯èƒ½æ˜¯æ ‡é¢˜
                if (!cleanLine.includes('ã€‚') && !cleanLine.includes('ï¼') && !cleanLine.includes('ï¼Ÿ')) {
                    return { isHeading: true, level: 3, confidence: 0.4 };
                }
            }
            
            // åŸºäºå†…å®¹ç‰¹å¾çš„åˆ¤æ–­
            if (length < 20 && (
                /^[^\s,.]{3,15}$/.test(cleanLine) || // çº¯è¯ç»„
                /^[A-Z][a-z]+$/.test(cleanLine) || // è‹±æ–‡å•è¯
                cleanLine.match(/^[ä¸€-é¾Ÿ]{2,8}$/) // ä¸­æ–‡è¯ç»„
            )) {
                return { isHeading: true, level: 4, confidence: 0.3 };
            }
            
            return { isHeading: false, level: 0, confidence: 0 };
        }

        // å¢å¼ºçš„åˆ—è¡¨é¡¹æ£€æµ‹
        function isLikelyListItem(line, index, allLines, analysis) {
            const cleanLine = line.trim();
            
            // æ˜ç¡®çš„åˆ—è¡¨æ ‡è®°
            if (/^[â€¢Â·\-\*]\s/.test(cleanLine)) return true;
            if (/^\d+[.ã€]\s/.test(cleanLine)) return true;
            if (/^[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å][ã€]\s/.test(cleanLine)) return true;
            
            // åŸºäºä¸Šä¸‹æ–‡çš„æ™ºèƒ½åˆ¤æ–­
            const prevLine = index > 0 ? allLines[index - 1] : null;
            const nextLine = index < allLines.length - 1 ? allLines[index + 1] : null;
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯åˆ—è¡¨é¡¹ç‰¹å¾
            const isShortLine = cleanLine.length < 50;
            const startsWithClause = /^(åœ¨|å¯¹äº|æ ¹æ®|æŒ‰ç…§|é€šè¿‡|ä½¿ç”¨|é‡‡ç”¨)/.test(cleanLine);
            const hasVerbStart = /^(è¿›è¡Œ|å®ç°|è¾¾åˆ°|æä¾›|ç¡®ä¿|ä¿è¯|æ»¡è¶³)/.test(cleanLine);
            const hasNumberStart = /^\d+[\.ä¸ªåˆ†é’Ÿå¤©æœˆå¹´%]+/.test(cleanLine);
            
            // ä¸Šä¸‹æ–‡åˆ¤æ–­ï¼šå¦‚æœå‰åä¹Ÿæ˜¯ç±»ä¼¼çŸ­å¥ï¼Œå¯èƒ½æ˜¯åˆ—è¡¨
            const contextScore = calculateContextScore(line, prevLine, nextLine, allLines, index);
            
            return (isShortLine && (startsWithClause || hasVerbStart || hasNumberStart)) || 
                   contextScore > 0.7;
        }

        // è®¡ç®—ä¸Šä¸‹æ–‡å¾—åˆ†
        function calculateContextScore(currentLine, prevLine, nextLine, allLines, index) {
            let score = 0;
            
            // æ£€æŸ¥æ˜¯å¦åœ¨åˆ—è¡¨ç¯å¢ƒä¸­
            const beforeLines = allLines.slice(Math.max(0, index - 3), index);
            const afterLines = allLines.slice(index + 1, Math.min(allLines.length, index + 3));
            
            // æ£€æŸ¥å‰åæ˜¯å¦æœ‰å…¶ä»–åˆ—è¡¨é¡¹
            const hasListContext = [...beforeLines, ...afterLines].some(line => 
                /^[â€¢Â·\-\*]\s/.test(line) || 
                /^\d+[.ã€]\s/.test(line) ||
                /^[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å][ã€]\s/.test(line)
            );
            
            if (hasListContext) score += 0.4;
            
            // æ£€æŸ¥æ ¼å¼ä¸€è‡´æ€§
            if (prevLine && nextLine) {
                const currentHasNumber = /\d/.test(currentLine);
                const prevHasNumber = /\d/.test(prevLine);
                const nextHasNumber = /\d/.test(nextLine);
                
                if (currentHasNumber === prevHasNumber && currentHasNumber === nextHasNumber) {
                    score += 0.3;
                }
            }
            
            // æ£€æŸ¥é•¿åº¦ä¸€è‡´æ€§
            if (prevLine && nextLine) {
                const avgLength = (prevLine.length + nextLine.length) / 2;
                const lengthDiff = Math.abs(currentLine.length - avgLength) / avgLength;
                
                if (lengthDiff < 0.5) score += 0.3;
            }
            
            return Math.min(score, 1.0);
        }

        // æ™ºèƒ½æ®µè½è¯†åˆ«
        function isNewParagraph(line, prevLine, analysis) {
            const cleanLine = line.trim();
            const cleanPrev = prevLine.trim();
            
            // å¦‚æœå‰ä¸€è¡Œæ˜¯æ ‡é¢˜ï¼Œå¼€å§‹æ–°æ®µè½
            const prevIsHeading = detectHeadingLevel(cleanPrev, analysis).isHeading;
            if (prevIsHeading) return true;
            
            // å¦‚æœå‰ä¸€è¡Œæ˜¯åˆ—è¡¨é¡¹ï¼Œå¼€å§‹æ–°æ®µè½
            if (/^[â€¢Â·\-\*]\s/.test(cleanPrev) || /^\d+[.ã€]\s/.test(cleanPrev)) return true;
            
            // åŸºäºå†…å®¹è·³è·ƒåˆ¤æ–­
            const contentGap = calculateContentGap(cleanLine, cleanPrev);
            if (contentGap > 0.7) return true;
            
            // å¦‚æœå½“å‰è¡Œæ˜¯æ–°çš„ä¸»è¦è¯é¢˜å¼€å§‹
            if (cleanLine.length < 30 && !cleanLine.includes('ï¼Œ') && 
                (/^[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å]/.test(cleanLine) || cleanLine.match(/^[^\s,.]{3,10}$/))) {
                return true;
            }
            
            return false;
        }

        // è®¡ç®—å†…å®¹è·³è·ƒåº¦
        function calculateContentGap(line1, line2) {
            const words1 = extractKeywords(line1);
            const words2 = extractKeywords(line2);
            
            const commonWords = words1.filter(word => words2.includes(word));
            const totalWords = [...new Set([...words1, ...words2])].length;
            
            if (totalWords === 0) return 1.0;
            
            return 1 - (commonWords.length / totalWords);
        }

        // æå–å…³é”®è¯
        function extractKeywords(line) {
            return line
                .replace(/[ï¼Œã€‚ï¼ï¼Ÿï¼›ï¼š""''ï¼ˆï¼‰ã€ã€‘ã€\]\[\]]/g, ' ')
                .split(/\s+/)
                .filter(word => word.length > 1 && !/^\d+$/.test(word))
                .map(word => word.toLowerCase());
        }

        // å¢å¼ºçš„é‡ç‚¹å¥è¯†åˆ«
        function isImportantSentence(sentence, analysis, index, allLines) {
            // æ‰©å±•å…³é”®è¯åº“
            const keywords = {
                importance: ['é‡è¦', 'å…³é”®', 'æ ¸å¿ƒ', 'æ³¨æ„', 'è­¦å‘Š', 'åˆ‡è®°', 'è°¨è®°', 'å¿…é¡»', 'åŠ¡å¿…', 'è‡³å…³é‡è¦', 'å¿…ä¸å¯å°‘çš„', 'å¿…ä¸å¯å°‘çš„'],
                summary: ['æ€»ç»“', 'ç»“è®º', 'å°ç»“', 'æ¦‚è¿°', 'ç»¼ä¸Š', 'æ€»çš„æ¥è¯´', 'ç®€è€Œè¨€ä¹‹', 'ç»¼ä¸Šæ‰€è¿°', 'ç”±æ­¤å¯è§', 'æ€»ä½“æ¥è¯´'],
                features: ['ç‰¹ç‚¹', 'ç‰¹å¾', 'ä¼˜åŠ¿', 'ä¼˜ç‚¹', 'ç‰¹è‰²', 'æ˜¾è‘—', 'ç‹¬ç‰¹', 'åŒºåˆ«', 'ä¸åŒ', 'ä¼˜åŠ¿åœ¨äº'],
                suggestions: ['å»ºè®®', 'æ¨è', 'åº”è¯¥', 'æè®®', 'ä¸å¦¨', 'æœ€å¥½', 'æ¨èä½¿ç”¨', 'å»ºè®®é‡‡ç”¨', 'å»ºè®®ä½¿ç”¨', 'å¯ä»¥è€ƒè™‘'],
                emphasis: ['å°¤å…¶', 'ç‰¹åˆ«', 'æ ¼å¤–', 'æå…¶', 'éå¸¸', 'æœ€ä¸º', 'ä¸»è¦', 'é‡è¦', 'å…³é”®', 'æ ¸å¿ƒ'],
                transition: ['ä½†æ˜¯', 'ç„¶è€Œ', 'ä¸è¿‡', 'ç›¸å', 'åä¹‹', 'ä½†æ˜¯åŒæ—¶', 'ä¸è¿‡éœ€è¦'],
                causality: ['å› æ­¤', 'æ‰€ä»¥', 'å¯¼è‡´', 'å¼•èµ·', 'é€ æˆ', 'ç”±äº', 'å› ä¸º', 'ç”±äºæ­¤', 'ä¸ºæ­¤'],
                metrics: ['å¢é•¿', 'æå‡', 'ä¸‹é™', 'è¶…è¿‡', 'è¾¾åˆ°', 'çªç ´', 'å¢åŠ ', 'å‡å°‘', 'æ”¹å–„', 'æé«˜'],
                methods: ['æ–¹æ³•', 'é€”å¾„', 'æ‰‹æ®µ', 'æªæ–½', 'æ–¹æ¡ˆ', 'ç­–ç•¥', 'æŠ€å·§', 'åŠæ³•'],
                results: ['ç»“æœ', 'æ•ˆæœ', 'æˆæœ', 'æˆæœ', 'æ”¶è·', 'å®ç°', 'è¾¾åˆ°', 'å®Œæˆ']
            };
            
            // æ•°å­—å’Œå•ä½æ£€æµ‹
            const hasMetrics = /\d+\.?\d*\s*[%äº¿ä¸‡å…ƒç¾å…ƒä¸ªåˆ†é’Ÿå¤©æœˆå¹´å€]/.test(sentence);
            const hasRange = /\d+[-\~åˆ°è‡³]\d+/.test(sentence);
            const hasPercentage = /\d+[%ï¼…]/.test(sentence);
            
            // å¥å¼ç‰¹å¾æ£€æµ‹
            const isQuestion = sentence.includes('ï¼Ÿ') || sentence.includes('?');
            const isExclamation = sentence.includes('ï¼') || sentence.includes('!');
            const isDefinition = /[ï¼š:]/.test(sentence) && sentence.length < 40;
            const hasQuote = /["'""].*["'""]]/.test(sentence);
            const hasBookTitle = /ã€Š.*ã€‹/.test(sentence);
            const hasEmotion = /[ï¼!ï¼Ÿ?]$/.test(sentence);
            
            // å…³é”®è¯å¯†åº¦æ£€æµ‹
            const keywordCount = Object.values(keywords).reduce((count, category) => {
                return count + category.filter(keyword => sentence.includes(keyword)).length;
            }, 0);
            
            // é•¿åº¦å’Œç»“æ„æ£€æµ‹
            const isShortEmphasis = sentence.length >= 5 && sentence.length <= 20;
            const hasParallelStructure = /[å’Œä¸åŠä»¥åŠ]/.test(sentence);
            
            // ä¸Šä¸‹æ–‡é‡è¦æ€§æ£€æµ‹
            const contextImportance = calculateContextImportance(index, allLines);
            
            // ç»¼åˆè¯„åˆ†
            let score = 0;
            
            // å…³é”®è¯æƒé‡
            score += keywordCount * 0.15;
            
            // æ•°å­—å’Œåº¦é‡æƒé‡
            if (hasMetrics) score += 0.2;
            if (hasRange) score += 0.15;
            if (hasPercentage) score += 0.1;
            
            // å¥å¼æƒé‡
            if (isQuestion) score += 0.1;
            if (isExclamation) score += 0.15;
            if (isDefinition) score += 0.2;
            if (hasQuote) score += 0.1;
            if (hasBookTitle) score += 0.1;
            
            // ç»“æ„æƒé‡
            if (isShortEmphasis) score += 0.1;
            if (hasParallelStructure) score += 0.05;
            
            // ä¸Šä¸‹æ–‡æƒé‡
            score += contextImportance * 0.2;
            
            return score > 0.3; // é˜ˆå€¼åˆ¤æ–­
        }

        // è®¡ç®—ä¸Šä¸‹æ–‡é‡è¦æ€§
        function calculateContextImportance(index, allLines) {
            let importance = 0;
            
            // è¾¹ç•Œæ£€æŸ¥
            if (!allLines || allLines.length === 0 || index < 0 || index >= allLines.length) {
                return 0;
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯å¼€å¤´çš„é‡è¦ä¿¡æ¯
            if (index < 3) importance += 0.2;
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯ç»“å°¾çš„æ€»ç»“ä¿¡æ¯
            if (index > allLines.length - 5) importance += 0.15;
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«æ€»ç»“æ€§è¯æ±‡
            const currentLine = allLines[index];
            if (currentLine && typeof currentLine === 'string') {
                const summaryWords = ['æ€»ç»“', 'ç»“è®º', 'æ€»çš„æ¥è¯´', 'ç»¼ä¸Šæ‰€è¿°', 'æœ€ç»ˆ'];
                if (summaryWords.some(word => currentLine.includes(word))) {
                    importance += 0.3;
                }
            }
            
            return Math.min(importance, 0.5);
        }

        // æ£€æµ‹å¼•ç”¨æ–‡æœ¬
        function isQuoteText(line) {
            // ä¼˜å…ˆæ’é™¤æ•°å­—ç¼–å·çš„åˆ—è¡¨é¡¹ï¼ˆé¿å…è¯¯åˆ¤ä¸ºå¼•ç”¨ï¼‰
            if (/^[ç¬¬]?[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å\d]+[ã€.]/.test(line) || /^\d+[.ã€]/.test(line)) {
                return false;
            }
            
            // ä¸¥æ ¼æ£€æŸ¥å¼•ç”¨æ ‡è®°ï¼šå¿…é¡»åŒæ—¶å¼€å§‹å’Œç»“æŸä¸ºå¼•å·ï¼Œä¸”é•¿åº¦é€‚ä¸­
            const startsWithQuote = line.startsWith('"') || line.startsWith('"') || line.startsWith('ã€Œ');
            const endsWithQuote = line.endsWith('"') || line.endsWith('"') || line.endsWith('ã€');
            const isShortQuote = line.length < 100 && !line.includes('â€”â€”'); // æ’é™¤åŒ…å«ç ´æŠ˜å·çš„æ–‡æœ¬
            
            return line.startsWith('>') || 
                   (startsWithQuote && endsWithQuote && isShortQuote);
        }

        // æ ¼å¼åŒ–å¼•ç”¨
        function formatQuote(line, analysis) {
            // åªç§»é™¤æ˜æ˜¾çš„å¼•ç”¨æ ‡è®°ï¼Œä¸è¦å½±å“å…¶ä»–å­—ç¬¦
            let content = line.trim();
            content = content.replace(/^>/, '').trim(); // ç§»é™¤ >
            content = content.replace(/^[""Â«]/, '').replace(/[""Â»]$/, '').trim(); // ç§»é™¤å¼•å·
            return `> ${content}`;
        }

        // æ ¼å¼åŒ–åˆ—è¡¨é¡¹
        function formatListItem(line, analysis) {
            const cleanLine = line.trim();
            
            // ä¿æŒåŸæœ‰çš„åˆ—è¡¨æ ‡è®°
            if (/^[â€¢Â·\-\*]\s/.test(cleanLine)) {
                return cleanLine;
            }
            
            if (/^\d+[.ã€]\s/.test(cleanLine)) {
                return cleanLine;
            }
            
            if (/^[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å][ã€]\s/.test(cleanLine)) {
                return cleanLine;
            }
            
            // æ™ºèƒ½æ·»åŠ åˆ—è¡¨æ ‡è®°
            if (cleanLine.length < 50 && !cleanLine.includes('ã€‚')) {
                return `â€¢ ${cleanLine}`;
            }
            
            return cleanLine;
        }

        // æ ¼å¼åŒ–æ®µè½
        function formatParagraph(lines, analysis) {
            const combinedText = lines.join(' ');
            const sentences = splitIntoSentences(combinedText);
            
            return sentences.map(sentence => {
                const trimmed = sentence.trim();
                if (!trimmed) return '';
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯é‡è¦å¥å­
                if (isImportantSentence(trimmed, analysis, 0, [trimmed])) {
                    if (!trimmed.includes('**')) {
                        return `**${trimmed}**`;
                    }
                }
                
                return trimmed;
            }).filter(s => s).join('');
        }

        // æ™ºèƒ½åˆ†å¥
        function splitIntoSentences(text) {
            // ä¿ç•™æ ‡ç‚¹ç¬¦å·çš„åˆ†å¥
            const sentences = text.split(/([ã€‚ï¼ï¼Ÿï¼›])/).filter(s => s.trim());
            const result = [];
            
            for (let i = 0; i < sentences.length; i += 2) {
                const sentence = sentences[i];
                const punctuation = sentences[i + 1] || '';
                
                if (sentence.trim()) {
                    result.push((sentence + punctuation).trim());
                }
            }
            
            return result.length > 0 ? result : [text];
        }

        // æ¸…ç†å’Œä¼˜åŒ–Markdown
        function cleanMarkdown(markdown) {
            return markdown
                .replace(/ã€‚{2,}/g, 'ã€‚') // å¤šä¸ªå¥å·åˆå¹¶
                .replace(/ï¼{2,}/g, 'ï¼') // å¤šä¸ªæ„Ÿå¹å·åˆå¹¶
                .replace(/ï¼Ÿ{2,}/g, 'ï¼Ÿ') // å¤šä¸ªé—®å·åˆå¹¶
                .replace(/^([â€¢Â·\-\*])\s+/gm, '$1 ') // æ¸…ç†åˆ—è¡¨æ ¼å¼
                .replace(/\n#+\s*\n/g, '\n') // ç§»é™¤ç©ºçš„æ ‡é¢˜
                .trim();
        }

        function updatePreview() {
            const input = document.getElementById('textInput');
            const preview = document.getElementById('preview');
            preview.textContent = formatToMarkdown(input.value);
        }

        // æ˜¾ç¤ºæç¤ºçš„å‡½æ•°
        function showToast(message, duration = 2000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        function copyMarkdown() {
            const preview = document.getElementById('preview');
            const textarea = document.createElement('textarea');
            textarea.value = preview.textContent;
            document.body.appendChild(textarea);

            try {
                textarea.select();
                document.execCommand('copy');
                showToast('âœ¨ Markdownå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            } catch (err) {
                showToast('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            } finally {
                document.body.removeChild(textarea);
            }
        }

        function loadSampleData() {
            const sampleText = `æ™ºèƒ½æ–‡æœ¬æ ¼å¼åŒ–å·¥å…·ä½¿ç”¨æŒ‡å—
è¿™æ˜¯ä¸€ä¸ªå…¨æ–°å‡çº§çš„æ™ºèƒ½æ–‡æœ¬æ ¼å¼åŒ–å·¥å…·ï¼ŒåŸºäºå…ˆè¿›çš„è‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯ï¼Œèƒ½å¤Ÿå¸®ä½ å¿«é€Ÿå°†æ™®é€šæ–‡æœ¬è½¬æ¢ä¸ºè§„èŒƒçš„Markdownæ ¼å¼ã€‚

å·¥å…·çš„æ ¸å¿ƒä¼˜åŠ¿
å·¥å…·çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæ™ºèƒ½è¯†åˆ«å’Œè‡ªåŠ¨æ ¼å¼åŒ–ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡æ–‡æœ¬æ’ç‰ˆæ•ˆç‡ã€‚æ¨èç»å¸¸å¤„ç†æ–‡æ¡£çš„ç”¨æˆ·ä½¿ç”¨æ­¤å·¥å…·ï¼Œå¯ä»¥èŠ‚çœå¤§é‡æ’ç‰ˆæ—¶é—´ã€‚ç‰¹åˆ«æ³¨æ„ï¼šçŸ­å¥å’Œå¸¦ç¼–å·çš„æ–‡æœ¬æ›´å®¹æ˜“è¢«è¯†åˆ«ä¸ºæ ‡é¢˜ã€‚

ä¸»è¦åŠŸèƒ½ç‰¹æ€§

ä¸€ã€è‡ªåŠ¨è¯†åˆ«æ ‡é¢˜ç³»ç»Ÿ
å·¥å…·å…·å¤‡å¼ºå¤§çš„æ™ºèƒ½æ ‡é¢˜è¯†åˆ«èƒ½åŠ›ã€‚åŸºäºä¸Šä¸‹æ–‡åˆ†æå’Œæ¨¡å¼åŒ¹é…ï¼Œå·¥å…·èƒ½å¤Ÿå‡†ç¡®è¯†åˆ«å¤šçº§æ ‡é¢˜ï¼ŒåŒ…æ‹¬ï¼š
â€¢ æ•°å­—ç¼–å·æ ‡é¢˜ï¼ˆä¸€ã€äºŒã€ä¸‰ç­‰ï¼‰
â€¢ é˜¿æ‹‰ä¼¯æ•°å­—æ ‡é¢˜ï¼ˆ1ã€2ã€3ç­‰ï¼‰
â€¢ æ–¹æ‹¬å·åŒ…å›´çš„æ ‡é¢˜
â€¢ æ”¿ç­–æ–‡ä»¶å¼æ ‡é¢˜ï¼ˆå…³äºã€æŒ‰ç…§ç­‰ï¼‰

äºŒã€æ™ºèƒ½æ®µè½å¤„ç†
å·¥å…·ä¼šè‡ªåŠ¨åˆ†æå†…å®¹ç»“æ„ï¼Œæ™ºèƒ½åˆ¤æ–­æ®µè½è¾¹ç•Œã€‚é€šè¿‡è®¡ç®—å†…å®¹è·³è·ƒåº¦å’Œå…³é”®è¯é‡å åº¦ï¼Œå·¥å…·èƒ½å¤Ÿï¼š
â€¢ å‡†ç¡®åˆ†å‰²æ®µè½
â€¢ ä¿æŒè¯­ä¹‰è¿è´¯æ€§
â€¢ è‡ªåŠ¨ä¼˜åŒ–æ®µè½æ ¼å¼

ç¬¬ä¸€æ®µæ˜¯å®šä¹‰æ€§å¥å­
æ‰€è°“æ®µè½å¤„ç†ï¼Œå°±æ˜¯å°†æ–‡æœ¬å†…å®¹æŒ‰ç…§é€»è¾‘å…³ç³»è¿›è¡Œåˆç†çš„åˆ†ç»„å’Œåˆ†éš”ã€‚è¿™ä¸ªè¿‡ç¨‹éœ€è¦è€ƒè™‘è¯­ä¹‰è¿è´¯æ€§å’Œé€»è¾‘ç»“æ„ã€‚

ç¬¬äºŒæ®µæ˜¯è¯´æ˜æ€§å¥å­
æ®µè½å¤„ç†çš„å…³é”®åœ¨äºè¯†åˆ«å†…å®¹çš„é€»è¾‘è¾¹ç•Œï¼Œç¡®ä¿æ¯ä¸ªæ®µè½å†…éƒ¨å†…å®¹ç´§å¯†ç›¸å…³ï¼Œä¸åŒæ®µè½ä¹‹é—´æœ‰æ˜æ˜¾çš„é€»è¾‘è·³è·ƒã€‚

ä¸‰ã€é‡ç‚¹å†…å®¹æ™ºèƒ½æ ‡è¯†
ç³»ç»Ÿé‡‡ç”¨å¤šç»´åº¦æ™ºèƒ½ç®—æ³•è¯†åˆ«é‡è¦å†…å®¹ï¼š
â€¢ å…³é”®è¯æ£€æµ‹ï¼šé‡è¦ã€å…³é”®ã€å¿…é¡»ç­‰
â€¢ æ•°æ®æŒ‡æ ‡ï¼šåŒ…å«æ•°å­—å’Œå•ä½çš„å¥å­
â€¢ æ€»ç»“æ€§å†…å®¹ï¼šæ€»ç»“ã€ç»“è®ºã€æ€»çš„æ¥è¯´ç­‰
â€¢ å¼ºè°ƒæ€§è¯æ±‡ï¼šå°¤å…¶ã€ç‰¹åˆ«ã€éå¸¸ç­‰

ä½¿ç”¨å»ºè®®å’Œæœ€ä½³å®è·µ

1. ä¿æŒåŸå§‹ç»“æ„
â€¢ ä¿æŒåŸå§‹æ–‡æœ¬çš„åŸºæœ¬ç»“æ„
â€¢ é€‚å½“ä½¿ç”¨æ¢è¡Œå’Œåˆ†æ®µ
â€¢ é‡è¦å†…å®¹å¯ä»¥é€šè¿‡å…³é”®è¯æ ‡è®°

ä½†æ˜¯éœ€è¦æ³¨æ„
åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œç”¨æˆ·å¾€å¾€å¸Œæœ›å·¥å…·èƒ½å¤Ÿä¿æŒåŸæ–‡çš„æ®µè½ç»“æ„ã€‚

2. æ ‡é¢˜æ ¼å¼ä¼˜åŒ–
â€¢ ä½¿ç”¨æ•°å­—ç¼–å·æ ¼å¼ä¾¿äºè¯†åˆ«
â€¢ æ–¹æ‹¬å·åŒ…å›´çš„çŸ­å¥æ›´å®¹æ˜“è¢«è¯†åˆ«
â€¢ æ”¿ç­–æ–‡ä»¶å¯ç›´æ¥ä½¿ç”¨"å…³äº"å¼€å¤´

3. åˆ—è¡¨æ ¼å¼åŒ–
â€¢ ä½¿ç”¨"â€¢"ç¬¦å·å¼€å§‹åˆ—è¡¨é¡¹
â€¢ æ•°å­—ç¼–å·æ ¼å¼è‡ªåŠ¨è¯†åˆ«
â€¢ ä¸­æ–‡æ•°å­—ç¼–å·ï¼ˆä¸€ã€äºŒã€ä¸‰ï¼‰æ”¯æŒ

åºå·çš„åˆ†æ®µæµ‹è¯•
ç¬¬ä¸€æ®µå†…å®¹
ç¬¬äºŒæ®µå†…å®¹  
ç¬¬ä¸‰æ®µå†…å®¹
ç¬¬å››æ®µå†…å®¹
è¿™äº›éƒ½æ˜¯ç‹¬ç«‹çš„çŸ­å¥ï¼Œåº”è¯¥åˆ†æ®µæ˜¾ç¤ºã€‚

ä½¿ç”¨æ¡ˆä¾‹
ä¼ä¸šæŠ¥å‘Šå¤„ç†
æŠ€æœ¯æ–‡æ¡£æ•´ç†
ä¼šè®®çºªè¦æ ¼å¼åŒ–
å­¦æœ¯è®ºæ–‡æ’ç‰ˆ

ç»¼ä¸Šæ‰€è¿°
è¿™ä¸ªå·¥å…·çš„æ ¸å¿ƒä»·å€¼åœ¨äºå°†ç¹é‡çš„æ–‡æ¡£æ ¼å¼åŒ–å·¥ä½œè‡ªåŠ¨åŒ–ï¼Œè®©ç”¨æˆ·ä¸“æ³¨äºå†…å®¹åˆ›ä½œè€Œéæ’ç‰ˆç»†èŠ‚ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§é‡æ–‡æ¡£æ—¶ï¼Œå…¶æ•ˆç‡æå‡éå¸¸æ˜¾è‘—ã€‚`;
            
            document.getElementById('textInput').value = sampleText;
            updatePreview();
        }

        function loadSimpleDemo() {
            const simpleDemo = `AIæ™ºèƒ½æ–‡æ¡£å¤„ç†
è¿™æ˜¯ä¸€ä¸ªé‡ç‚¹å†…å®¹æµ‹è¯•ã€‚ç‰¹åˆ«æ³¨æ„ï¼šå·¥å…·ä¼šè‡ªåŠ¨è¯†åˆ«é‡è¦ä¿¡æ¯å¹¶è¿›è¡Œæ ‡è®°ã€‚æ€»ç»“æ¥è¯´ï¼Œæ™ºèƒ½åŒ–æ˜¯æ ¸å¿ƒä¼˜åŠ¿ã€‚

ä¸»è¦ç‰¹ç‚¹
ç¬¬ä¸€æ®µåŠŸèƒ½æè¿°
è¿™æ˜¯ç¬¬ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼Œé€šå¸¸åŒ…å«è¯¦ç»†çš„åŠŸèƒ½è¯´æ˜å’Œå®ç°åŸç†ã€‚

ç¬¬äºŒæ®µæ€§èƒ½ç‰¹ç‚¹
æ€§èƒ½ä¼˜åŒ–æ˜¯å·¥å…·çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œé€šè¿‡ç®—æ³•ä¼˜åŒ–å¤§å¹…æå‡å¤„ç†é€Ÿåº¦ã€‚

ç¬¬ä¸‰æ®µç”¨æˆ·ä½“éªŒ
ç”¨æˆ·ä½“éªŒæ˜¯äº§å“çš„ç”Ÿå‘½çº¿ï¼Œä¼˜ç§€çš„ç•Œé¢è®¾è®¡å’Œäº¤äº’é€»è¾‘è‡³å…³é‡è¦ã€‚

é‡è¦å»ºè®®
â€¢ ä¿æŒåŸå§‹æ–‡æœ¬çš„åŸºæœ¬ç»“æ„
â€¢ é€‚å½“ä½¿ç”¨æ¢è¡Œå’Œåˆ†æ®µ
â€¢ é‡è¦å†…å®¹å¯ä»¥é€šè¿‡å…³é”®è¯æ ‡è®°

ç¬¬ä¸€æ®µæ“ä½œæŒ‡å—
ç”¨æˆ·åœ¨æ“ä½œæ—¶åº”è¯¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œã€‚é¦–å…ˆéœ€è¦ä¸Šä¼ æˆ–ç²˜è´´æ–‡æœ¬å†…å®¹ã€‚

ç¬¬äºŒæ®µé¢„è§ˆåŠŸèƒ½
é¢„è§ˆåŠŸèƒ½å¯ä»¥è®©ç”¨æˆ·å®æ—¶æŸ¥çœ‹æ ¼å¼åŒ–æ•ˆæœï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚

ç¬¬ä¸‰æ®µå¤åˆ¶å¯¼å‡º
å®Œæˆæ ¼å¼åŒ–åï¼Œç”¨æˆ·å¯ä»¥ä¸€é”®å¤åˆ¶ç»“æœæˆ–å¯¼å‡ºä¸ºæ–‡ä»¶ã€‚

æ³¨æ„äº‹é¡¹
å› æ­¤ï¼Œä½¿ç”¨è¿™ä¸ªå·¥å…·å¯ä»¥æ˜¾è‘—æå‡å·¥ä½œæ•ˆç‡ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§é‡æ–‡æ¡£æ—¶ï¼Œæ•ˆæœæ›´åŠ æ˜æ˜¾ã€‚`;
            
            document.getElementById('textInput').value = simpleDemo;
            updatePreview();
        }

        function clearInput() {
            document.getElementById('textInput').value = '';
            document.getElementById('preview').textContent = '';
        }

        // ç›‘å¬è¾“å…¥å˜åŒ–
        document.getElementById('textInput').addEventListener('input', updatePreview);

        // åˆå§‹åŠ è½½ç¤ºä¾‹æ•°æ®
        loadSampleData();
    </script>
</body>
</html>