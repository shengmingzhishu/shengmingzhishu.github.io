<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å¾®ä¿¡Markdownè½¬æ¢å™¨">
    <title>MDè½¬å…¬ä¼—å·HTMLå·¥å…·</title>
    <!-- Markdownè§£æå’Œæ ·å¼ -->
    <script src="../js/marked.min.js"></script>
    <link rel="stylesheet" href="../css/github.min.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            box-sizing: border-box;
        }

        .container {
            display: flex;
            gap: 20px;
            flex: 1;
        }

        .editor-box {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        textarea {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: none;
            font-family: 'Courier New', monospace;
        }

        #preview {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow-y: auto;
            background: #fff;
        }

        .copy-btn {
            position: fixed;
            bottom: 20px;
            right: 135px;
            padding: 8px 15px;
            background: #07c160;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease, opacity 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0.3;
        }

        .copy-btn:hover {
            background: #06ad56;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            opacity: 1;
        }

        .copy-btn::before {
            content: "ğŸ“‹";
            font-size: 16px;
        }

        /* å¾®ä¿¡å…¬ä¼—å·æ ·å¼ä¼˜åŒ– */
        .wx-content {
            line-height: 1.6;
            font-size: 16px;
            color: #333;
        }
        
        .wx-content img {
            max-width: 100%!important;
            height: auto!important;
        }

        /* è¿”å›ä¸»é¡µæŒ‰é’®æ ·å¼ */
        .back-home {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 8px 15px;
            background: #ffd93d;
            color: #333;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease, opacity 0.3s ease;
            z-index: 1000;
            opacity: 0.7;
        }

        .back-home:hover {
            background: #ffc107;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            opacity: 0.9;
        }

        .back-home::before {
            content: "ğŸ ";
            font-size: 16px;
        }

        /* æµ®åŠ¨æç¤ºæ ·å¼ */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #FFD1DC, #FFB5E8);
            color: #444;
            padding: 12px 24px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toast.show { opacity: 1; }
        .toast::before { content: "ğŸˆ"; }

        /* æ ·å¼é€‰æ‹©å™¨ç²˜æ€§åŒºåŸŸ */
        .style-sticky-container {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.98);
            padding: 15px;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 100;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            margin: -15px -15px 15px -15px;
        }

        /* æ ·å¼é€‰æ‹©å™¨ */
        .style-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            min-width: 200px;
            backdrop-filter: blur(10px);
        }

        .style-selector h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 14px;
            font-weight: 600;
        }

        .style-option {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 8px 0;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .style-option:hover {
            background-color: #f5f5f5;
        }

        .style-option input[type="checkbox"] {
            margin: 0;
        }

        .style-option label {
            margin: 0;
            cursor: pointer;
            font-size: 13px;
            color: #555;
        }

         

        /* æ®µè½å—èƒŒæ™¯é€‰æ‹©å™¨çš„é¢œè‰²é¢„è§ˆ */
        #style-block-background option[value="none"] {
            background-color: #ffffff;
            color: #333;
        }

        /* æ ·å¼é€‰æ‹©åŒºåŸŸçš„æ”¹è¿›å¸ƒå±€ */
        .style-section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .style-section:last-child {
            margin-bottom: 0;
            border-bottom: none;
            padding-bottom: 0;
        }

        .style-section-title {
            font-size: 14px;
            font-weight: 600;
            color: #2D3748;
            margin: 0 0 12px 0;
            padding: 0;
            line-height: 1.2;
        }

        .style-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
        }

        .style-controls label {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 13px;
            color: #4A5568;
            line-height: 1.2;
            white-space: nowrap;
        }

        .style-controls select {
            padding: 4px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            line-height: 1.2;
        }

        .style-controls input[type="checkbox"] {
            margin: 0 5px 0 0;
            line-height: 1;
        }

        .style-controls input[type="radio"] {
            margin: 0 3px 0 0;
            line-height: 1;
        }

        /* å“åº”å¼æ ·å¼ - ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            .style-sticky-container {
                position: sticky;
                top: 0;
                padding: 12px 10px;
                margin: -12px -10px 12px -10px;
                border-radius: 0 0 6px 6px;
            }
            
            .style-controls {
                gap: 8px !important;
            }
            
            .style-section-title {
                font-size: 13px !important;
                margin-bottom: 8px !important;
            }
            
            .style-controls label {
                font-size: 11px !important;
            }
            
            .style-controls select {
                width: 120px !important;
                font-size: 11px !important;
                padding: 2px !important;
            }
        }

        
        #style-block-background option[value="#f8f9fa"] {
            background-color: #f8f9fa;
            color: #333;
        }
        #style-block-background option[value="#f5f5f5"] {
            background-color: #f5f5f5;
            color: #333;
        }
        #style-block-background option[value="#faf6ed"] {
            background-color: #faf6ed;
            color: #333;
        }
        #style-block-background option[value="#e8f4f8"] {
            background-color: #e8f4f8;
            color: #333;
        }
        #style-block-background option[value="#f0f8fb"] {
            background-color: #f0f8fb;
            color: #333;
        }
        #style-block-background option[value="#fdf2f8"] {
            background-color: #fdf2f8;
            color: #333;
        }
        #style-block-background option[value="#f5fafe"] {
            background-color: #f5fafe;
            color: #333;
        }
        #style-block-background option[value="#faf0f5"] {
            background-color: #faf0f5;
            color: #333;
        }
        #style-block-background option[value="#eaf6fa"] {
            background-color: #eaf6fa;
            color: #333;
        }
        #style-block-background option[value="#e6e2d3"] {
            background-color: #e6e2d3;
            color: #222;
        }
        #style-block-background option[value="#d4e6f1"] {
            background-color: #d4e6f1;
            color: #222;
        }
        #style-block-background option[value="#f2e6e8"] {
            background-color: #f2e6e8;
            color: #222;
        }
        #style-block-background option[value="#d5e8d4"] {
            background-color: #d5e8d4;
            color: #222;
        }
        #style-block-background option[value="#e1d5e7"] {
            background-color: #e1d5e7;
            color: #222;
        }
        #style-block-background option[value="#f9e6d8"] {
            background-color: #f9e6d8;
            color: #222;
        }
    </style>
</head>
<body>
    

    <a href="../index.html" class="back-home"> è¿”å›ä¸»é¡µ</a>
    <div class="container">
        <div class="editor-box">
            <!-- ç²˜æ€§æ ·å¼è®¾ç½®åŒºåŸŸ -->
            <div class="style-sticky-container">
                <div class="style-section">
                    <h3 class="style-section-title">æ ‡é¢˜æ ·å¼åŒºåŸŸ</h3>
                    <div class="style-controls">
                        <label>H1é£æ ¼ï¼š
                    <!-- ä¸»æ ·å¼é€‰æ‹© -->
                    <select id="style-select" style="width: 200px;" onchange="changeHtml(this.value)">
                        <option value="style-1">01 ç®€çº¦é«˜çº§é£</option>
                        <option value="style-2">02 å¤å¤è¡¬çº¿é£</option>
                        <option value="style-3">03 å¤å¤æ‰“å­—æœºé£</option>
                        <option value="style-4">04 æ¸…æ–°æ²»æ„ˆé£</option>
                        <option value="style-5">05 å¤§èƒ†æ’è‰²é£</option>
                        <option value="style-6">06 æç®€å‡ ä½•é£</option>
                        <option value="style-7">07 è½»å¥¢è´¨æ„Ÿé£</option>
                        <option value="style-8">08 æ—¥ç³»ç®€çº¦é£</option>
                        <option value="style-9">09 æš—é»‘é…·æ„Ÿé£</option>
                    </select>
                </label>

                <!-- H1æ ‡é¢˜å¯¹é½æ–¹å¼ -->
                <label>H1å¯¹é½ï¼š
                    <input type="radio" name="title-align" value="left" onclick="changeHtml(this.value)">å·¦
                    <input type="radio" name="title-align" value="center" onclick="changeHtml(this.value)" checked>ä¸­
                    <input type="radio" name="title-align" value="right" onclick="changeHtml(this.value)">å³
                </label>
 
                <label>H3-H6é£æ ¼ï¼š
                    <!-- H3-H6æ ‡é¢˜æ ·å¼é€‰æ‹© -->
                    <select id="heading-style-select" style="width: 200px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;" onChange="changeHtml(this.value)">
                        <option value="heading-style-1">H3-H6æ ·å¼1ï¼šæç®€ç°ä»£</option>
                        <option value="heading-style-2">H3-H6æ ·å¼2ï¼šä¼˜é›…è¡¬çº¿</option>
                        <option value="heading-style-3">H3-H6æ ·å¼3ï¼šæ¸å˜æ–‡å­—</option>
                        <option value="heading-style-4">H3-H6æ ·å¼4ï¼šå¤å¤å°åˆ·</option>
                        <option value="heading-style-5">H3-H6æ ·å¼5ï¼šç§‘æŠ€æ„Ÿ</option>
                        <option value="heading-style-6">H3-H6æ ·å¼6ï¼šç²—ä½“å¼ºè°ƒ</option>
                        <option value="heading-style-7">H3-H6æ ·å¼7ï¼šä¸‹åˆ’çº¿è£…é¥°</option>
                        <option value="heading-style-8">H3-H6æ ·å¼8ï¼šè¾¹æ¡†åŒ…å›´</option>
                        <option value="heading-style-9">H3-H6æ ·å¼9ï¼šæ‰‹å†™é£æ ¼</option>
                        <option value="heading-style-10">H3-H6æ ·å¼10ï¼šé˜´å½±ç«‹ä½“</option>
                    </select>
                </label>

                <!-- H3-H6ç‹¬ç«‹å¯¹é½æ–¹å¼ -->
                <label>H3-H6å¯¹é½ï¼š
                    <input type="radio" name="h3h6-align" value="left" onclick="changeHtml(this.value)">å·¦
                    <input type="radio" name="h3h6-align" value="center" onclick="changeHtml(this.value)" checked>ä¸­
                    <input type="radio" name="h3h6-align" value="right" onclick="changeHtml(this.value)">å³
                </label>

                <!-- H2é£æ ¼é€‰æ‹©ï¼ˆåŒH1é£æ ¼é€‰é¡¹ï¼‰ -->
                <label>H2é£æ ¼ï¼š
                    <select id="h2-style-select" style="width: 200px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;" onChange="changeHtml(this.value)">
                        <option value="style-1">H2æ ·å¼1ï¼šç®€çº¦é«˜çº§é£</option>
                        <option value="style-2">H2æ ·å¼2ï¼šå¤å¤è¡¬çº¿é£</option>
                        <option value="style-3">H2æ ·å¼3ï¼šå¤å¤æ‰“å­—æœºé£</option>
                        <option value="style-4">H2æ ·å¼4ï¼šæ¸…æ–°æ²»æ„ˆé£</option>
                        <option value="style-5">H2æ ·å¼5ï¼šå¤§èƒ†æ’è‰²é£</option>
                        <option value="style-6">H2æ ·å¼6ï¼šæç®€å‡ ä½•é£</option>
                        <option value="style-7">H2æ ·å¼7ï¼šè½»å¥¢è´¨æ„Ÿé£</option>
                        <option value="style-8">H2æ ·å¼8ï¼šæ—¥ç³»ç®€çº¦é£</option>
                        <option value="style-9">H2æ ·å¼9ï¼šæš—é»‘é…·æ„Ÿé£</option>
                    </select>
                </label>

                <!-- H2ç‹¬ç«‹å¯¹é½æ–¹å¼ -->
                <label>H2å¯¹é½ï¼š
                    <input type="radio" name="h2-align" value="left" onclick="changeHtml(this.value)">å·¦
                    <input type="radio" name="h2-align" value="center" onclick="changeHtml(this.value)" checked>ä¸­
                    <input type="radio" name="h2-align" value="right" onclick="changeHtml(this.value)">å³
                </label>

                </div>
                </div>

                <div class="style-section">
                    <h3 class="style-section-title">å¼•ç”¨è®¾ç½®åŒºåŸŸ</h3>
                    <div class="style-controls">
                        <label>å¼•ç”¨é£æ ¼ï¼š
                            <select id="quote-style-select" style="width: 180px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;" onChange="changeHtml(this.value)">
                                <option value="quote-style-1">åŸºç¡€å¼•ç”¨ï¼ˆç®€æ´æ¸…æ™°ï¼‰</option>
                                <option value="quote-style-2">å¼ºè°ƒå¼•ç”¨ï¼ˆçªå‡ºé‡ç‚¹ï¼‰</option>
                                <option value="quote-style-3">ç»å…¸å¼•ç”¨ï¼ˆå·¦ä¾§è¾¹æ¡†ï¼‰</option>
                                <option value="quote-style-4">æ¸©é¦¨æç¤ºï¼ˆæŸ”å’Œæé†’ï¼‰</option>
                                <option value="quote-style-8">è­¦å‘Šå¼•ç”¨ï¼ˆçº¢è‰²è­¦ç¤ºï¼‰</option>
                                <option value="quote-style-9">å±…ä¸­å¼•ç”¨ï¼ˆå±…ä¸­å¼ºè°ƒï¼‰</option>
                                <option value="quote-style-10">èƒŒæ™¯å¼•ç”¨ï¼ˆæµ…è‰²èƒŒæ™¯ï¼‰</option>
                                <option value="quote-style-11">è¾¹æ¡†å¼•ç”¨ï¼ˆå½©è‰²è¾¹æ¡†ï¼‰</option>
                                <option value="quote-style-13">å¼•å·å¼•ç”¨ï¼ˆç»å…¸å¼•å·ï¼‰</option>
                                <option value="quote-style-14">é¦–å­—å¼•ç”¨ï¼ˆé¦–å­—ä¸‹æ²‰ï¼‰</option>
                                <option value="quote-style-15">æ¸å˜å¼•ç”¨ï¼ˆå½©è‰²æ¸å˜ï¼‰</option>
                            </select>
                        </label>

                        <label>å¼•ç”¨ç¬¦å·ï¼š
                            <select id="quote-symbol-select" style="width: 180px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;" onChange="changeHtml(this.value)">
                                <option value="symbol-0">æ— ç¬¦å·</option>
                                <option value="symbol-1">ğŸ’¡ æç¤º</option>
                                <option value="symbol-2">âš ï¸ è­¦å‘Š</option>
                                <option value="symbol-3">ğŸ“Œ é‡ç‚¹</option>
                                <option value="symbol-4">âœ… æˆåŠŸ</option>
                                <option value="symbol-5">ğŸ“– å¼•ç”¨</option>
                                <option value="symbol-6">ğŸ¯ ç›®æ ‡</option>
                                <option value="symbol-7">âœ¨ äº®ç‚¹</option>
                                <option value="symbol-8">ğŸ“ ç¬”è®°</option>
                                <option value="symbol-9">ğŸ’ ç²¾å</option>
                                <option value="symbol-10">ğŸ”¥ çƒ­é—¨</option>
                            </select>
                        </label>

                        <label>å¼•ç”¨å¯¹é½ï¼š
                            <input type="radio" name="quote-align" value="left" onclick="changeHtml(this.value)">å·¦
                            <input type="radio" name="quote-align" value="center" onclick="changeHtml(this.value)" checked>ä¸­
                            <input type="radio" name="quote-align" value="right" onclick="changeHtml(this.value)">å³
                        </label>

                        <label>å¼•ç”¨å­—ä½“ï¼š
                            <select id="quote-font-select" style="width: 160px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;" onChange="changeHtml(this.value)">
                                <option value="quote-font-1">é»˜è®¤å­—ä½“</option>
                                <option value="quote-font-2" style="font-family: SimSun, serif;">ä»¿å®‹ï¼ˆæ­£å¼ï¼‰</option>
                                <option value="quote-font-3" style="font-family: KaiTi, serif;">æ¥·ä½“ï¼ˆé›…è‡´ï¼‰</option>
                                <option value="quote-font-4" style="font-family: Microsoft YaHei, sans-serif;">å¾®è½¯é›…é»‘ï¼ˆç°ä»£ï¼‰</option>
                                <option value="quote-font-5" style="font-family: PingFang SC, sans-serif;">è‹¹æ–¹ï¼ˆæ´»æ³¼ï¼‰</option>
                                <option value="quote-font-6" style="font-family: LiSu, cursive;">éš¶ä¹¦ï¼ˆå¤éŸµï¼‰</option>
                                <option value="quote-font-7" style="font-family: YouYuan, sans-serif;">å¹¼åœ†ï¼ˆæ¸©é¦¨ï¼‰</option>
                                <option value="quote-font-8" style="font-family: FangSong, serif;">ä»¿å®‹ï¼ˆå¤å¤ï¼‰</option>
                                <option value="quote-font-9" style="font-family: Tahoma, sans-serif;">Tahomaï¼ˆæ¸…æ™°ï¼‰</option>
                                <option value="quote-font-10" style="font-family: Arial, sans-serif;">Arialï¼ˆç®€æ´ï¼‰</option>
                                <option value="quote-font-11" style="font-family: Times New Roman, serif;">Times New Romanï¼ˆç»å…¸ï¼‰</option>
                                <option value="quote-font-12" style="font-family: Georgia, serif;">Georgiaï¼ˆä¼˜é›…ï¼‰</option>
                            </select>
                        </label>

                        <label>å¼•ç”¨ç¼©è¿›ï¼š
                            <input type="checkbox" id="quote-indent" style="margin-left: 10px;">å¯ç”¨é¦–è¡Œç¼©è¿›
                        </label>

                        <label>å¼•ç”¨é˜´å½±ï¼š
                            <input type="checkbox" id="quote-shadow" style="margin-left: 10px;">å¯ç”¨é˜´å½±
                        </label>

                        <label>å¼•ç”¨æ–œä½“ï¼š
                            <input type="checkbox" id="quote-italic" style="margin-left: 10px;">å¯ç”¨æ–œä½“
                        </label>

                        <label>å¼•ç”¨å­—å·ï¼š
                            <select id="quote-font-size-select" style="width: 100px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;" onChange="changeHtml(this.value)">
                                <option value="14px">14px</option>
                                <option value="16px" selected>16pxï¼ˆé»˜è®¤ï¼‰</option>
                                <option value="18px">18px</option>
                            </select>
                        </label>

                        <label>å¼•ç”¨åœ†è§’ï¼š
                            <input type="checkbox" id="quote-border-radius" style="margin-left: 10px;">å¯ç”¨8pxåœ†è§’
                        </label>
                    </div>
                </div>

                <div class="style-section">
                    <h3 class="style-section-title">æ®µè½è®¾ç½®åŒºåŸŸ</h3>
                    <div class="style-controls">
                        <label>æ®µè½å­—ä½“ï¼š  
                    <!-- æ®µè½å­—ä½“é£æ ¼é€‰æ‹©ï¼ˆç»Ÿä¸€æ§åˆ¶å­—ä½“ã€å­—å·ã€è¡Œé«˜ã€é¦–è¡Œç¼©è¿›ç­‰ï¼‰ -->
                    <select id="template-style-select" style="width: 220px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;" onChange="changeHtml(this.value)">
                        <option value="template-style-1" style="font-family: 'Microsoft YaHei', sans-serif;">å¾®è½¯é›…é»‘ï¼ˆé€šç”¨å­—ä½“ï¼‰</option>
                        <option value="template-style-2" style="font-family: 'SimSun', serif;">ä»¿å®‹ï¼ˆæ­£å¼æ–‡ç« ï¼‰</option>
                        <option value="template-style-3" style="font-family: 'KaiTi', serif;">æ¥·ä½“ï¼ˆå­¦æœ¯ä¸¥è°¨ï¼‰</option>
                        <option value="template-style-4" style="font-family: 'LiSu', cursive;">éš¶ä¹¦ï¼ˆå¤éŸµé£é›…ï¼‰</option>
                        <option value="template-style-5" style="font-family: 'YouYuan', sans-serif;">å¹¼åœ†ï¼ˆæ¸©é¦¨å¯çˆ±ï¼‰</option>
                        <option value="template-style-6" style="font-family: 'FangSong', serif;">ä»¿å®‹ï¼ˆå¤å¤æ€€æ—§ï¼‰</option>
                        <option value="template-style-7" style="font-family: 'PingFang SC', sans-serif;">è‹¹æ–¹ï¼ˆæ´»æ³¼ç°ä»£ï¼‰</option>
                        <option value="template-style-8" style="font-family: 'Helvetica Neue', sans-serif;">Helveticaï¼ˆç§‘æŠ€æ„Ÿï¼‰</option>
                        <option value="template-style-9" style="font-family: 'Comic Sans MS', cursive;">Comic Sansï¼ˆæ‰‹å†™é£æ ¼ï¼‰</option>
                        <option value="template-style-10" style="font-family: 'Arial', sans-serif;">Arialï¼ˆå•†åŠ¡ç®€æ´ï¼‰</option>
                        <option value="template-style-11" style="font-family: 'Georgia', serif;">Georgiaï¼ˆä¼˜é›…è¡¬çº¿ï¼‰</option>
                        <option value="template-style-12" style="font-family: 'Times New Roman', serif;">Timesï¼ˆç»å…¸æ­£å¼ï¼‰</option>
                        <option value="template-style-13" style="font-family: 'Courier New', monospace;">Courierï¼ˆç­‰å®½ä»£ç ï¼‰</option>
                        <option value="template-style-14" style="font-family: 'Trebuchet MS', sans-serif;">Trebuchetï¼ˆç°ä»£ç®€æ´ï¼‰</option>
                        <option value="template-style-15" style="font-family: 'Verdana', sans-serif;">Verdanaï¼ˆæ¸…æ™°æ˜“è¯»ï¼‰</option>
                        <option value="template-style-16" style="font-family: 'Impact', sans-serif;">Impactï¼ˆç²—ä½“å¼ºè°ƒï¼‰</option>
                        <option value="template-style-17" style="font-family: 'Palatino', serif;">Palatinoï¼ˆæ–‡è‰ºå¤å¤ï¼‰</option>
                        <option value="template-style-18" style="font-family: 'Garamond', serif;">Garamondï¼ˆç»å…¸ä¹¦ç±ï¼‰</option>
                        <option value="template-style-19" style="font-family: 'Baskerville', serif;">Baskervilleï¼ˆæ‚å¿—ç²¾è‡´ï¼‰</option>
                        <option value="template-style-20" style="font-family: 'Futura', sans-serif;">Futuraï¼ˆå‡ ä½•ç°ä»£ï¼‰</option>
                    </select>
                </label>

                <label>æ®µè½å—é˜´å½±ï¼š
                    <input type="checkbox" id="enable-block-shadow" style="margin-left: 10px;">å¯ç”¨é˜´å½±
                </label>

                <label>æ®µè½å—é¦–è¡Œç¼©è¿›ï¼š
                    <input type="checkbox" id="enable-block-indent" style="margin-left: 10px;">å¯ç”¨ç¼©è¿›
                </label>

                <label>æ®µè½å—èƒŒæ™¯ï¼š
                    <select id="style-block-background" style="width: 200px; padding: 4px; border: 1px solid #ddd; border-radius: 4px;" onChange="changeHtml(this.value)">
                        <option value="none">æ— èƒŒæ™¯</option>
                        <option value="#f8f9fa">è±¡ç‰™ç™½ï¼ˆæŸ”å’Œä¸åˆºçœ¼ï¼‰</option>
                        <option value="#f5f5f5">ç±³ç™½ï¼ˆæ¸©æš–è´¨æ„Ÿï¼‰</option>
                        <option value="#faf6ed">æµ…ç±³é»„ï¼ˆæŠ¤çœ¼æŸ”å’Œï¼‰</option>
                        <option value="#e8f4f8">æ·¡å¤©è“ï¼ˆæ¸…æ–°é€æ°”ï¼‰</option>
                        <option value="#f0f8fb">æµ…é’è“ï¼ˆå†·é™èˆ’é€‚ï¼‰</option>
                        <option value="#fdf2f8">æŸ”ç²‰è‰²ï¼ˆæ¸©é¦¨æ–‡è‰ºï¼‰</option>
                        <option value="#f5fafe">å†°è“è‰²ï¼ˆç®€çº¦é«˜çº§ï¼‰</option>
                        <option value="#faf0f5">æµ…ç´«ç°ï¼ˆé›…è‡´å°ä¼—ï¼‰</option>
                        <option value="#eaf6fa">è–„è·ç»¿ï¼ˆæ¸…çˆ½æŠ¤çœ¼ï¼‰</option>
                        <option value="#e6e2d3">æš–ç±³è‰²ï¼ˆæ¸©æ¶¦åšé‡ï¼‰</option>
                        <option value="#d4e6f1">æ¹–æ°´è“ï¼ˆæ²‰ç¨³æ¸…æ–°ï¼‰</option>
                        <option value="#f2e6e8">è±†æ²™ç²‰ï¼ˆæ¸©æŸ”å¤å¤ï¼‰</option>
                        <option value="#d5e8d4">é’æŸ ç»¿ï¼ˆé²œæ´»æŠ¤çœ¼ï¼‰</option>
                        <option value="#e1d5e7">è–°è¡£è‰ç´«ï¼ˆé›…è‡´æŸ”å’Œï¼‰</option>
                        <option value="#f9e6d8">æµ…æ©˜è‰²ï¼ˆæ¸©æš–æ´»åŠ›ï¼‰</option>
                    </select>
                </label>

                <label>æ®µè½å—åœ†è§’ï¼š
                    <input type="checkbox" id="enable-block-radius" style="margin-left: 10px;" onchange="changeHtml(this.checked)">å¯ç”¨8pxåœ†è§’
                </label>
                    </div>
                </div>
            </div>
            <!-- åŠŸèƒ½è¯´æ˜ -->
            <div style="margin-bottom: 10px; padding: 8px; background-color: #f0f9ff; border-radius: 6px; font-size: 12px; color: #0369a1;">
                <strong>åŠŸèƒ½è¯´æ˜ï¼š</strong>
                æ ‡é¢˜ç³»ç»Ÿåˆ†ä¸ºä¸‰ä¸ªç‹¬ç«‹æ¿å—ï¼šH1æ ‡é¢˜æ”¯æŒ9ç§é£æ ¼å’Œç‹¬ç«‹å¯¹é½ï¼ŒH2æ ‡é¢˜æ”¯æŒH1é£æ ¼çš„9ç§æ ·å¼å’Œç‹¬ç«‹å¯¹é½ï¼ŒH3-H6æ ‡é¢˜æ”¯æŒ10ç§æ ·å¼å’Œç‹¬ç«‹å¯¹é½ï¼›æ®µè½å­—ä½“é£æ ¼æ”¯æŒ20ç§ç»å…¸æ’ç‰ˆé£æ ¼ï¼Œå¼•ç”¨å†…å®¹ï¼ˆ>å¼€å¤´çš„æ–‡æœ¬ï¼‰æ”¯æŒ11ç§å¼•ç”¨é£æ ¼ã€16ç§å¼•ç”¨ç¬¦å·ã€3ç§å¯¹é½æ–¹å¼ï¼Œæ®µè½å—æ”¯æŒé˜´å½±ã€ç¼©è¿›ã€èƒŒæ™¯ã€åœ†è§’ç­‰4ç§ç‹¬ç«‹è®¾ç½®ï¼ˆæŒ‰ç©ºè¡Œåˆ†éš”çš„çœŸå®æ®µè½ï¼‰ï¼Œå¼•ç”¨æ–°å¢å­—ä½“ã€é¦–è¡Œç¼©è¿›ã€é˜´å½±ã€æ–œä½“ã€å­—å·ã€åœ†è§’ç­‰6ä¸ªç»´åº¦æ§åˆ¶ï¼Œæ”¯æŒå›¾ç‰‡æ‹–æ‹½ä¸Šä¼ å’Œç½‘ç»œURLæ·»åŠ åŠŸèƒ½
            </div>
            
            <!-- å›¾ç‰‡ä¸Šä¼ å’Œé¢„è§ˆåŠŸèƒ½åŒºåŸŸ -->
            <div style="margin-bottom: 15px; padding: 12px; border: 1px solid #e1e5e9; border-radius: 8px; background-color: #f8f9fa;">
                <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px; flex-wrap: wrap;">
                    <button id="pick-images-btn" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow" style="background-color: #007bff; border: none; cursor: pointer;">
                        ğŸ“ é€‰æ‹©å›¾ç‰‡
                    </button>
                    <button id="insert-image-btn" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow" style="background-color: #28a745; border: none; cursor: pointer;">
                        ğŸ“· æ’å…¥å›¾ç‰‡
                    </button>
                    <button id="clear-images-btn" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow" style="background-color: #dc3545; border: none; cursor: pointer;">
                        ğŸ—‘ï¸ æ¸…ç©ºå›¾ç‰‡
                    </button>
                    <input id="file-input-btn" type="file" accept="image/*" multiple style="display: none;" />
                    <span style="font-size: 12px; color: #6c757d;">æ”¯æŒæ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„æˆ–ç‚¹å‡»é€‰æ‹©å›¾ç‰‡ï¼Œç„¶åæ’å…¥åˆ°æ–‡ç« ä¸­</span>
                </div>
                
                <!-- URLå›¾ç‰‡æ·»åŠ åŒºåŸŸ -->
                <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px; flex-wrap: wrap;">
                    <input type="url" id="image-url-input" placeholder="è¾“å…¥å›¾ç‰‡URL (http/https)" style="flex: 1; min-width: 200px; padding: 6px 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
                    <button id="add-url-image-btn" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow" style="background-color: #17a2b8; border: none; cursor: pointer;">
                        ğŸ”— æ·»åŠ URLå›¾ç‰‡
                    </button>
                    <button id="convert-all-url-btn" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg shadow" style="background-color: #fd7e14; border: none; cursor: pointer;">
                        ğŸ”„ è½¬æ¢æ‰€æœ‰URLä¸ºBase64
                    </button>
                    <span style="font-size: 12px; color: #6c757d;">æ”¯æŒæ·»åŠ ç½‘ç»œå›¾ç‰‡URLå¹¶è‡ªåŠ¨è½¬æ¢ä¸ºBase64</span>
                </div>
                <div id="image-list" style="width: 100%; min-height: 60px; border: 2px dashed #dee2e6; border-radius: 6px; padding: 10px; background-color: #fff;">
                    <span style="color: #6c757d; font-size: 14px;">æš‚æ— å›¾ç‰‡ï¼Œè¯·é€‰æ‹©æˆ–æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶</span>
                </div>
            </div>
            
            <!-- è¾“å…¥æ–‡æœ¬ -->
            <textarea id="editor" placeholder="è¾“å…¥Markdownå†…å®¹..."></textarea>
        </div>
        <div class="editor-box">
            <!-- å›¾ç‰‡é¢„è§ˆå’Œæ’ç‰ˆåŒºåŸŸ -->
            <div id="image-preview" style="margin-bottom: 15px; padding: 15px; border: 1px solid #e1e5e9; border-radius: 8px; background-color: #f8f9fa;">
                <h4 style="margin: 0 0 12px 0; font-size: 14px; color: #495057;">ğŸ–¼ï¸ å›¾ç‰‡ç®¡ç†å’Œæ’ç‰ˆ</h4>
                
                <!-- å›¾ç‰‡é€‰æ‹©æ¨¡æ€æ¡† -->
                <div id="image-select-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; justify-content: center; align-items: center;">
                    <div style="background: white; padding: 20px; border-radius: 8px; max-width: 80%; max-height: 80%; overflow: auto;">
                        <h5 style="margin: 0 0 15px 0;">é€‰æ‹©è¦æ’å…¥çš„å›¾ç‰‡</h5>
                        <div id="image-select-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin-bottom: 15px;">
                            <span style="color: #6c757d; grid-column: 1 / -1; text-align: center;">æš‚æ— å›¾ç‰‡å¯é€‰æ‹©</span>
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button id="cancel-insert-btn" style="padding: 8px 16px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">å–æ¶ˆ</button>
                        </div>
                    </div>
                </div>
                
                <!-- æ–‡æ¡£ä¸­çš„å›¾ç‰‡åˆ—è¡¨ -->
                <div id="image-preview-content" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; max-height: 300px; overflow-y: auto;">
                    <span style="color: #6c757d; font-size: 14px; grid-column: 1 / -1; text-align: center; padding: 20px;">æš‚æ— å›¾ç‰‡ï¼Œè¯·é€‰æ‹©æˆ–æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶</span>
                </div>
            </div>
            
            <!-- Markdowné¢„è§ˆåŒºåŸŸ -->
            <div id="preview" class="wx-content"></div>
            <button class="copy-btn" onclick="copyWechatHTML()">å¤åˆ¶å…¬ä¼—å·å†…å®¹</button>
        </div>
    </div>

    <!-- æ·»åŠ æç¤ºå…ƒç´  -->
    <div id="toast" class="toast">å¤åˆ¶æˆåŠŸï¼</div>

    <script>
    let numberIndex = 0;

    // å›¾ç‰‡ç®¡ç†ç›¸å…³å˜é‡
    let imageFiles = []; // å›¾ç‰‡æ–‡ä»¶åˆ—è¡¨
    let imageSrcList = []; // å›¾ç‰‡æºåˆ—è¡¨ï¼ˆBase64ç¼–ç ï¼‰


    function changeTitleTheme(color) {
        autoFormatText(document.getElementById('editor').value)
    }

    function generateH1HTMLStyle(selectedStyle,titleAlign, titleName, customNumberIndex = null) { 

        let numberIndexStr = customNumberIndex !== null ? 
            `${customNumberIndex < 10 ? '0' + customNumberIndex : customNumberIndex}` : 
            `${numberIndex++ < 10 ? '0' + numberIndex : numberIndex}`;
         
        // æ–¹å¼1ï¼šé€šè¿‡æ•°ç»„åˆå§‹åŒ–ï¼ˆæ•°ç»„å…ƒç´ æ˜¯ [key, value] äºŒç»´æ•°ç»„ï¼‰
        const h1Style = new Map([
        ["style-1", `
            <!-- é£æ ¼1ï¼šç®€çº¦é«˜çº§é£ -->
            <div style="margin-bottom: 60px;text-align: ${titleAlign};">
                <h6 style="text-align: ${titleAlign};font-size: 16px; font-weight: 400; color: #4F46E5; margin: 0 0 6px 0; letter-spacing: 1px;">${numberIndexStr}</h6>
                <h1 style="text-align: ${titleAlign};font-size: 28px; color: #2D3748; font-weight: 600; margin: 0 0 12px 0; line-height: 1.4; padding-bottom: 8px; border-bottom: 1px solid #E5E7EB;">${titleName}</h1>
                <p style="font-size: 15px; color: #4A5568; line-height: 1.8; margin: 15px 0 0 0; text-align: justify;">ç ”ç©¶å‘ç°å®šæœŸåœ¨å›ºå®šå¹³å°æ›´æ–°çš„æ’ç”»å¸ˆï¼Œæ”¶å…¥æ¯”â€œéšç¼˜æ›´æ–°â€çš„é«˜å‡º47%ã€‚æ ¸å¿ƒåŸå› åœ¨äºæŒç»­è¾“å‡ºèƒ½ç§¯ç´¯ç²¾å‡†ç²‰ä¸ï¼Œæå‡è´¦å·æƒé‡ï¼ŒåŒæ—¶è®©æ½œåœ¨å®¢æˆ·æ›´å®¹æ˜“æ‰¾åˆ°å¹¶ä¿¡ä»»åˆ›ä½œè€…ã€‚</p>
            </div>
        `],
        ["style-2", `
            <!-- é£æ ¼2ï¼šå¤å¤è¡¬çº¿é£ -->
            <div style="margin-bottom: 60px;text-align: ${titleAlign};">
                <h6 style="text-align: ${titleAlign};font-size: 20px; font-weight: 600; color: #8B5A2B; font-family: 'SimSun', serif; margin: 0 0 10px 0; letter-spacing: 2px;">${numberIndexStr}</h6>
                <h1 style="text-align: ${titleAlign};font-size: 26px; color: #3C2A21; font-weight: 500; font-family: 'SimSun', serif; margin: 0 0 12px 0; line-height: 1.4; padding-left: 16px; border-left: 4px solid #8B5A2B;">${titleName}</h1>
                <p style="font-size: 15px; color: #4A5568; line-height: 1.8; margin: 15px 0 0 0; text-align: justify;">ä¼˜è´¨çš„ä½œå“é›†æ˜¯æ¥å•çš„å…³é”®ï¼Œè®¾è®¡å¸ˆéœ€è¦å°†ä½œå“æŒ‰ä¸»é¢˜åˆ†ç±»ï¼Œæ¯ç±»ä½œå“æ­é…ç®€æ´çš„åˆ›ä½œè¯´æ˜ï¼ŒåŒ…æ‹¬è®¾è®¡æ€è·¯ã€ä½¿ç”¨å·¥å…·ã€é¡¹ç›®æˆæœç­‰ã€‚é¿å…å †ç Œä½œå“ï¼Œç²¾é€‰3-5ä¸ªé«˜è´¨é‡æ¡ˆä¾‹ï¼Œæ¯”10ä¸ªæ™®é€šæ¡ˆä¾‹æ›´æœ‰è¯´æœåŠ›ã€‚</p>
            </div>
        `],
        ["style-3", `
           <!-- é£æ ¼3ï¼šå¤å¤æ‰“å­—æœºé£ -->
            <div style="margin-bottom: 60px;text-align: ${titleAlign};">
                <h6 style="text-align: ${titleAlign};font-size: 20px; font-weight: 600; color: #654321; font-family: 'Courier New', monospace; margin: 0 0 10px 0; letter-spacing: 4px;">${numberIndexStr}</h6>
                <h1 style="text-align: ${titleAlign};font-size: 26px; color: #3C2A21; font-weight: 500; font-family: 'Courier New', monospace; margin: 0 0 12px 0; line-height: 1.5; letter-spacing: 2px;">${titleName}</h1>
                <p style="font-size: 15px; color: #5D4037; line-height: 1.7; margin: 0; text-align: justify; border-left: 2px solid #D7CCC8; padding-left: 16px;">å¤å¤æ‰“å­—æœºé£æ ¼è®¾è®¡éœ€çªå‡ºâ€œå¹´ä»£æ„Ÿâ€ä¸â€œæ‰‹å·¥æ„Ÿâ€ï¼Œå­—ä½“é€‰ç”¨ç­‰å®½å­—ä½“ï¼ˆå¦‚Courier Newã€Special Eliteï¼‰ï¼Œæ¨¡æ‹Ÿæ‰“å­—æœºæ•²å‡»æ•ˆæœï¼›è‰²å½©ä»¥ç±³é»„ã€æ·±æ£•ã€å¢¨é»‘ä¸ºä¸»ï¼Œå¯æ·»åŠ è½»å¾®å™ªç‚¹ã€åˆ’ç—•ç­‰è‚Œç†æ•ˆæœï¼›æ’ç‰ˆæ—¶æ•…æ„ä¿ç•™è½»å¾®çš„æ–‡å­—é”™ä½ã€è¡Œè·ä¸å‡ï¼Œå¢å¼ºå¤å¤è´¨æ„Ÿï¼Œé€‚åˆç”¨äºæµ·æŠ¥ã€ä¹¦ç±å°é¢ã€æ–‡åˆ›äº§å“è®¾è®¡ã€‚</p>
            </div>
        `],
        ["style-4", `
            <!-- é£æ ¼4ï¼šæ¸…æ–°æ²»æ„ˆé£ -->
            <div style="margin-bottom: 60px;text-align: ${titleAlign};">
                <p style="text-align: center; margin: 10px 0;">
                    <span style="display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 50%; background-color: #F0FDF4; color: #48BB78; font-size: 22px; font-weight: bold; line-height: 1; padding: 3px; margin: 0 auto;">
                        ${numberIndexStr}
                    </span>
                </p>
                <h1 style="text-align: ${titleAlign};font-size: 26px; color: #22C55E; font-weight: 500; margin: 0 0 12px 0; line-height: 1.4;">${titleName}</h1>
                <div style="border-left: 4px solid #D1FAE5; padding-left: 16px;">
                    <p style="font-size: 15px; color: #4A5568; line-height: 1.8; margin: 0; text-align: justify;">æ—¥å¸¸ç§¯ç´¯çµæ„Ÿå¯ä»ç”Ÿæ´»è§‚å¯Ÿã€è‰ºæœ¯å±•è§ˆã€è‡ªç„¶æ™¯è§‚ä¸­è·å–ï¼Œå»ºè®®å»ºç«‹ä¸“å±çµæ„Ÿåº“ï¼ˆå¦‚Pinboardã€Notionæ”¶è—å¤¹ï¼‰ï¼Œåˆ†ç±»å­˜å‚¨å‚è€ƒå›¾ã€æ–‡å­—ç‰‡æ®µã€è‰²å½©æ­é…ç­‰ç´ æï¼Œå®šæœŸæ•´ç†å¤ç›˜ï¼Œå½¢æˆè‡ªå·±çš„çµæ„Ÿä½“ç³»ã€‚</p>
                </div>
            </div>
        `],
        ["style-5", `
            <!-- é£æ ¼5ï¼šå¤§èƒ†æ’è‰²é£ -->
            <div style="margin-bottom: 60px;text-align: ${titleAlign};">
                <p style="text-align: center; margin: 10px 0;">
                    <span style="display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 50%; background-color: #FF6B35; color: #FFFFFF; font-size: 22px; font-weight: bold; line-height: 1; padding: 3px; margin: 0 auto;">
                        ${numberIndexStr}
                    </span>
                </p>
                <h1 style="text-align: ${titleAlign};font-size: 26px; color: #2D3748; font-weight: 700; margin: 0 0 12px 0; line-height: 1.4; border-bottom: 1px solid #FFE4D6; padding-bottom: 1px;">${titleName}</h1>
                
                <p style="font-size: 15px; color: #4A5568; line-height: 1.8; margin: 15px 0 0 0; text-align: justify;">ä¸å®¢æˆ·æ²Ÿé€šæ—¶ï¼Œå…ˆæ˜ç¡®éœ€æ±‚æ ¸å¿ƒï¼ˆå¦‚ä½¿ç”¨åœºæ™¯ã€ç›®æ ‡äººç¾¤ã€é£æ ¼åå¥½ï¼‰ï¼Œå†æä¾›2-3ä¸ªæ–¹æ¡ˆæ–¹å‘è€Œéå•ä¸€æ–¹æ¡ˆï¼Œå‡å°‘åå¤ä¿®æ”¹æˆæœ¬ã€‚åŒæ—¶ç”¨å¯è§†åŒ–å·¥å…·ï¼ˆå¦‚çº¿æ¡†å›¾ã€è‰²å¡ï¼‰è¾…åŠ©è¡¨è¾¾ï¼Œè®©å®¢æˆ·æ›´ç›´è§‚ç†è§£è®¾è®¡æ€è·¯ã€‚</p>
            </div>
        `],
        ["style-6", `
            <!-- é£æ ¼6ï¼šæç®€å‡ ä½•é£ -->
            <div style="margin-bottom: 60px;text-align: ${titleAlign};">
                <h6 style="text-align: ${titleAlign};font-size: 16px; font-weight: 400; color: #4F46E5; margin: 0 0 6px 0; letter-spacing: 1px;">${numberIndexStr}</h6>
                <h1 style="text-align: ${titleAlign};font-size: 26px; color: #4F46E5; font-weight: 600; margin: 0 0 10px 0; line-height: 1.4;">${titleName}</h1>
                <p style="font-size: 15px; color: #374151; line-height: 1.8; margin: 0; text-align: justify;">æ”¶è´¹æ ‡å‡†å¯å‚è€ƒâ€œåŸºç¡€å®šä»·+éš¾åº¦ç³»æ•°+äº¤ä»˜å‘¨æœŸâ€å…¬å¼ï¼šåŸºç¡€å®šä»·æ ¹æ®è‡ªèº«ç»éªŒï¼ˆå¦‚å…¥è¡Œå¹´é™ã€æ¡ˆä¾‹è´¨é‡ï¼‰è®¾å®šï¼Œéš¾åº¦ç³»æ•°æŒ‰é¡¹ç›®å¤æ‚åº¦ï¼ˆå¦‚æ’ç”»å¼ æ•°ã€ç»†èŠ‚è¦æ±‚ï¼‰è°ƒæ•´ï¼ŒåŠ æ€¥é¡¹ç›®å¯åŠ æ”¶20%-50%æœåŠ¡è´¹ï¼ŒåŒæ—¶æ˜ç¡®äº¤ä»˜å†…å®¹å’Œä¿®æ”¹æ¬¡æ•°ï¼Œé¿å…åç»­çº çº·ã€‚</p>
            </div>
        `],
        ["style-7", `
            <!-- é£æ ¼7ï¼šè½»å¥¢è´¨æ„Ÿé£ -->
            <div style="margin-bottom: 60px;text-align: ${titleAlign};">
                <h6 style="text-align: ${titleAlign};font-size: 16px; font-weight: 400; color: #718096; margin: 0 0 6px 0; letter-spacing: 1px;">${numberIndexStr}</h6>
                <h1 style="text-align: ${titleAlign};font-size: 28px; color: #2D3748; font-weight: 500; margin: 0 0 12px 0; line-height: 1.4; padding-bottom: 8px; border-bottom: 1px solid #E0E7FF; letter-spacing: 0.5px;">${titleName}</h1>
                <p style="font-size: 15px; color: #4A5568; line-height: 1.8; margin: 15px 0 0 0; text-align: justify;">é«˜ç«¯å“ç‰Œè®¾è®¡éœ€æ³¨é‡â€œå°‘å³æ˜¯å¤šâ€ï¼Œé€šè¿‡ç²¾ç®€è‰²å½©ä½“ç³»ï¼ˆå»ºè®®2-3ç§ä¸»è¾…è‰²ï¼‰ã€ç»Ÿä¸€å­—ä½“å±‚çº§ã€å¼ºåŒ–ç»†èŠ‚è´¨æ„Ÿï¼ˆå¦‚çƒ«é‡‘å·¥è‰ºã€å“‘å…‰æè´¨è¡¨ç°ï¼‰ï¼Œä¼ é€’å“ç‰Œçš„å¥¢åæ„Ÿä¸ä¸“ä¸šæ€§ã€‚åŒæ—¶ï¼Œè§†è§‰å…ƒç´ éœ€ä¸å“ç‰Œè°ƒæ€§å¼ºç»‘å®šï¼Œé¿å…è¿‡åº¦èŠ±å“¨çš„è®¾è®¡åˆ†æ•£ç”¨æˆ·æ³¨æ„åŠ›ã€‚</p>
            </div>
        `],
        ["style-8", `
            <!-- é£æ ¼8ï¼šæ—¥ç³»ç®€çº¦é£ -->
            <div style="margin-bottom: 60px;text-align: ${titleAlign};">
                <h6 style="text-align: ${titleAlign};font-size: 16px; font-weight: 400; color: #718096; margin: 0 0 6px 0; letter-spacing: 1px;">${numberIndexStr}</h6>
                <h1 style="text-align: ${titleAlign};font-size: 24px; color: #2D3748; font-weight: 500; margin: 0 0 15px 0; line-height: 1.4; letter-spacing: -0.5px;">${titleName}</h1>
                <p style="font-size: 15px; color: #4A5568; line-height: 1.8; margin: 0; text-align: justify; border-top: 1px solid #F0F0F0; padding-top: 16px;">æ—¥ç³»æ‚å¿—æ’ç‰ˆæ ¸å¿ƒæ˜¯â€œç•™ç™½+ç§©åºæ„Ÿâ€ï¼Œé¡µé¢ç•™ç™½ç‡å»ºè®®â‰¥30%ï¼Œæ–‡å­—é—´è·ã€è¡Œé«˜é€‚å½“æ”¾å¤§ï¼Œæå‡é˜…è¯»èˆ’é€‚åº¦ï¼›å­—ä½“é€‰æ‹©æ— è¡¬çº¿å­—ä½“ï¼ˆå¦‚æ€æºé»‘ä½“ã€Helveticaï¼‰ï¼Œæ ‡é¢˜ä¸æ­£æ–‡å±‚çº§é€šè¿‡å­—å·å’Œå­—é‡åŒºåˆ†ï¼Œé¿å…è¿‡å¤šè£…é¥°ï¼›å›¾ç‰‡ä»¥ç«–ç‰ˆæ„å›¾ã€ä½é¥±å’Œè‰²è°ƒä¸ºä¸»ï¼Œæ­é…ç®€æ´æ–‡å­—è¯´æ˜ï¼Œè¥é€ æ¸…æ–°æ²»æ„ˆçš„è§†è§‰ä½“éªŒã€‚</p>
            </div>
        `],
        ["style-9", `
            <!-- é£æ ¼9ï¼šæš—é»‘é…·æ„Ÿé£ -->
            <div style="padding: 24px; border-radius: 8px; margin-bottom: 60px;text-align: ${titleAlign};">
                <h6 style="text-align: ${titleAlign};font-size: 18px; font-weight: 700; color: #FF2E63; font-family: 'Consolas', monospace; letter-spacing: 3px; margin: 0 0 8px 0;">${numberIndexStr}</h6>
                <h1 style="text-align: ${titleAlign};font-size: 26px; color: #000000; font-weight: 600; margin: 0 0 15px 0; line-height: 1.4; padding-bottom: 6px; border-bottom: 3px solid #FF2E63;">${titleName}</h1>
                <p style="font-size: 15px; color: #000000; line-height: 1.8; margin: 0; text-align: justify;">æš—é»‘ç³»UIè®¾è®¡éœ€å¹³è¡¡â€œè§†è§‰å†²å‡»åŠ›â€ä¸â€œå¯è¯»æ€§â€ï¼šèƒŒæ™¯é€‰ç”¨æ·±ç°ï¼ˆè€Œéçº¯é»‘ï¼‰å‡å°‘è§†è§‰ç–²åŠ³ï¼Œæ–‡å­—ä¸èƒŒæ™¯å¯¹æ¯”åº¦éœ€â‰¥4.5:1ï¼›å¼ºè°ƒè‰²å¯é€‰ç”¨é«˜é¥±å’Œè‰²ï¼ˆå¦‚çº¢ã€è“ã€ç´«ï¼‰æå‡é‡ç‚¹å…ƒç´ è¾¨è¯†åº¦ï¼›å›¾æ ‡é‡‡ç”¨çº¿æ€§æˆ–æç®€é¢æ€§è®¾è®¡ï¼Œé¿å…å¤æ‚çº¹ç†ï¼›åŒæ—¶æ³¨é‡å…‰å½±å±‚æ¬¡ï¼Œé€šè¿‡è½»å¾®æ¸å˜å¢å¼ºç•Œé¢ç«‹ä½“æ„Ÿã€‚</p>
            </div>
        `]
        ]);
        
        return h1Style.get(selectedStyle);

    }

    function changeHtml() { 
        const editor = document.getElementById('editor');
        const html = autoFormatText(editor.value);
        preview.innerHTML = html;
    }


    // ç”ŸæˆH3-H6æ ‡é¢˜æ ·å¼
    function generateHeadingHTMLStyle(styleType, level, content, h3h6Align) {
        // H3-H6ä½¿ç”¨ç‹¬ç«‹çš„H3-H6å¯¹é½
        const effectiveAlign = h3h6Align || 'center';
        
        const headingStyles = new Map([
            ["heading-style-1", { // æç®€ç°ä»£
                "2": `style="font-size: 24px; font-weight: 600; color: #2D3748; margin: 24px 0 16px 0; text-align: ${effectiveAlign};"`,
                "3": `style="font-size: 20px; font-weight: 500; color: #4A5568; margin: 20px 0 12px 0; text-align: ${effectiveAlign};"`,
                "4": `style="font-size: 18px; font-weight: 500; color: #718096; margin: 16px 0 10px 0; text-align: ${effectiveAlign};"`,
                "5": `style="font-size: 16px; font-weight: 400; color: #A0AEC0; margin: 12px 0 8px 0; text-align: ${effectiveAlign};"`,
                "6": `style="font-size: 14px; font-weight: 400; color: #CBD5E0; margin: 10px 0 6px 0; text-align: ${effectiveAlign};"`
            }],
            ["heading-style-2", { // ä¼˜é›…è¡¬çº¿
                "2": `style="font-size: 22px; font-weight: 600; color: #8B5A2B; font-family: 'Georgia', serif; margin: 24px 0 16px 0; padding-left: 16px; border-left: 4px solid #8B5A2B; text-align: ${effectiveAlign};"`,
                "3": `style="font-size: 18px; font-weight: 500; color: #A0522D; font-family: 'Georgia', serif; margin: 20px 0 12px 0; padding-left: 16px; border-left: 4px solid #44b0ce; text-align: ${effectiveAlign};"`,
                "4": `style="font-size: 16px; font-weight: 500; color: #CD853F; font-family: 'Georgia', serif; margin: 16px 0 10px 0; padding-left: 16px; border-left: 4px solid #1abc9c; text-align: ${effectiveAlign};"`,
                "5": `style="font-size: 14px; font-weight: 400; color: #D2691E; font-family: 'Georgia', serif; margin: 12px 0 8px 0; padding-left: 16px; border-left: 4px solid #f1c40f; text-align: ${effectiveAlign};"`,
                "6": `style="font-size: 12px; font-weight: 400; color: #DEB887; font-family: 'Georgia', serif; margin: 10px 0 6px 0; padding-left: 16px; border-left: 4px solid #e67e22; text-align: ${effectiveAlign};"`
            }],
            ["heading-style-3", { // æ¸å˜æ–‡å­—
                "2": `style="font-size: 22px; font-weight: 600; margin: 24px 0 16px 0; text-align: ${effectiveAlign}; background: linear-gradient(to right, #3B82F6, #8B5CF6); -webkit-background-clip: text; background-clip: text; color: transparent;"`,
                "3": `style="font-size: 18px; font-weight: 500; margin: 20px 0 12px 0; text-align: ${effectiveAlign}; background: linear-gradient(to right, #8B5CF6, #EC4899); -webkit-background-clip: text; background-clip: text; color: transparent;"`,
                "4": `style="font-size: 16px; font-weight: 500; margin: 16px 0 10px 0; text-align: ${effectiveAlign}; background: linear-gradient(to right, #EC4899, #F97316); -webkit-background-clip: text; background-clip: text; color: transparent;"`,
                "5": `style="font-size: 14px; font-weight: 400; margin: 12px 0 8px 0; text-align: ${effectiveAlign}; background: linear-gradient(to right, #F97316, #EAB308); -webkit-background-clip: text; background-clip: text; color: transparent;"`,
                "6": `style="font-size: 12px; font-weight: 400; margin: 10px 0 6px 0; text-align: ${effectiveAlign}; background: linear-gradient(to right, #EAB308, #22C55E); -webkit-background-clip: text; background-clip: text; color: transparent;"`
            }],
            ["heading-style-4", { // å¤å¤å°åˆ·
                "2": `style="font-size: 20px; font-weight: 600; color: #4A4A4A; font-family: 'Times New Roman', serif; margin: 24px 0 16px 0; border-bottom: 2px solid #E5E5E5; padding-bottom: 8px; text-align: ${effectiveAlign};"`,
                "3": `style="font-size: 18px; font-weight: 500; color: #666666; font-family: 'Times New Roman', serif; margin: 20px 0 12px 0; text-align: ${effectiveAlign};"`,
                "4": `style="font-size: 16px; font-weight: 500; color: #777777; font-family: 'Times New Roman', serif; margin: 16px 0 10px 0; text-align: ${effectiveAlign};"`,
                "5": `style="font-size: 14px; font-weight: 400; color: #888888; font-family: 'Times New Roman', serif; margin: 12px 0 8px 0; text-align: ${effectiveAlign};"`,
                "6": `style="font-size: 12px; font-weight: 400; color: #999999; font-family: 'Times New Roman', serif; margin: 10px 0 6px 0; text-align: ${effectiveAlign};"`
            }],
            ["heading-style-5", { // ç§‘æŠ€æ„Ÿ
                "2": `style="font-size: 20px; font-weight: 600; color: #4A90E2; margin: 24px 0 16px 0; text-align: ${effectiveAlign};"`,
                "3": `style="font-size: 18px; font-weight: 500; color: #5BA3F5; margin: 20px 0 12px 0; text-align: ${effectiveAlign};"`,
                "4": `style="font-size: 16px; font-weight: 500; color: #6B9BD8; margin: 16px 0 10px 0; text-align: ${effectiveAlign};"`,
                "5": `style="font-size: 14px; font-weight: 400; color: #8BB5D0; margin: 12px 0 8px 0; text-align: ${effectiveAlign};"`,
                "6": `style="font-size: 12px; font-weight: 400; color: #9BB0C8; margin: 10px 0 6px 0; text-align: ${effectiveAlign};"`
            }],
            ["heading-style-6", { // ç²—ä½“å¼ºè°ƒ
                "2": `style="font-size: 20px; font-weight: 700; color: #1F2937; margin: 24px 0 16px 0; text-transform: uppercase; letter-spacing: 1px; text-align: ${effectiveAlign};"`,
                "3": `style="font-size: 18px; font-weight: 600; color: #374151; margin: 20px 0 12px 0; text-transform: uppercase; letter-spacing: 0.5px; text-align: ${effectiveAlign};"`,
                "4": `style="font-size: 16px; font-weight: 600; color: #4B5563; margin: 16px 0 10px 0; text-transform: uppercase; text-align: ${effectiveAlign};"`,
                "5": `style="font-size: 14px; font-weight: 500; color: #6B7280; margin: 12px 0 8px 0; text-transform: uppercase; text-align: ${effectiveAlign};"`,
                "6": `style="font-size: 12px; font-weight: 500; color: #9CA3AF; margin: 10px 0 6px 0; text-transform: uppercase; text-align: ${effectiveAlign};"`
            }],
            ["heading-style-7", { // ä¸‹åˆ’çº¿è£…é¥°
                "2": `style="font-size: 20px; font-weight: 600; color: #1F2937; margin: 24px 0 16px 0; position: relative; padding-bottom: 8px; text-align: ${effectiveAlign};"`,
                "3": `style="font-size: 18px; font-weight: 500; color: #374151; margin: 20px 0 12px 0; position: relative; padding-bottom: 6px; text-align: ${effectiveAlign};"`,
                "4": `style="font-size: 16px; font-weight: 500; color: #4B5563; margin: 16px 0 10px 0; position: relative; padding-bottom: 4px; text-align: ${effectiveAlign};"`,
                "5": `style="font-size: 14px; font-weight: 400; color: #6B7280; margin: 12px 0 8px 0; position: relative; padding-bottom: 2px; text-align: ${effectiveAlign};"`,
                "6": `style="font-size: 12px; font-weight: 400; color: #9CA3AF; margin: 10px 0 6px 0; text-align: ${effectiveAlign};"`
            }],
            ["heading-style-8", { // è¾¹æ¡†åŒ…å›´
                "2": `style="font-size: 20px; font-weight: 600; color: #1F2937; margin: 24px 0 16px 0; padding: 12px 16px; border: 2px solid #3B82F6; background-color: rgba(59, 130, 246, 0.05); border-radius: 8px; text-align: ${effectiveAlign};"`,
                "3": `style="font-size: 18px; font-weight: 500; color: #374151; margin: 20px 0 12px 0; padding: 8px 12px; border: 1px solid #6B7280; background-color: rgba(107, 114, 128, 0.05); border-radius: 6px; text-align: ${effectiveAlign};"`,
                "4": `style="font-size: 16px; font-weight: 500; color: #4B5563; margin: 16px 0 10px 0; padding: 6px 10px; border-left: 4px solid #3B82F6; text-align: ${effectiveAlign};"`,
                "5": `style="font-size: 14px; font-weight: 400; color: #6B7280; margin: 12px 0 8px 0; padding: 4px 8px; border-top: 1px solid #D1D5DB; text-align: ${effectiveAlign};"`,
                "6": `style="font-size: 12px; font-weight: 400; color: #9CA3AF; margin: 10px 0 6px 0; padding: 2px 6px; border: 1px solid #E5E7EB; border-radius: 4px; text-align: ${effectiveAlign};"`
            }],
            ["heading-style-9", { // æ‰‹å†™é£æ ¼
                "2": `style="font-size: 20px; font-weight: 400; color: #EC4899; margin: 24px 0 16px 0; font-family: 'Comic Sans MS', cursive; transform: rotate(-0.5deg); text-align: ${effectiveAlign};"`,
                "3": `style="font-size: 18px; font-weight: 400; color: #8B5CF6; margin: 20px 0 12px 0; font-family: 'Comic Sans MS', cursive; transform: rotate(0.5deg); text-align: ${effectiveAlign};"`,
                "4": `style="font-size: 16px; font-weight: 400; color: #F97316; margin: 16px 0 10px 0; font-family: 'Comic Sans MS', cursive; text-align: ${effectiveAlign};"`,
                "5": `style="font-size: 14px; font-weight: 400; color: #3B82F6; margin: 12px 0 8px 0; font-family: 'Comic Sans MS', cursive; transform: rotate(-0.3deg); text-align: ${effectiveAlign};"`,
                "6": `style="font-size: 12px; font-weight: 400; color: #6B7280; margin: 10px 0 6px 0; font-family: 'Comic Sans MS', cursive; text-align: ${effectiveAlign};"`
            }],
            ["heading-style-10", { // é˜´å½±ç«‹ä½“
                "2": `style="font-size: 20px; font-weight: 600; color: #1F2937; margin: 24px 0 16px 0; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1); text-align: ${effectiveAlign};"`,
                "3": `style="font-size: 18px; font-weight: 500; color: #374151; margin: 20px 0 12px 0; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1); text-align: ${effectiveAlign};"`,
                "4": `style="font-size: 16px; font-weight: 500; color: #4B5563; margin: 16px 0 10px 0; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.05); text-align: ${effectiveAlign};"`,
                "5": `style="font-size: 14px; font-weight: 400; color: #6B7280; margin: 12px 0 8px 0; text-align: ${effectiveAlign};"`,
                "6": `style="font-size: 12px; font-weight: 400; color: #9CA3AF; margin: 10px 0 6px 0; text-align: ${effectiveAlign};"`
            }]
        ]);

        // H3-H6ä½¿ç”¨é€‰æ‹©çš„H3-H6æ ·å¼
        const styleMap = headingStyles.get(styleType);
        if (!styleMap || !styleMap[level]) {
            return `<h${level}>${content}</h${level}>`;
        }

        let baseStyle = styleMap[level];
        
        return `<h${level} ${baseStyle}>${content}</h${level}>`;
    }

    

    // ç”Ÿæˆæ®µè½å­—ä½“é£æ ¼æ ·å¼ï¼ˆç»Ÿä¸€æ§åˆ¶å­—ä½“ã€å­—å·ã€è¡Œé«˜ã€é¦–è¡Œç¼©è¿›ç­‰ï¼‰
    function generateTemplateStyleCSS(templateStyle) {
        const templateStyles = new Map([
            ["template-style-1", { // å¾®è½¯é›…é»‘ï¼ˆé€šç”¨å­—ä½“ï¼‰
                fontFamily: "Microsoft YaHei, å¾®è½¯é›…é»‘, sans-serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-2", { // ä»¿å®‹ï¼ˆæ­£å¼æ–‡ç« ï¼‰
                fontFamily: "SimSun, FangSong, serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-3", { // æ¥·ä½“ï¼ˆå­¦æœ¯ä¸¥è°¨ï¼‰
                fontFamily: "KaiTi, STKaiti, serif",
                fontSize: "16px", 
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-4", { // éš¶ä¹¦ï¼ˆå¤éŸµé£é›…ï¼‰
                fontFamily: "LiSu, éš¶ä¹¦, cursive",
                fontSize: "16px",
                lineHeight: "1.8", 
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-5", { // å¹¼åœ†ï¼ˆæ¸©é¦¨å¯çˆ±ï¼‰
                fontFamily: "YouYuan, å¹¼åœ†, sans-serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333", 
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-6", { // ä»¿å®‹ï¼ˆå¤å¤æ€€æ—§ï¼‰
                fontFamily: "FangSong, ä»¿å®‹, serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-7", { // è‹¹æ–¹ï¼ˆæ´»æ³¼ç°ä»£ï¼‰
                fontFamily: "PingFang SC, è‹¹æ–¹, sans-serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0", 
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-8", { // Helveticaï¼ˆç§‘æŠ€æ„Ÿï¼‰
                fontFamily: "Helvetica Neue, Helvetica, Arial, sans-serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify", 
                margin: "12px 0"
            }],
            ["template-style-9", { // Comic Sansï¼ˆæ‰‹å†™é£æ ¼ï¼‰
                fontFamily: "Comic Sans MS, cursive",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-10", { // Arialï¼ˆå•†åŠ¡ç®€æ´ï¼‰
                fontFamily: "Arial, Helvetica, sans-serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-11", { // Georgiaï¼ˆä¼˜é›…è¡¬çº¿ï¼‰
                fontFamily: "Georgia, serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-12", { // Times New Romanï¼ˆç»å…¸æ­£å¼ï¼‰
                fontFamily: "Times New Roman, Times, serif",
                fontSize: "16px", 
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-13", { // Courierï¼ˆç­‰å®½ä»£ç ï¼‰
                fontFamily: "Courier New, Courier, monospace",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-14", { // Trebuchetï¼ˆç°ä»£ç®€æ´ï¼‰
                fontFamily: "Trebuchet MS, sans-serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-15", { // Verdanaï¼ˆæ¸…æ™°æ˜“è¯»ï¼‰
                fontFamily: "Verdana, Geneva, sans-serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-16", { // Impactï¼ˆç²—ä½“å¼ºè°ƒï¼‰
                fontFamily: "Impact, Haettenschweiler, Arial Narrow Bold, sans-serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-17", { // Palatinoï¼ˆæ–‡è‰ºå¤å¤ï¼‰
                fontFamily: "Palatino Linotype, Book Antiqua, Palatino, serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-18", { // Garamondï¼ˆç»å…¸ä¹¦ç±ï¼‰
                fontFamily: "Garamond, serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-19", { // Baskervilleï¼ˆæ‚å¿—ç²¾è‡´ï¼‰
                fontFamily: "Baskerville, Times New Roman, serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }],
            ["template-style-20", { // Futuraï¼ˆå‡ ä½•ç°ä»£ï¼‰
                fontFamily: "Futura, Trebuchet MS, Arial, sans-serif",
                fontSize: "16px",
                lineHeight: "1.8",
                color: "#333333",
                textIndent: "0",
                textAlign: "justify",
                margin: "12px 0"
            }]
        ]);

        const style = templateStyles.get(templateStyle) || templateStyles.get("template-style-1");
        
        let cssText = `font-family: ${style.fontFamily}; font-size: ${style.fontSize}; line-height: ${style.lineHeight}; color: ${style.color}; text-indent: ${style.textIndent}; text-align: ${style.textAlign}; margin: ${style.margin};`;
        if (style.letterSpacing) {
            cssText += ` letter-spacing: ${style.letterSpacing};`;
        }
        
        return cssText;
    }

    // ç”Ÿæˆå¼•ç”¨æ ·å¼ï¼ˆä»…å½±å“>å¼€å¤´çš„å¼•ç”¨å†…å®¹ï¼‰
    function generateQuoteHTML(content, quoteStyle, quoteSymbol, quoteAlign, quoteFont, quoteIndent, quoteShadow, quoteItalic, quoteFontSize = '16px', quoteBorderRadius = false) {
        // è·å–å¼•ç”¨ç¬¦å·å‰ç¼€
        const symbolMap = {
            'symbol-0': '',
            'symbol-1': '<span style="color: #F59E0B; margin-right: 8px;">ğŸ’¡</span>',
            'symbol-2': '<span style="color: #EF4444; margin-right: 8px;">âš ï¸</span>',
            'symbol-3': '<span style="color: #3B82F6; margin-right: 8px;">ğŸ“Œ</span>',
            'symbol-4': '<span style="color: #10B981; margin-right: 8px;">âœ…</span>',
            'symbol-5': '<span style="color: #8B5CF6; margin-right: 8px;">ğŸ“–</span>',
            'symbol-6': '<span style="color: #F59E0B; margin-right: 8px;">ğŸ¯</span>',
            'symbol-7': '<span style="color: #A855F7; margin-right: 8px;">âœ¨</span>',
            'symbol-8': '<span style="color: #8B5CF6; margin-right: 8px;">ğŸ“</span>',
            'symbol-9': '<span style="color: #D946EF; margin-right: 8px;">ğŸ’</span>',
            'symbol-10': '<span style="color: #DC2626; margin-right: 8px;">ğŸ”¥</span>'
        };
        
        const symbolPrefix = symbolMap[quoteSymbol] || '';
        
        // è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®æ˜¯å¦å¯ç”¨åœ†è§’æ·»åŠ border-radiusæ ·å¼
        function addBorderRadius(baseStyle, enabled) {
            if (!enabled) return baseStyle;
            // æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰border-radiusï¼Œé¿å…é‡å¤æ·»åŠ 
            if (baseStyle.includes('border-radius:')) {
                return baseStyle.replace(/border-radius:\s*[^;]+;/, 'border-radius: 8px;');
            }
            return baseStyle + ' border-radius: 8px;';
        }
        
        // å¼•ç”¨æ ·å¼æ˜ å°„
        const quoteStyles = new Map([
            ['quote-style-1', { // åŸºç¡€å¼•ç”¨
                style: addBorderRadius('margin: 16px 0; padding: 0; font-size: ' + quoteFontSize + '; line-height: 1.7; color: #4A5568; text-align: ' + quoteAlign + ';', quoteBorderRadius),
                class: ''
            }],
            ['quote-style-2', { // å¼ºè°ƒå¼•ç”¨
                style: addBorderRadius('margin: 16px 0; padding: 12px 0; font-size: ' + quoteFontSize + '; line-height: 1.6; color: #2D3748; font-weight: 600; text-align: ' + quoteAlign + '; border-bottom: 2px solid #07C160; display: inline-block;', quoteBorderRadius),
                class: ''
            }],
            ['quote-style-3', { // ç»å…¸å¼•ç”¨
                style: addBorderRadius('margin: 16px 0; padding: 12px 16px; font-size: ' + quoteFontSize + '; line-height: 1.7; color: #4A5568; background-color: #F5F9F7; border-left: 4px solid #07C160; border-radius: 0 4px 4px 0; text-align: ' + quoteAlign + ';', quoteBorderRadius),
                class: ''
            }],
            ['quote-style-4', { // æ¸©é¦¨æç¤º
                style: addBorderRadius('margin: 16px 0; padding: 16px; font-size: ' + quoteFontSize + '; line-height: 1.7; color: #5C6E70; background-color: #F0F8F5; border-radius: 8px; border: 1px solid #E1F0EB; text-align: ' + quoteAlign + ';', quoteBorderRadius),
                class: ''
            }],
            
            
            
            ['quote-style-8', { // è­¦å‘Šå¼•ç”¨
                style: addBorderRadius('margin: 16px 0; padding: 16px; font-size: ' + quoteFontSize + '; line-height: 1.7; color: #8A2420; background-color: #FFF6F6; border-radius: 8px; border: 1px solid #FDEEEE; text-align: ' + quoteAlign + ';', quoteBorderRadius),
                class: ''
            }],
            ['quote-style-9', { // å±…ä¸­å¼•ç”¨
                style: addBorderRadius('margin: 20px 0; padding: 0; font-size: ' + quoteFontSize + '; line-height: 1.7; color: #2D3748; font-weight: 500; text-align: center;', quoteBorderRadius),
                class: ''
            }],
            ['quote-style-10', { // èƒŒæ™¯å¼•ç”¨
                style: addBorderRadius('margin: 16px 0; padding: 16px; font-size: ' + quoteFontSize + '; line-height: 1.7; color: #2D3748; background-color: #F5F6F7; border-radius: 8px; text-align: ' + quoteAlign + ';', quoteBorderRadius),
                class: ''
            }],
            ['quote-style-11', { // è¾¹æ¡†å¼•ç”¨
                style: addBorderRadius('margin: 16px 0; padding: 16px; font-size: ' + quoteFontSize + '; line-height: 1.7; color: #333333; border: 1px solid #4299E1; border-radius: 8px; background-color: #F8FAFF; text-align: ' + quoteAlign + ';', quoteBorderRadius),
                class: ''
            }],
            
            ['quote-style-13', { // å¼•å·å¼•ç”¨
                style: addBorderRadius('margin: 16px 0; padding: 16px; font-size: ' + quoteFontSize + '; line-height: 1.7; color: #4A5568; background-color: #FAFAFA; border-radius: 8px; position: relative; text-align: ' + quoteAlign + ';', quoteBorderRadius),
                class: ''
            }],
            ['quote-style-14', { // é¦–å­—å¼•ç”¨
                style: addBorderRadius('margin: 16px 0; padding: 0; font-size: ' + quoteFontSize + '; line-height: 1.7; color: #333333; text-align: ' + quoteAlign + ';', quoteBorderRadius),
                class: ''
            }],
            ['quote-style-15', { // æ¸å˜å¼•ç”¨
                style: addBorderRadius('margin: 16px 0; padding: 0; font-size: ' + quoteFontSize + '; line-height: 1.7; font-weight: 500; text-align: ' + quoteAlign + '; background: linear-gradient(90deg, #07C160, #4299E1); -webkit-background-clip: text; background-clip: text; color: transparent;', quoteBorderRadius),
                class: ''
            }],
        ]);
        
        const selectedStyle = quoteStyles.get(quoteStyle) || quoteStyles.get('quote-style-1');
        
        // å¼•ç”¨å­—ä½“æ˜ å°„ï¼ˆæ›´ä¿å®ˆå’Œå…¼å®¹çš„å­—ä½“è®¾ç½®ï¼‰
        const fontMap = {
            'quote-font-1': '',
            'quote-font-2': "font-family: SimSun, FangSong, serif;",  // ä»¿å®‹
            'quote-font-3': "font-family: KaiTi, STKaiti, serif;",     // æ¥·ä½“
            'quote-font-4': "font-family: Microsoft YaHei, å¾®è½¯é›…é»‘, sans-serif;", // å¾®è½¯é›…é»‘
            'quote-font-5': "font-family: PingFang SC, è‹¹æ–¹, sans-serif;",          // è‹¹æ–¹
            'quote-font-6': "font-family: LiSu, éš¶ä¹¦, cursive;",                     // éš¶ä¹¦
            'quote-font-7': "font-family: YouYuan, å¹¼åœ†, sans-serif;",               // å¹¼åœ†
            'quote-font-8': "font-family: FangSong, ä»¿å®‹, serif;",                   // ä»¿å®‹
            'quote-font-9': "font-family: Tahoma, Arial, sans-serif;",               // Tahoma
            'quote-font-10': "font-family: Arial, sans-serif;",                      // Arial
            'quote-font-11': "font-family: Times New Roman, Times, serif;",          // Times New Roman
            'quote-font-12': "font-family: Georgia, serif;"                         // Georgia
        };
        
        // è·å–å­—ä½“æ ·å¼
        const quoteFontStyle = fontMap[quoteFont] || '';
        
        // åº”ç”¨æ–°ç»´åº¦åˆ°æ ·å¼
        let finalStyle = selectedStyle.style;
        
        // åœ¨styleå­—ç¬¦ä¸²çš„å¼€å¤´æ·»åŠ å­—ä½“ï¼Œç¡®ä¿ä¼˜å…ˆçº§
        if (quoteFontStyle) {
            // å°†å­—ä½“æ ·å¼æ’å…¥åˆ°styleçš„å¼€å§‹ä½ç½®ï¼Œç¡®ä¿ä¼˜å…ˆçº§
            finalStyle = quoteFontStyle + finalStyle;
        }
        
        // æ·»åŠ å¼•ç”¨ç¼©è¿›
        if (quoteIndent) {
            finalStyle += ' text-indent: 2em;';
        }
        
        // æ·»åŠ å¼•ç”¨é˜´å½±
        if (quoteShadow) {
            finalStyle += ' box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);';
        }
        
        // æ·»åŠ å¼•ç”¨æ–œä½“
        if (quoteItalic) {
            finalStyle += ' font-style: italic;';
        }
        
        // ç‰¹æ®Šå¤„ç†æŸäº›æ ·å¼
        let processedContent = content;
        let htmlContent = '';
        
        if (quoteStyle === 'quote-style-13') {
            // å¼•å·å¼•ç”¨
            htmlContent = `<div style="${finalStyle}">
                <span style="position: absolute; top: 8px; left: 16px; font-size: 28px; color: #E2E8F0; line-height: 1;">"</span>
                ${symbolPrefix}${processedContent}
                <span style="position: absolute; bottom: -8px; right: 16px; font-size: 28px; color: #E2E8F0; line-height: 1;">"</span>
            </div>`;
        } else if (quoteStyle === 'quote-style-14') {
            // é¦–å­—å¼•ç”¨
            const firstChar = processedContent.charAt(0);
            const restContent = processedContent.substring(1);
            htmlContent = `<p style="${finalStyle}"><span style="font-size: 32px; line-height: 1; font-weight: 600; color: #07C160; float: left; margin: 6px 8px 4px 0;">${firstChar}</span>${restContent}</p>`;
        } else {
            // å…¶ä»–æ ·å¼ç»Ÿä¸€å¤„ç†
            htmlContent = `<p style="${finalStyle}">${symbolPrefix}${processedContent}</p>`;
        }
        
        return htmlContent;
    }

    // ç”Ÿæˆæ®µè½å—æ ·å¼ï¼ˆæ”¯æŒé˜´å½±ã€ç¼©è¿›ã€èƒŒæ™¯ã€åœ†è§’ç­‰ç‹¬ç«‹è®¾ç½®ï¼‰
    function generateNormalParagraphHTML(content, templateStyle) {
        // è·å–å­—ä½“é£æ ¼æ ·å¼
        const templateCSS = generateTemplateStyleCSS(templateStyle);
        
        // è·å–æ®µè½å—è®¾ç½®é€‰é¡¹
        const enableBlockShadow = document.getElementById('enable-block-shadow')?.checked || false;
        const enableBlockIndent = document.getElementById('enable-block-indent')?.checked || false;
        const blockBackground = document.getElementById('style-block-background')?.value || 'none';
        const enableBlockRadius = document.getElementById('enable-block-radius')?.checked || false;
        
        let styleAttr = templateCSS;
        
        // æ·»åŠ æ®µè½å—èƒŒæ™¯
        if (blockBackground !== 'none') {
            styleAttr += ` background-color: ${blockBackground};`;
            // æ·»åŠ å†…è¾¹è·ä»¥çªå‡ºèƒŒæ™¯æ•ˆæœ
            styleAttr += ` padding: 16px;`;
        }
        
        // æ·»åŠ æ®µè½å—åœ†è§’
        if (enableBlockRadius) {
            styleAttr += ` border-radius: 8px;`;
        }
        
        // æ·»åŠ æ®µè½å—é˜´å½±
        if (enableBlockShadow) {
            styleAttr += ` box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);`;
        }
        
        // æ·»åŠ æ®µè½å—ç¼©è¿›
        if (enableBlockIndent) {
            styleAttr += ` text-indent: 2em;`;
        }
        
        styleAttr += ` line-height: 1.7; font-size: 1rem; margin-bottom: 1.5rem;`;
        
        return `<p style="${styleAttr}">${content}</p>`;
    }

    // ç”Ÿæˆç‰¹æ®Šæ•ˆæœå†…å®¹ï¼ˆå¦‚é¦–å­—ä¸‹æ²‰ç­‰ï¼‰
    function applySpecialEffects(content, styleType) {
        switch(styleType) {
            
            default:
                return content;
        }
    }

    

    function autoFormatText(rawText) {
        
        // æ¯æ¬¡éƒ½åˆå§‹åŒ–
        numberIndex = 0;

        const selectedStyle = document.getElementById('style-select').value;
        const headingStyleType = document.getElementById('heading-style-select').value;
        
        const templateStyleType = document.getElementById('template-style-select').value;
        
        const titleAlign = document.querySelector('input[name="title-align"]:checked').value;
 

        const lines = rawText.split('\n');
        let html = [];
        let inList = false;
        let currentListType = '';
        let partNumber = 0;

        const labels = [
        ];

        function getRandomLabel() {
            const randomIndex = Math.floor(Math.random() * labels.length);
            return labels[randomIndex];
        }

        function processInlineMarkdown(text) {
            // å¤„ç†åŠ ç²—ï¼Œç¡®ä¿å‰åæœ‰ç©ºæ ¼
            text = text.replace(/(\*\*|__)(.*?)\1/g, (match, p1, p2) => {
                return ` <strong>${p2}</strong> `;
            });
            
            // å¤„ç†æ–œä½“
            text = text.replace(/(\*|_)(.*?)\1/g, '<em>$2</em>');
            
            // å¤„ç†åˆ é™¤çº¿
            text = text.replace(/~~(.*?)~~/g, '<del>$1</del>');
            
            // å¤„ç†è¡Œå†…ä»£ç 
            text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
            
            // å¤„ç†æ–°çš„å›¾ç‰‡å¼•ç”¨æ ¼å¼ï¼š![å›¾ç‰‡1], ![img1], ![photo] ç­‰
            text = text.replace(/!\[([^\]]+)\]/g, (match, label) => {
                return processImageReference(label);
            });
            
            // å¤„ç†ä¼ ç»Ÿé“¾æ¥ï¼ˆæ’é™¤å›¾ç‰‡é“¾æ¥ï¼‰
            text = text.replace(/\[([^\]]+)\]\(([^)]+)\)/g, (match, text, href) => {
                // å¦‚æœæ˜¯Base64å›¾ç‰‡é“¾æ¥ï¼Œè·³è¿‡ï¼ˆå·²ç»è¢«ä¸Šé¢çš„å›¾ç‰‡å¤„ç†äº†ï¼‰
                if (href.startsWith('data:image/')) {
                    return match;
                }
                return `<a href="${href}" target="_blank">${text}</a>`;
            });
            
            // å¤„ç†ä¼ ç»Ÿå›¾ç‰‡æ ¼å¼ï¼ˆä¿ç•™å…¼å®¹æ€§ï¼‰
            text = text.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, (match, alt, src) => {
                // ç›´æ¥æ¸²æŸ“ä¸ºå›¾ç‰‡
                return `<img src="${src}" alt="${alt}" style="max-width: 100%; height: auto; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin: 10px 0;">`;
            });

            // æ¸…ç†å¤šä½™ç©ºæ ¼
            text = text.replace(/\s+/g, ' ').trim();

            return text;
        }

        // å¤„ç†å›¾ç‰‡å¼•ç”¨çš„å‡½æ•°
        function processImageReference(label) {
            // å°è¯•è§£æå›¾ç‰‡ç´¢å¼•
            let imageIndex = -1;
            
            // æ ¼å¼1ï¼š![å›¾ç‰‡1], ![å›¾ç‰‡2], ...
            const numberMatch = label.match(/^å›¾ç‰‡(\d+)$/);
            if (numberMatch) {
                imageIndex = parseInt(numberMatch[1]) - 1; // è½¬æ¢ä¸º0-basedç´¢å¼•
            }
            
            // æ ¼å¼2ï¼š![img1], ![img2], ...
            if (imageIndex === -1) {
                const imgNumberMatch = label.match(/^img(\d+)$/i);
                if (imgNumberMatch) {
                    imageIndex = parseInt(imgNumberMatch[1]) - 1;
                }
            }
            
            // æ ¼å¼3ï¼šç›´æ¥ä½¿ç”¨æ•°å­— ![1], ![2], ...
            if (imageIndex === -1) {
                const directNumberMatch = label.match(/^(\d+)$/);
                if (directNumberMatch) {
                    imageIndex = parseInt(directNumberMatch[1]) - 1;
                }
            }
            
            // å¦‚æœæ‰¾åˆ°æœ‰æ•ˆç´¢å¼•ä¸”å›¾ç‰‡å­˜åœ¨
            if (imageIndex >= 0 && imageIndex < imageSrcList.length) {
                const imageSrc = imageSrcList[imageIndex];
                const fileName = imageFiles[imageIndex]?.name || `å›¾ç‰‡${imageIndex + 1}`;
                
                return `<img src="${imageSrc}" alt="${label}" style="max-width: 100%; height: auto; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin: 10px 0;" data-image-ref="${label}" data-image-index="${imageIndex}" data-file-name="${fileName}">`;
            }
            
            // å¦‚æœæ‰¾ä¸åˆ°å¯¹åº”çš„å›¾ç‰‡ï¼Œæ˜¾ç¤ºæç¤º
            return `<span style="color: #dc3545; background: #f8d7da; padding: 2px 6px; border-radius: 4px; font-size: 12px; border: 1px solid #f5c6cb;">âŒ ${label} (æœªæ‰¾åˆ°å¯¹åº”å›¾ç‰‡)</span>`;
        }

        let i = 0;
        while (i < lines.length) {
            const line = lines[i];
            const trimmedLine = line.trim();

            // è·³è¿‡è¿ç»­çš„ç©ºè¡Œ
            if (trimmedLine === '') {
                if (inList) {
                    html.push(currentListType === 'ol' ? '</ol>' : '</ul>');
                    inList = false;
                    currentListType = '';
                }
                i++;
                continue;
            }

            // å¤„ç†æ ‡é¢˜ï¼Œä¸å—åˆ—è¡¨å½±å“
            const headingMatch = trimmedLine.match(/^(#{1,6})\s?(.*)/);
            if (headingMatch) {
                if (inList) {
                    html.push(currentListType === 'ol' ? '</ol>' : '</ul>');
                    inList = false;
                    currentListType = '';
                }
                
                const level = Math.min(headingMatch[1].length, 6);
                const content = processInlineMarkdown(headingMatch[2]);
                
                if(level === 1) {
                    // æ ¹æ®æ ·å¼é€‰é¡¹å†³å®šæ˜¯å¦åº”ç”¨partæ ·å¼
                    html.push(`<div class="part-container">${generateH1HTMLStyle(selectedStyle,titleAlign, content, null)}</div>`);
       
                } else {
                    if (level === 2) {
                        // H2ä½¿ç”¨H1çš„é£æ ¼ç³»ç»Ÿï¼Œä½†ä½¿ç”¨ç‹¬ç«‹å¯¹é½
                        const h2Style = document.getElementById('h2-style-select')?.value || 'style-1';
                        const h2Align = document.querySelector('input[name="h2-align"]:checked')?.value || 'center';
                        const h2NumberIndex = numberIndex++; // H2ç‹¬ç«‹åºå·
                        html.push(`<div class="part-container">${generateH1HTMLStyle(h2Style, h2Align, content, h2NumberIndex)}</div>`);
                    } else {
                        // H3-H6ä½¿ç”¨ç‹¬ç«‹çš„H3-H6æ ·å¼å’Œå¯¹é½
                        const h3h6Align = document.querySelector('input[name="h3h6-align"]:checked')?.value || 'center';
                        html.push(generateHeadingHTMLStyle(headingStyleType, level, content, h3h6Align));
                    }
                }
                i++;
                continue;
            }

            // å¤„ç†å¼•ç”¨å†…å®¹ï¼ˆä»¥>å¼€å¤´ï¼‰
            if (trimmedLine.startsWith('> ')) {
                if (inList) {
                    html.push(currentListType === 'ol' ? '</ol>' : '</ul>');
                    inList = false;
                    currentListType = '';
                }
                
                const content = processInlineMarkdown(trimmedLine.substring(2).trim());
                
                // è·å–å¼•ç”¨è®¾ç½®
                const quoteStyleType = document.getElementById('quote-style-select')?.value || 'quote-style-1';
                const quoteSymbolType = document.getElementById('quote-symbol-select')?.value || 'symbol-0';
                const quoteAlign = document.querySelector('input[name="quote-align"]:checked')?.value || 'center';
                const quoteFont = document.getElementById('quote-font-select')?.value || 'quote-font-1';
                const quoteIndent = document.getElementById('quote-indent')?.checked || false;
                const quoteShadow = document.getElementById('quote-shadow')?.checked || false;
                const quoteItalic = document.getElementById('quote-italic')?.checked || false;
                const quoteFontSize = document.getElementById('quote-font-size-select')?.value || '16px';
                const quoteBorderRadius = document.getElementById('quote-border-radius')?.checked || false;
                
                // ç”Ÿæˆå¼•ç”¨HTML
                const quoteHTML = generateQuoteHTML(content, quoteStyleType, quoteSymbolType, quoteAlign, quoteFont, quoteIndent, quoteShadow, quoteItalic, quoteFontSize, quoteBorderRadius);
                
                html.push(quoteHTML);
                i++;
                continue;
            }

            // å¤„ç†åˆ—è¡¨
            if (/^\d+\.\s/.test(trimmedLine) || /^[-*+]\s/.test(trimmedLine)) {
                if (inList) {
                    // æ£€æŸ¥åˆ—è¡¨ç±»å‹æ˜¯å¦ä¸€è‡´
                    const isOrderedList = /^\d+\.\s/.test(trimmedLine);
                    const currentIsOrdered = currentListType === 'ol';
                    
                    if (isOrderedList !== currentIsOrdered) {
                        // åˆ—è¡¨ç±»å‹æ”¹å˜ï¼Œç»“æŸå½“å‰åˆ—è¡¨å¹¶å¼€å§‹æ–°åˆ—è¡¨
                        html.push(currentListType === 'ol' ? '</ol>' : '</ul>');
                        inList = false;
                        currentListType = '';
                    }
                }
                
                if (!inList) {
                    if (/^\d+\.\s/.test(trimmedLine)) {
                        html.push('<ol class="custom-list">');
                        currentListType = 'ol';
                    } else {
                        html.push('<ul class="custom-list">');
                        currentListType = 'ul';
                    }
                    inList = true;
                }

                // å¤„ç†åˆ—è¡¨é¡¹å†…å®¹
                const listContent = trimmedLine.replace(/^\d+\.\s/, '').replace(/^[-*+]\s/, '');
                const processedContent = processInlineMarkdown(listContent);
                html.push(`<li>${processedContent}</li>`);
                
                i++;
                continue;
            }

            // å¤„ç†æ™®é€šæ®µè½ï¼šæ”¶é›†è¿ç»­çš„éç©ºè¡Œä½œä¸ºå®Œæ•´æ®µè½
            if (inList) {
                html.push(currentListType === 'ol' ? '</ol>' : '</ul>');
                inList = false;
                currentListType = '';
            }

            // æ”¶é›†å½“å‰æ®µè½çš„æ‰€æœ‰è¿ç»­éç©ºè¡Œ
            let paragraphLines = [];
            let j = i;
            let hasSpecialContent = false;
            while (j < lines.length) {
                const currentLine = lines[j];
                const currentTrimmed = currentLine.trim();
                
                // å¦‚æœé‡åˆ°ç©ºè¡Œï¼Œç»“æŸå½“å‰æ®µè½
                if (currentTrimmed === '') {
                    break;
                }
                
                // å¦‚æœé‡åˆ°æ ‡é¢˜ã€å¼•ç”¨ã€åˆ—è¡¨ç­‰ç‰¹æ®Šè¯­æ³•ï¼Œç»“æŸå½“å‰æ®µè½
                if (currentTrimmed.match(/^(#{1,6})\s?/) || 
                    currentTrimmed.startsWith('> ') ||
                    /^\d+\.\s/.test(currentTrimmed) ||
                    /^[-*+]\s/.test(currentTrimmed)) {
                    // ç»“æŸæ®µè½æ”¶é›†ï¼Œå¤–å±‚å¾ªç¯ä¼šå¤„ç†è¿™äº›ç‰¹æ®Šè¯­æ³•
                    hasSpecialContent = true;
                    break;
                }
                
                paragraphLines.push(currentLine);
                j++;
            }
            
            // æ— è®ºä½•ç§æƒ…å†µï¼Œéƒ½æ›´æ–°iåˆ°å½“å‰å¤„ç†ä½ç½®
            i = j;

            // å°†æ®µè½è¡Œåˆå¹¶ä¸ºå®Œæ•´æ®µè½æ–‡æœ¬
            if (paragraphLines.length > 0) {
                const paragraphText = paragraphLines.join('\n');
                const content = processInlineMarkdown(paragraphText);
                
                // æ™®é€šæ®µè½åº”ç”¨é€‰å®šçš„æ®µè½å—è®¾ç½®å’Œå­—ä½“é£æ ¼
                let normalParagraphHTML = generateNormalParagraphHTML(content, templateStyleType);
                html.push(normalParagraphHTML);
            }
            
            }

        if (inList) {
            html.push(currentListType === 'ol' ? '</ol>' : '</ul>');
        }

        return `
            <article class="wechat-article">
                ${html.join('\n')}
            </article>
            <style>
                .wechat-article {
                    max-width: 640px;
                    margin: 20px auto;
                    padding: 20px;
                    font-family: -apple-system, BlinkMacSystemFont, 
                                "Helvetica Neue", "PingFang SC", 
                                "Microsoft YaHei", sans-serif;
                    color: #333;
                    line-height: 1.8;
                    text-align: justify;
                }

                .part-container {
                    display: flex;
                    align-items: center;
                    margin: 2em 0;
                    position: relative;
                    justify-content: center;
                }

                .part-title {
                    color: #3498db;
                    font-size: 24px;
                    font-weight: bold;
                    margin: 0;
                    position: relative;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .part-decorator {
                    width: 3px;
                    height: 24px;
                    background: #3498db;
                    margin-right: 15px;
                }

                .part-label {
                    font-size: 11px;
                    color: #64748b;
                }

                [class^="heading-"] {
                    margin: 1.5em 0 1em;
                    font-weight: 500;
                    border-left: 4px solid;
                    padding-left: 12px;
                }

                .heading-1 { font-size: 20px; color: #2c3e50; border-color: #166a9f; }
                .heading-2 { font-size: 18px; color: #34495e; border-color: #44b0ce; }
                .heading-3 { font-size: 16px; color: #4a5568; border-color: #1abc9c; }
                .heading-4 { font-size: 15px; color: #555; border-color: #f1c40f; }
                .heading-5 { font-size: 14px; color: #666; border-color: #e67e22; }
                .heading-6 { font-size: 13px; color: #777; border-color: #e74c3c; }

                .article-paragraph {
                    margin: 0.8em 0;
                    text-indent: 2em;
                }

                .custom-list {
                    margin: 1em 2em;
                    padding-left: 1.2em;
                    color: #475569;
                    counter-reset: item;
                }

                .custom-list li {
                    margin: 0.6em 0;
                    padding-left: 0.8em;
                }

                ol.custom-list {
                    list-style-type: decimal;
                }

                ul.custom-list {
                    list-style-type: disc;
                }

                .custom-list li::marker {
                    color: #3498db;
                    font-weight: bold;
                }

                /* å›¾ç‰‡æ ·å¼ä¼˜åŒ– */
                .wx-content img, .wechat-article img {
                    max-width: 100% !important;
                    height: auto !important;
                    border-radius: 6px !important;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
                    margin: 10px 0 !important;
                    display: block !important;
                }

                /* ç¡®ä¿Base64å›¾ç‰‡æ­£ç¡®æ˜¾ç¤º */
                img[src^="data:image/"] {
                    max-width: 100% !important;
                    height: auto !important;
                    object-fit: contain !important;
                }

                strong {
                    font-weight: 600;
                    color: #3498db;
                }

                em {
                    font-style: italic;
                    color: #334155;
                }

                del {
                    text-decoration: line-through;
                    color: #94a3b8;
                }

                code {
                    background: #f1f5f9;
                    padding: 2px 4px;
                    border-radius: 3px;
                    font-family: Consolas, Monaco, monospace;
                    font-size: 0.9em;
                    color: #dc2626;
                }

                a {
                    color: #3b82f6;
                    text-decoration: none;
                    border-bottom: 1px solid #3b82f6;
                    transition: all 0.2s;
                }

                a:hover {
                    color: #1d4ed8;
                    border-bottom-color: #1d4ed8;
                }

                img {
                    max-width: 100%;
                    height: auto;
                    margin: 1em auto;
                    display: block;
                    border-radius: 4px;
                }

                @media (max-width: 480px) {
                    .wechat-article {
                        padding: 15px;
                        font-size: 16px;
                    }
                    .heading-1 { font-size: 19px; }
                    .heading-2 { font-size: 17px; }
                    img {
                        width: 100%;
                    }
                }


                        
                /* ================================= é£æ ¼1ï¼šç®€çº¦é«˜çº§é£ï¼ˆç»å…¸æ¬¾ï¼‰================================= */
                .style-1 .section-num {
                    font-size: 18px;
                    font-weight: 700;
                    color: #165DFF;
                    letter-spacing: 1px;
                    margin-bottom: 8px;
                    display: inline-block;
                    position: relative;
                }
                .style-1 .section-num::after {
                    content: "";
                    width: 30px;
                    height: 2px;
                    background-color: #165DFF;
                    position: absolute;
                    bottom: -4px;
                    left: 0;
                    border-radius: 1px;
                }
                .style-1 .section-title {
                    font-size: 32px;
                    color: #2D3748;
                    font-weight: 600;
                    margin-bottom: 15px;
                    line-height: 1.3;
                    padding-bottom: 12px;
                    border-bottom: 1px solid #E5E7EB;
                }

                /* ================================= é£æ ¼2ï¼šå¤å¤è¡¬çº¿é£ï¼ˆæ–‡è‰ºæ¬¾ï¼‰================================= */
                .style-2 .section-num {
                    font-size: 20px;
                    font-weight: 600;
                    color: #8B5A2B;
                    font-family: "Georgia", "SimSun", serif;
                    margin-bottom: 10px;
                    letter-spacing: 2px;
                }
                .style-2 .section-title {
                    font-size: 30px;
                    color: #3C2A21;
                    font-weight: 500;
                    font-family: "Georgia", "SimSun", serif;
                    margin-bottom: 15px;
                    line-height: 1.4;
                    position: relative;
                    padding-left: 20px;
                }
                .style-2 .section-title::before {
                    content: "";
                    width: 4px;
                    height: 100%;
                    background-color: #8B5A2B;
                    position: absolute;
                    left: 0;
                    top: 0;
                    border-radius: 2px;
                }

                /* ================================= é£æ ¼3ï¼šç§‘æŠ€æœªæ¥é£ï¼ˆé…·æ„Ÿæ¬¾ï¼‰================================= */
                .style-3 .section-num {
                    font-size: 18px;
                    font-weight: 700;
                    color: #00F5FF;
                    text-shadow: 0 0 8px rgba(0, 245, 255, 0.5);
                    margin-bottom: 6px;
                    font-family: "Consolas", monospace;
                    letter-spacing: 3px;
                }
                .style-3 .section-title {
                    font-size: 34px;
                    color: #FFFFFF;
                    font-weight: 700;
                    margin-bottom: 15px;
                    line-height: 1.2;
                    padding: 15px 20px;
                    background: linear-gradient(90deg, #121E31, #1E3A5F);
                    border-radius: 8px;
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                }
                .style-3 .content-box {
                    background-color: #FFFFFF;
                    padding: 20px;
                    border-radius: 8px;
                    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                }

                /* ================================= é£æ ¼4ï¼šæ¸…æ–°æ²»æ„ˆé£ï¼ˆæŸ”å’Œæ¬¾ï¼‰================================= */
                 .style-4 .section-num {
                    font-size: 22px;
                    font-weight: 800;
                    color: #48BB78;
                    background-color: #F0FDF4;
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    padding: 5px;
                    align-items: center;
                    text-align: center;
                    display: inline-block;
                }
                .style-4 .section-title {
                    font-size: 28px;
                    color: #22C55E;
                    font-weight: 500;
                    margin-bottom: 15px;
                    line-height: 1.3;
                }
                .style-4 .content-box {
                    border-left: 4px solid #D1FAE5;
                    padding-left: 20px;
                }

                /* ================================= é£æ ¼5ï¼šå¤§èƒ†æ’è‰²é£ï¼ˆå¸ç›æ¬¾ï¼‰================================= */
                .style-5 .section-num {
                    font-size: 22px;
                    font-weight: 800;
                    color: #FFFFFF;
                    background-color: #FF6B35;
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    padding: 5px;
                    align-items: center;
                    text-align: center;
                    display: inline-block;
                }
                .style-5 .section-title {
                    font-size: 28px;
                    color: #2D3748;
                    font-weight: 700;
                    margin-bottom: 15px;
                    line-height: 1.3;
                }
                .style-5 .content-box {
                    border-left: 4px solid #FFE4D6;
                    padding-left: 20px;
                }
 

                /* ================================= é£æ ¼6ï¼šæç®€å‡ ä½•é£ï¼ˆç°ä»£æ¬¾ï¼‰================================= */
                .style-6 .section-header {
                    display: flex;
                    align-items: center;
                    gap: 15px;
                    margin-bottom: 15px;
                }
                .style-6 .section-num {
                    font-size: 18px;
                    font-weight: 700;
                    color: #6366F1;
                    font-family: "Consolas", monospace;
                }
                .style-6 .line {
                    flex: 1;
                    height: 2px;
                    background-color: #E0E7FF;
                }
                .style-6 .section-title {
                    font-size: 28px;
                    color: #4F46E5;
                    font-weight: 600;
                    line-height: 1.3;
                }
                .style-6 .content {
                    margin-top: 10px;
                    color: #374151;
                }

                /* æ–°å¢H2-H6æ ‡é¢˜æ ·å¼ç‰¹æ®Šæ•ˆæœ */
                h2[style*="border-bottom"], h3[style*="border-bottom"], h4[style*="border-bottom"], h5[style*="border-bottom"], h6[style*="border-bottom"] {
                    position: relative;
                }
                
                h2[style*="position: relative"], h3[style*="position: relative"], h4[style*="position: relative"], h5[style*="position: relative"], h6[style*="position: relative"] {
                    position: relative;
                }
                
                h2[style*="text-align: center"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 60px;
                    height: 2px;
                    background-color: #4A90E2;
                    border-radius: 1px;
                }
                
                h2[style*="text-align: left"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 60px;
                    height: 2px;
                    background-color: #4A90E2;
                    border-radius: 1px;
                }
                
                h2[style*="text-align: right"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    right: 0;
                    width: 60px;
                    height: 2px;
                    background-color: #4A90E2;
                    border-radius: 1px;
                }
                
                h3[style*="text-align: center"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 40px;
                    height: 1px;
                    background-color: #5BA3F5;
                }
                
                h3[style*="text-align: left"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 40px;
                    height: 1px;
                    background-color: #5BA3F5;
                }
                
                h3[style*="text-align: right"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    right: 0;
                    width: 40px;
                    height: 1px;
                    background-color: #5BA3F5;
                }
                
                h4[style*="text-align: center"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 30px;
                    height: 1px;
                    background-color: #6B9BD8;
                }
                
                h4[style*="text-align: left"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 30px;
                    height: 1px;
                    background-color: #6B9BD8;
                }
                
                h4[style*="text-align: right"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    right: 0;
                    width: 30px;
                    height: 1px;
                    background-color: #6B9BD8;
                }
                
                h5[style*="text-align: center"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 20px;
                    height: 1px;
                    background-color: #8BB5D0;
                }
                
                h5[style*="text-align: left"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 20px;
                    height: 1px;
                    background-color: #8BB5D0;
                }
                
                h5[style*="text-align: right"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    right: 0;
                    width: 20px;
                    height: 1px;
                    background-color: #8BB5D0;
                }
                
                h6[style*="text-align: center"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 15px;
                    height: 1px;
                    background-color: #9BB0C8;
                }
                
                h6[style*="text-align: left"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 15px;
                    height: 1px;
                    background-color: #9BB0C8;
                }
                
                h6[style*="text-align: right"][style*="position: relative"]::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    right: 0;
                    width: 15px;
                    height: 1px;
                    background-color: #9BB0C8;
                }

                /* æ®µè½ç‰¹æ®Šæ•ˆæœæ ·å¼ */
                .article-paragraph {
                    margin: 0.8em 0;
                    text-indent: 2em;
                }

                /* é¦–å­—ä¸‹æ²‰æ•ˆæœ */
                .article-paragraph span[style*="float: left"] {
                    font-size: 36px !important;
                    line-height: 1 !important;
                    font-weight: 600 !important;
                    color: #07C160 !important;
                    float: left !important;
                    margin: 8px 8px 4px 0 !important;
                }

                /* åˆ†å‰²çº¿æ•ˆæœ */
                .article-paragraph span[style*="text-align: center"] {
                    display: block !important;
                    text-align: center !important;
                }

            </style>
        `;
    }

const rawText = "# æ¬¢è¿ä½¿ç”¨é©¬å…‹é£è±¡\n" +
            "\n" +
            "@(ç¤ºä¾‹ç¬”è®°æœ¬)[é©¬å…‹é£è±¡|å¸®åŠ©|Markdown]\n" +
            "\n" +
            "**é©¬å…‹é£è±¡**æ˜¯ä¸€æ¬¾ä¸“ä¸ºå°è±¡ç¬”è®°ï¼ˆEvernoteï¼‰æ‰“é€ çš„Markdownç¼–è¾‘å™¨ï¼Œé€šè¿‡ç²¾å¿ƒçš„è®¾è®¡ä¸æŠ€æœ¯å®ç°ï¼Œé…åˆå°è±¡ç¬”è®°å¼ºå¤§çš„å­˜å‚¨å’ŒåŒæ­¥åŠŸèƒ½ï¼Œå¸¦æ¥å‰æ‰€æœªæœ‰çš„ä¹¦å†™ä½“éªŒã€‚ç‰¹ç‚¹æ¦‚è¿°ï¼š\n" +
            " \n" +
            "- **åŠŸèƒ½ä¸°å¯Œ** ï¼šæ”¯æŒé«˜äº®ä»£ç å—ã€*LaTeX* å…¬å¼ã€æµç¨‹å›¾ï¼Œæœ¬åœ°å›¾ç‰‡ä»¥åŠé™„ä»¶ä¸Šä¼ ï¼Œç”šè‡³æˆªå›¾ç²˜è´´ï¼Œå·¥ä½œå­¦ä¹ å¥½å¸®æ‰‹ï¼›\n" +
            "- **å¾—å¿ƒåº”æ‰‹** ï¼šç®€æ´é«˜æ•ˆçš„ç¼–è¾‘å™¨ï¼Œæä¾›[æ¡Œé¢å®¢æˆ·ç«¯][1]ä»¥åŠ[ç¦»çº¿Chrome App][2]ï¼Œæ”¯æŒç§»åŠ¨ç«¯ Webï¼›\n" +
            "- **æ·±åº¦æ•´åˆ** ï¼šæ”¯æŒé€‰æ‹©ç¬”è®°æœ¬å’Œæ·»åŠ æ ‡ç­¾ï¼Œæ”¯æŒä»å°è±¡ç¬”è®°è·³è½¬ç¼–è¾‘ï¼Œè½»æ¾ç®¡ç†ã€‚\n" +
            "\n" +
            "-------------------\n" +
            "\n" +
            "[TOC]\n" +
            "\n" +
            "## Markdownç®€ä»‹\n" +
            "\n" +
            "> Markdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç„¶åè½¬æ¢æˆæ ¼å¼ä¸°å¯Œçš„HTMLé¡µé¢ã€‚    â€”â€” [ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/Markdown)\n" +
            "\n" +
            "æ­£å¦‚æ‚¨åœ¨é˜…è¯»çš„è¿™ä»½æ–‡æ¡£ï¼Œå®ƒä½¿ç”¨ç®€å•çš„ç¬¦å·æ ‡è¯†ä¸åŒçš„æ ‡é¢˜ï¼Œå°†æŸäº›æ–‡å­—æ ‡è®°ä¸º**ç²—ä½“**æˆ–è€…*æ–œä½“*ï¼Œåˆ›å»ºä¸€ä¸ª[é“¾æ¥](http://www.example.com)æˆ–ä¸€ä¸ªè„šæ³¨[^demo]ã€‚ä¸‹é¢åˆ—ä¸¾äº†å‡ ä¸ªé«˜çº§åŠŸèƒ½ï¼Œæ›´å¤šè¯­æ³•è¯·æŒ‰`Ctrl + /`æŸ¥çœ‹å¸®åŠ©ã€‚ \n" +
            "\n" +
            "### ä»£ç å—\n" +
            "``` python\n" +
            "@requires_authorization\n" +
            "def somefunc(param1='', param2=0):\n" +
            "    '''A docstring'''\n" +
            "    if param1 > param2: # interesting\n" +
            "        print 'Greater'\n" +
            "    return (param2 - param1 + 1) or None\n" +
            "class SomeClass:\n" +
            "    pass\n" +
            ">>> message = '''interpreter\n" +
            "... prompt'''\n" +
            "```\n" +
            "### LaTeX å…¬å¼\n" +
            "\n" +
            "å¯ä»¥åˆ›å»ºè¡Œå†…å…¬å¼ï¼Œä¾‹å¦‚ $\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$ã€‚æˆ–è€…å—çº§å…¬å¼ï¼š\n" +
            "\n" +
            "$$\tx = \\dfrac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$\n" +
            "\n" +
            "### è¡¨æ ¼\n" +
            "| Item      |    Value | Qty  |\n" +
            "| :-------- | --------:| :--: |\n" +
            "| Computer  | 1600 USD |  5   |\n" +
            "| Phone     |   12 USD |  12  |\n" +
            "| Pipe      |    1 USD | 234  |\n" +
            "\n" +
            "### æµç¨‹å›¾\n" +
            "```flow\n" +
            "st=>start: Start\n" +
            "e=>end\n" +
            "op=>operation: My Operation\n" +
            "cond=>condition: Yes or No?\n" +
            "\n" +
            "st->op->cond\n" +
            "cond(yes)->e\n" +
            "cond(no)->op\n" +
            "```\n" +
            "\n" +
            "ä»¥åŠæ—¶åºå›¾:\n" +
            "\n" +
            "```sequence\n" +
            "Alice->Bob: Hello Bob, how are you?\n" +
            "Note right of Bob: Bob thinks\n" +
            "Bob-->Alice: I am good thanks!\n" +
            "```\n" +
            "\n" +
            "> **æç¤ºï¼š**æƒ³äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹**æµç¨‹å›¾**[è¯­æ³•][3]ä»¥åŠ**æ—¶åºå›¾**[è¯­æ³•][4]ã€‚\n" +
            "\n" +
            "### å¤é€‰æ¡†\n" +
            "\n" +
            "ä½¿ç”¨ `- [ ]` å’Œ `- [x]` è¯­æ³•å¯ä»¥åˆ›å»ºå¤é€‰æ¡†ï¼Œå®ç° todo-list ç­‰åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š\n" +
            "\n" +
            "- [x] å·²å®Œæˆäº‹é¡¹\n" +
            "- [ ] å¾…åŠäº‹é¡¹1\n" +
            "- [ ] å¾…åŠäº‹é¡¹2\n" +
            "\n" +
            "> **æ³¨æ„ï¼š**ç›®å‰æ”¯æŒå°šä¸å®Œå…¨ï¼Œåœ¨å°è±¡ç¬”è®°ä¸­å‹¾é€‰å¤é€‰æ¡†æ˜¯æ— æ•ˆã€ä¸èƒ½åŒæ­¥çš„ï¼Œæ‰€ä»¥å¿…é¡»åœ¨**é©¬å…‹é£è±¡**ä¸­ä¿®æ”¹ Markdown åŸæ–‡æ‰å¯ç”Ÿæ•ˆã€‚ä¸‹ä¸ªç‰ˆæœ¬å°†ä¼šå…¨é¢æ”¯æŒã€‚\n" +
            "\n" +
            "\n" +
            "## å°è±¡ç¬”è®°ç›¸å…³\n" +
            "\n" +
            "### ç¬”è®°æœ¬å’Œæ ‡ç­¾\n" +
            "**é©¬å…‹é£è±¡**å¢åŠ äº†`@(ç¬”è®°æœ¬)[æ ‡ç­¾A|æ ‡ç­¾B]`è¯­æ³•, ä»¥é€‰æ‹©ç¬”è®°æœ¬å’Œæ·»åŠ æ ‡ç­¾ã€‚ **ç»‘å®šè´¦å·å**ï¼Œ è¾“å…¥`(`è‡ªåŠ¨ä¼šå‡ºç°ç¬”è®°æœ¬åˆ—è¡¨ï¼Œè¯·ä»ä¸­é€‰æ‹©ã€‚\n" +
            "\n" +
            "### ç¬”è®°æ ‡é¢˜\n" +
            "**é©¬å…‹é£è±¡**ä¼šè‡ªåŠ¨ä½¿ç”¨æ–‡æ¡£å†…å‡ºç°çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜ä½œä¸ºç¬”è®°æ ‡é¢˜ã€‚ä¾‹å¦‚æœ¬æ–‡ï¼Œå°±æ˜¯ç¬¬ä¸€è¡Œçš„ `æ¬¢è¿ä½¿ç”¨é©¬å…‹é£è±¡`ã€‚\n" +
            "\n" +
            "### å¿«æ·ç¼–è¾‘\n" +
            "ä¿å­˜åœ¨å°è±¡ç¬”è®°ä¸­çš„ç¬”è®°ï¼Œå³ä¸Šè§’ä¼šæœ‰ä¸€ä¸ªçº¢è‰²çš„ç¼–è¾‘æŒ‰é’®ï¼Œç‚¹å‡»åä¼šå›åˆ°**é©¬å…‹é£è±¡**ä¸­æ‰“å¼€å¹¶ç¼–è¾‘è¯¥ç¬”è®°ã€‚\n" +
            ">**æ³¨æ„ï¼š**ç›®å‰ç”¨æˆ·åœ¨å°è±¡ç¬”è®°ä¸­å•æ–¹é¢åšçš„ä»»ä½•ä¿®æ”¹ï¼Œé©¬å…‹é£è±¡æ˜¯æ— æ³•è‡ªåŠ¨æ„ŸçŸ¥å’Œæ›´æ–°çš„ã€‚æ‰€ä»¥è¯·åŠ¡å¿…å›åˆ°é©¬å…‹é£è±¡ç¼–è¾‘ã€‚\n" +
            "\n" +
            "### æ•°æ®åŒæ­¥\n" +
            "**é©¬å…‹é£è±¡**é€šè¿‡**å°†MarkdownåŸæ–‡ä»¥éšè—å†…å®¹ä¿å­˜åœ¨ç¬”è®°ä¸­**çš„ç²¾å¦™è®¾è®¡ï¼Œå®ç°äº†å¯¹Markdownçš„å­˜å‚¨å’Œå†æ¬¡ç¼–è¾‘ã€‚æ—¢è§£å†³äº†å…¶ä»–äº§å“åªæ˜¯å•å‘å¯¼å‡ºHTMLçš„å•è–„ï¼Œåˆè§„é¿äº†æœåŠ¡ç«¯å­˜å‚¨Markdownå¸¦æ¥çš„éšç§å®‰å…¨é—®é¢˜ã€‚è¿™æ ·ï¼ŒæœåŠ¡ç«¯ä»…ä½œä¸ºå¯¹å°è±¡ç¬”è®° APIè°ƒç”¨å’Œæ•°æ®è½¬æ¢ä¹‹ç”¨ã€‚\n" +
            "\n" +
            " >**éšç§å£°æ˜ï¼šç”¨æˆ·æ‰€æœ‰çš„ç¬”è®°æ•°æ®ï¼Œå‡ä¿å­˜åœ¨å°è±¡ç¬”è®°ä¸­ã€‚é©¬å…‹é£è±¡ä¸å­˜å‚¨ç”¨æˆ·çš„ä»»ä½•ç¬”è®°æ•°æ®ã€‚**\n" +
            "\n" +
            "### ç¦»çº¿å­˜å‚¨\n" +
            "**é©¬å…‹é£è±¡**ä½¿ç”¨æµè§ˆå™¨ç¦»çº¿å­˜å‚¨å°†å†…å®¹å®æ—¶ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸å¿…æ‹…å¿ƒç½‘ç»œæ–­æ‰æˆ–æµè§ˆå™¨å´©æºƒã€‚ä¸ºäº†èŠ‚çœç©ºé—´å’Œé¿å…å†²çªï¼Œå·²åŒæ­¥è‡³å°è±¡ç¬”è®°å¹¶ä¸”ä¸å†ä¿®æ”¹çš„ç¬”è®°å°†åˆ é™¤éƒ¨åˆ†æœ¬åœ°ç¼“å­˜ï¼Œä¸è¿‡ä¾ç„¶å¯ä»¥éšæ—¶é€šè¿‡`æ–‡æ¡£ç®¡ç†`æ‰“å¼€ã€‚\n" +
            "\n" +
            "> **æ³¨æ„ï¼š**è™½ç„¶æµè§ˆå™¨å­˜å‚¨å¤§éƒ¨åˆ†æ—¶å€™éƒ½æ¯”è¾ƒå¯é ï¼Œä½†å°è±¡ç¬”è®°ä½œä¸ºä¸“ä¸šäº‘å­˜å‚¨ï¼Œæ›´å€¼å¾—ä¿¡èµ–ã€‚ä»¥é˜²ä¸‡ä¸€ï¼Œ**è¯·åŠ¡å¿…ç»å¸¸åŠæ—¶åŒæ­¥åˆ°å°è±¡ç¬”è®°**ã€‚\n" +
            "\n" +
            "## ç¼–è¾‘å™¨ç›¸å…³\n" +
            "### è®¾ç½®\n" +
            "å³ä¾§ç³»ç»Ÿèœå•ï¼ˆå¿«æ·é”®`Ctrl + M`ï¼‰çš„`è®¾ç½®`ä¸­ï¼Œæä¾›äº†ç•Œé¢å­—ä½“ã€å­—å·ã€è‡ªå®šä¹‰CSSã€vim/emacs é”®ç›˜æ¨¡å¼ç­‰é«˜çº§é€‰é¡¹ã€‚\n" +
            "\n" +
            "### å¿«æ·é”®\n" +
            "\n" +
            "å¸®åŠ©    `Ctrl + /`\n" +
            "åŒæ­¥æ–‡æ¡£    `Ctrl + S`\n" +
            "åˆ›å»ºæ–‡æ¡£    `Ctrl + Alt + N`\n" +
            "æœ€å¤§åŒ–ç¼–è¾‘å™¨    `Ctrl + Enter`\n" +
            "é¢„è§ˆæ–‡æ¡£ `Ctrl + Alt + Enter`\n" +
            "æ–‡æ¡£ç®¡ç†    `Ctrl + O`\n" +
            "ç³»ç»Ÿèœå•    `Ctrl + M` \n" +
            "\n" +
            "åŠ ç²—    `Ctrl + B`\n" +
            "æ’å…¥å›¾ç‰‡    `Ctrl + G`\n" +
            "æ’å…¥é“¾æ¥    `Ctrl + L`\n" +
            "æå‡æ ‡é¢˜    `Ctrl + H`\n" +
            "\n" +
            "## å…³äºæ”¶è´¹\n" +
            "\n" +
            "**é©¬å…‹é£è±¡**ä¸ºæ–°ç”¨æˆ·æä¾› 10 å¤©çš„è¯•ç”¨æœŸï¼Œè¯•ç”¨æœŸè¿‡åéœ€è¦[ç»­è´¹](maxiang.info/vip.html)æ‰èƒ½ç»§ç»­ä½¿ç”¨ã€‚æœªè´­ä¹°æˆ–è€…æœªåŠæ—¶ç»­è´¹ï¼Œå°†ä¸èƒ½åŒæ­¥æ–°çš„ç¬”è®°ã€‚ä¹‹å‰ä¿å­˜è¿‡çš„ç¬”è®°ä¾ç„¶å¯ä»¥ç¼–è¾‘ã€‚\n" +
            "\n" +
            "\n" +
            "## åé¦ˆä¸å»ºè®®\n" +
            "- å¾®åšï¼š[@é©¬å…‹é£è±¡](http://weibo.com/u/2788354117)ï¼Œ[@GGock](http://weibo.com/ggock \"å¼€å‘è€…ä¸ªäººè´¦å·\")\n" +
            "- é‚®ç®±ï¼š<hustgock@gmail.com>\n" +
            "\n" +
            "---------\n" +
            "æ„Ÿè°¢é˜…è¯»è¿™ä»½å¸®åŠ©æ–‡æ¡£ã€‚è¯·ç‚¹å‡»å³ä¸Šè§’ï¼Œç»‘å®šå°è±¡ç¬”è®°è´¦å·ï¼Œå¼€å¯å…¨æ–°çš„è®°å½•ä¸åˆ†äº«ä½“éªŒå§ã€‚\n" +
            "\n" +
            "\n" +
            "\n" +
            "\n" +
            "[^demo]: è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹è„šæ³¨ã€‚è¯·æŸ¥é˜… [MultiMarkdown æ–‡æ¡£](https://github.com/fletcher/MultiMarkdown/wiki/MultiMarkdown-Syntax-Guide#footnotes) å…³äºè„šæ³¨çš„è¯´æ˜ã€‚ **é™åˆ¶ï¼š** å°è±¡ç¬”è®°çš„ç¬”è®°å†…å®¹ä½¿ç”¨ [ENML][5] æ ¼å¼ï¼ŒåŸºäº HTMLï¼Œä½†æ˜¯ä¸æ”¯æŒæŸäº›æ ‡ç­¾å’Œå±æ€§ï¼Œä¾‹å¦‚idï¼Œè¿™å°±å¯¼è‡´`è„šæ³¨`å’Œ`TOC`æ— æ³•æ­£å¸¸ç‚¹å‡»ã€‚\n" +
            "\n" +
            "\n" +
            "  [1]: http://maxiang.info/client_zh\n" +
            "  [2]: https://chrome.google.com/webstore/detail/kidnkfckhbdkfgbicccmdggmpgogehop\n" +
            "  [3]: http://adrai.github.io/flowchart.js/\n" +
            "  [4]: http://bramp.github.io/js-sequence-diagrams/\n" +
            "  [5]: https://dev.yinxiang.com/doc/articles/enml.php\n" +
            "\n";

            const rawText2 = `\n# åŒ—å±¿çš„è“è‰²1\n\n## åŒ—å±¿çš„è“è‰²2\n### åŒ—å±¿çš„è“è‰²3\n#### åŒ—å±¿çš„è“è‰²4\n##### åŒ—å±¿çš„è“è‰²5\n###### åŒ—å±¿çš„è“è‰²6\n####### åŒ—å±¿çš„è“è‰²7 ######## åŒ—å±¿çš„è“è‰²8+AI \n\n1æœˆä»½çš„æ—¶å€™ï¼Œå¸‚åœºæ›¾ç‚’ä½œè¿‡ä¸€æ®µæ—¶é—´çš„æƒ…æ„Ÿäº¤äº’ã€‚å½¼æ—¶ï¼Œ**è‹è±ªå¼˜ä¸šè¿ç»­æ¶¨åœ**ã€‚##æ˜¨å¤©ï¼Œ\n-ç¬¬ä¸€éƒ¨åˆ†ï¼Œ\n*ç¬¬äºŒéƒ¨åˆ†ï¼Œ\n+ç¬¬ä¸‰éƒ¨åˆ†ï¼Œ\nåœ¨DeepSeekçš„åŠ æŒä¹‹ä¸‹ï¼Œè¿™ä¸ªé¢˜æå†åº¦å‘é…µï¼Œæµ™æ±Ÿä¼—æˆç­‰è‚¡ç¥¨æ¶¨åœï¼Œä»Šå¤©ï¼Œç¡…å®ç§‘æŠ€ã€æµ™æ±Ÿä¼—æˆã€è¶£ç¡ç§‘æŠ€ã€\n2.AAA\n1.BBB\n1.CCC\nçˆ±æ…•è‚¡ä»½å†åº¦é›†ä½“æ¶¨åœã€‚\nä¸€ä»½å¸‚åœºç‚¹è¯„è®¤ä¸ºï¼ŒAIå¤§æ¨¡å‹+æŸ”æ€§ææ–™+ç”Ÿç†ä¼ æ„ŸæŠ€æœ¯é©±åŠ¨ä¸‹ï¼Œæƒ…è¶£æœºå™¨äººæ­£ä»"ç”Ÿç†å·¥å…·"å‘"æƒ…æ„Ÿä¼´ä¾£"è·ƒè¿ï¼Œæ‰“å¼€æ–°å¸‚åœºç©ºé—´ã€‚æ®æµ‹ç®—ï¼Œå…¨çƒæƒ…è¶£æœºå™¨äººå¸‚åœºè§„æ¨¡2031å¹´å°†çªç ´3äº¿ç¾å…ƒï¼ŒæŠ€æœ¯è¿­ä»£ä¸ä¼¦ç†ç ´å†°ä¸‹ï¼Œå…·å¤‡ææ–™ã€AIäº¤äº’ã€å¥åº·ç›‘æµ‹èƒ½åŠ›çš„å‚å•†å°†ç‡å…ˆå—ç›Šã€‚\n\n#é›†ä½“æ¶¨åœ\n\nä»Šå¤©ï¼Œæœ‰ä¸€ä¸ªèµ›é“è·‘å‡ºæ¥äº†ï¼Œé‚£å°±æ˜¯2025å¹´äººå½¢ä¼´ä¾£æœºå™¨äººèµ›é“ã€‚æˆªè‡³ç›®å‰ï¼Œè¯¥æ¡èµ›é“çš„è‚¡ç¥¨å…¨çº¿æ¶¨åœã€‚\n\nè¡Œä¸šå¤„åœ¨"åŠŸèƒ½æ»¡è¶³"åˆ°"æƒ…ç»ªä»·å€¼"çš„é˜¶æ®µã€‚DeepSeekç­‰å¼€æºå¤§æ¨¡å‹èµ‹èƒ½æƒ…æ„Ÿäº¤äº’ï¼ŒAIå¨ƒå¨ƒå¯å®ç°é•¿æœŸè®°å¿†å­˜å‚¨ã€ä¸ªæ€§åŒ–åé¦ˆåŠç”Ÿç†æ•°æ®è”åŠ¨ï¼ˆå¦‚æ ¹æ®å¿ƒç‡åŠ¨æ€è°ƒæ•´äº’åŠ¨æ¨¡å¼ï¼‰ã€‚éœ€æ±‚åˆšæ€§äº¦å‡¸æ˜¾ï¼Œä¸­å›½å•èº«äººå£è¶…2.4äº¿ï¼Œå åŠ è€é¾„åŒ–è¶‹åŠ¿ï¼Œæƒ…æ„Ÿé™ªä¼´éœ€æ±‚æ¿€å¢ã€‚\næœºå™¨äººæ¿å—å†åº¦çˆ†å‘\nä¸æ­¤åŒæ—¶ï¼Œåˆåï¼Œæœºå™¨äººæ¿å—å†åº¦æ‹‰å‡ã€‚é•¿ç››è½´æ‰¿åˆåå¤§æ¶¨è¶…15%ï¼Œå†åˆ›å†å²æ–°é«˜ï¼Œè‚¡ä»·æ¶¨è¶…110å…ƒï¼Œç›¸æ¯”å»å¹´2æœˆ6æ—¥æœ€ä½ä»·10.84å…ƒè‚¡ä»·æ¶¨è¶…10å€ï¼Œç´¯è®¡æ¶¨å¹…è¶…830%ã€‚æœºå™¨äººETFä¸€åº¦å¤§æ¶¨è¶…2%ã€‚\näº‹ä»¶æ–¹é¢ï¼Œ2025å…¨çƒå¼€å‘è€…å…ˆé”‹å¤§ä¼šå°†äº2æœˆ21æ—¥è‡³23æ—¥åœ¨ä¸Šæµ·å¾æ±‡ä¸¾åŠï¼Œå¤§ä¼šä»¥"æ¨¡å¡‘å…¨çƒ æ— é™å¯èƒ½"ä¸ºä¸»é¢˜ï¼Œèšç„¦å¤§æ¨¡å‹ã€ç®—åŠ›ã€è¯­æ–™ã€å·¥å…·ã€è½¯ä»¶å¹³å°ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œå‚ä¸çš„å¼€å‘è€…ç¾¤ä½“åŒ…æ‹¬ç¡¬ä»¶å¼€å‘ã€äº‘è®¡ç®—ã€å¤§æ•°æ®ã€ç‰©è”ç½‘ã€äººå·¥æ™ºèƒ½ã€æœºå™¨äººã€åŒºå—é“¾å’Œå…ƒå®‡å®™ã€‚æœ¬æ¬¡å¤§ä¼šå®šä½äº"ç¤¾åŒºçš„ç¤¾åŒº"ï¼Œå……åˆ†å¸å¼•å›½é™…å¼€å‘è€…ç¤¾åŒºå‚ä¸æœ¬æ¬¡å¤§ä¼šã€‚\næ®æ‚‰ï¼Œæœ¬æ¬¡å¤§ä¼šäº®ç‚¹ä¸»è¦ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼šä¸€æ˜¯ä½“ç°ä¸Šæµ·å¸‚äººå·¥æ™ºèƒ½äº§ä¸šç”Ÿæ€é›†ç¾¤ä¸°å¯Œï¼Œå·²åˆæ­¥å½¢æˆäººå·¥æ™ºèƒ½ä¸Šæµ·é˜Ÿï¼›äºŒæ˜¯æœ¬æ¬¡å¤§ä¼šæ˜¯å…¨çƒç¬¬ä¸€ä¸ªå®šä½æœåŠ¡äºå…¨å‘˜å¼€å‘è€…çš„å¤§ä¼šï¼Œé›†èšå›½å†…å¤–100å®¶å¼€å‘è€…ç¤¾åŒºå‚ä¸æœ¬æ¬¡å¤§ä¼šï¼›ä¸‰æ˜¯åœºæ™¯å…¨è¦†ç›–ï¼Œé’ˆå¯¹"5+6"é¢†åŸŸå’Œè¡Œä¸šï¼Œæ¢ç´¢å¤§æ¨¡å‹äº§ä¸šåŒ–è§£å†³æ–¹æ¡ˆï¼Œæ¨è¿›åœºæ™¯è½åœ°åº”ç”¨ï¼Œå®ç°å•†ä¸šæ¨¡å¼çš„æ­£å‘é—­ç¯ï¼Œæ¨åŠ¨ç”Ÿæ€é“¾æ¥åˆä½œã€‚\nå¦ä¸€æ–¹é¢ï¼Œæ®ä¸­æ–°ç¤¾æœ€æ–°æŠ¥é“ï¼Œä¸Šæµ·é¦–åº§åŒ—å±¿çš„è“è‰²é‡äº§åœ°â€”â€”æ™ºå…ƒæœºå™¨äººåˆ¶é€ å·¥å‚æŠ•äº§ä¸è¿‡æ•°æœˆï¼Œ2024å¹´å·²ä¸‹çº¿1000å°åŒ—å±¿çš„è“è‰²ï¼Œå¹¶å°†åœ¨2025å¹´å®ç°æ•°åƒå°çš„å¹´äº§é‡ã€‚ä¸šå†…è®¤ä¸ºï¼Œ2025å¹´å°†æ˜¯åŒ—å±¿çš„è“è‰²çš„é‡äº§å…ƒå¹´ï¼Œè¯¥äº§ä¸šæ­£ä»¥è¶…çº¿æ€§çš„é€Ÿåº¦çªç ´ä¸´ç•Œç‚¹ã€‚ä¸Šæµ·æ‹¥æœ‰é«˜ç«¯åˆ¶é€ ä¸šçš„åŸºç¡€ã€é•¿ä¸‰è§’å®Œå¤‡çš„ä¾›åº”é“¾åŠäº§ä¸šé…å¥—ï¼Œä»¥åŠä¸°å¯Œçš„é«˜æ ¡èµ„æºå’Œäººæ‰å‚¨å¤‡ï¼Œæ˜¯äº§ä¸šåŠ é€Ÿçš„åŸºç¡€ã€‚\nå…‰å¤§è¯åˆ¸è®¤ä¸ºï¼Œæœºå™¨äººäº§ä¸šè¶‹åŠ¿åŠ é€ŸèƒŒæ™¯ä¸‹ï¼Œå»ºè®®å…³æ³¨ PEEKã€ç¢³çº¤ç»´ã€è¶…é«˜åˆ†å­é‡èšä¹™çƒ¯ã€èšçƒ¯çƒƒå‘æ³¡ææ–™ç­‰åŒ–å·¥ææ–™ã€‚\nï¼ˆ1ï¼‰è½»é‡åŒ–æ˜¯è¾ƒå¥½å®ç°åŒ—å±¿çš„è“è‰²è´Ÿè½½ã€ç»­èˆªèƒ½åŠ›å’Œçµæ´»æ€§ç­‰çš„è§£å†³æ–¹æ³•ä¹‹ä¸€ã€‚PEEKã€ç¢³çº¤ç»´ç­‰æ€§èƒ½æä½³çš„è½»é‡åŒ–ææ–™ï¼Œåœ¨æœºå™¨äººé¢†åŸŸçš„æ½œåœ¨åº”ç”¨ç©ºé—´è¾ƒå¤§ï¼Œéœ€æ±‚ç©ºé—´æœ‰æœ›å¤§å¹…æå‡ã€‚æ­¤å¤–ï¼Œé€šè¿‡ä½¿ç”¨ç¢³çº¤ç»´å¯¹PEEKæ”¹æ€§è¿˜å¯ä»¥æå‡PEEKææ–™çš„æœºæ¢°å¼ºåº¦ã€è€æ‘©æ“¦å’ŒæŠ—ç£¨æŸæ€§èƒ½ï¼Œå¯åº”ç”¨åœ¨æœºå™¨äººçš„æœºæ¢°è‡‚ã€å…³èŠ‚è¿æ†ã€é½¿è½®è½´æ‰¿ç­‰éƒ¨ä½ã€‚ï¼ˆ2ï¼‰è¶…é«˜åˆ†å­é‡èšä¹™çƒ¯æ€§èƒ½ä¼˜å¼‚åº”ç”¨å¹¿æ³›ï¼Œä¸‹æ¸¸å¯ç”¨äºåŒ—å±¿çš„è“è‰²é¢†åŸŸã€‚å…¶å…·æœ‰é«˜å¼ºé«˜æ¨¡ã€è€å†²å‡»æ€§ã€è€ç£¨æ€§ã€è€åŒ–å­¦è…èš€ã€ç”µç»ç¼˜å’Œè€å…‰æ€§ç­‰ä¼˜å¼‚æ€§èƒ½ï¼Œæ¯”å¼ºåº¦ç›¸å½“äºä¼˜è´¨é’¢ä¸çš„ 15 å€ã€ ç¢³çº¤ç»´çš„ 1.8 å€ã€èŠ³çº¶çš„ 1.6 å€ï¼Œæ‹¥æœ‰è¶…ä½çš„æ–­è£‚ä¼¸é•¿ç‡ï¼Œèƒ½é‡å¸æ”¶ç‡é«˜ï¼Œå¯†åº¦æ¯”æ°´å°ï¼ŒæŸ”è½¯æ˜“å¼¯æ›²ã€‚è¶…é«˜åˆ†å­é‡èšä¹™çƒ¯çº¤ç»´æœ‰æœ›åœ¨æœªæ¥çš„çµå·§æ‰‹ä¸­å æ®ä¸€å¸­ä¹‹åœ°ï¼Œè¿˜å¯ä»¥åº”ç”¨ä¸ºåŒ—å±¿çš„è“è‰²è…±ç»³ä¼ å¯¼ææ–™ï¼Œæä¾›æ‰€éœ€çš„å¼ºåº¦å’Œè€ä¹…æ€§ã€‚\nï¼ˆ3ï¼‰èšçƒ¯çƒƒå‘æ³¡ææ–™æ˜¯ä»¥çƒ¯çƒƒèšåˆç‰©ä¸ºä¸»è¦åŸææ–™ï¼Œé€šè¿‡å¤æ‚çš„å‘æ³¡å·¥è‰ºä½¿ææ–™ä¸­äº§ç”Ÿå¤§é‡ç‹¬ç«‹çš„ç»†å¾®æ³¡å­”ï¼Œ\n2.AAA\n1.BBB\n1.CCC\nå¹¶å‡åŒ€åˆ†æ•£äºå›ºä½“ææ–™ä¸­çš„ä¸€ç±» é«˜åˆ†å­ææ–™ã€‚`; // åŸå§‹æ–‡æœ¬å†…å®¹

            
        // åˆå§‹åŒ–Markdownè§£æå™¨
        marked.setOptions({
            breaks: true,
            highlight: function(code) {
                return hljs.highlightAuto(code).value;
            }
        });

        // å®æ—¶é¢„è§ˆ
        const editor = document.getElementById('editor');
        const preview = document.getElementById('preview');

        editor.addEventListener('input', () => {
            const markdown = editor.value;
            const html = autoFormatText(markdown);
            preview.innerHTML = html;
        });

        // æ®µè½å—è®¾ç½®é€‰é¡¹äº‹ä»¶ç›‘å¬
        document.getElementById('enable-block-shadow')?.addEventListener('change', changeHtml);
        document.getElementById('enable-block-indent')?.addEventListener('change', changeHtml);
        document.getElementById('style-block-background')?.addEventListener('change', changeHtml);
        document.getElementById('enable-block-radius')?.addEventListener('change', changeHtml);

        // å¼•ç”¨è®¾ç½®é€‰é¡¹äº‹ä»¶ç›‘å¬
        document.getElementById('quote-style-select')?.addEventListener('change', changeHtml);
        document.getElementById('quote-symbol-select')?.addEventListener('change', changeHtml);
        document.getElementById('quote-font-select')?.addEventListener('change', changeHtml);
        document.getElementById('quote-indent')?.addEventListener('change', changeHtml);
        document.getElementById('quote-shadow')?.addEventListener('change', changeHtml);
        document.getElementById('quote-italic')?.addEventListener('change', changeHtml);
        document.getElementById('quote-font-size-select')?.addEventListener('change', changeHtml);
        document.getElementById('quote-border-radius')?.addEventListener('change', changeHtml);

        // H2ç‹¬ç«‹å¯¹é½å’Œé£æ ¼äº‹ä»¶ç›‘å¬
        document.querySelectorAll('input[name="h2-align"]')?.forEach(radio => {
            radio.addEventListener('change', changeHtml);
        });
        document.getElementById('h2-style-select')?.addEventListener('change', changeHtml);

        // H3-H6ç‹¬ç«‹å¯¹é½äº‹ä»¶ç›‘å¬
        document.querySelectorAll('input[name="h3h6-align"]')?.forEach(radio => {
            radio.addEventListener('change', changeHtml);
        });

        // å›¾ç‰‡å¤„ç†äº‹ä»¶ç›‘å¬
        setupImageEventListeners();

        // ç¤ºä¾‹å†…å®¹ï¼Œå±•ç¤ºå„ç§æ–°åŠŸèƒ½
        const demoContent = `# å¾®ä¿¡å…¬ä¼—å·æ ·å¼å·¥å…·æ¼”ç¤º

## æ ‡é¢˜æ ·å¼æ¼”ç¤º

è¿™æ˜¯ä¸€ä¸ªH2æ ‡é¢˜ï¼Œå±•ç¤ºä¸åŒçš„æ ‡é¢˜æ ·å¼æ•ˆæœã€‚

### H3æ ‡é¢˜æ ·å¼

è¿™é‡Œæ˜¯H3æ ‡é¢˜çš„å†…å®¹ï¼Œå¯ä»¥åº”ç”¨åˆ°ä¸åŒçš„è§†è§‰é£æ ¼ã€‚

#### H4æ ‡é¢˜æ¼”ç¤º

H4æ ‡é¢˜ä¹Ÿæ”¯æŒå¤šç§æ ·å¼é€‰æ‹©ã€‚

##### H5å’ŒH6æ ‡é¢˜

H5å’ŒH6æ ‡é¢˜åŒæ ·æœ‰å¤šæ ·åŒ–çš„æ ·å¼æ•ˆæœã€‚

## æ®µè½é£æ ¼æ¼”ç¤º

è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ®µè½çš„æ¼”ç¤ºæ–‡æœ¬ï¼Œå±•ç¤ºæ®µè½é£æ ¼çš„ä¸°å¯Œæ•ˆæœã€‚

### é‡è¦æç¤º

**é‡è¦æç¤º**ï¼šè¿™æ˜¯ä¸€æ®µé‡è¦çš„æç¤ºæ–‡æœ¬ï¼Œç”¨äºå¼ºè°ƒå…³é”®ä¿¡æ¯ã€‚

### æ®µè½æ ¼å¼è¯´æ˜

**é‡è¦æç¤º**ï¼šç°åœ¨çš„æ®µè½å¤„ç†æŒ‰ç…§æ­£ç¡®çš„Markdownè§„åˆ™ï¼š
- è¿ç»­æ¢è¡Œä½†æ— ç©ºè¡Œçš„å†…å®¹å±äºåŒä¸€æ®µè½
- åªæœ‰ç©ºè¡Œåˆ†éš”çš„å†…å®¹æ‰æ˜¯ç‹¬ç«‹æ®µè½
- æ®µè½æ ·å¼ï¼ˆèƒŒæ™¯ã€åœ†è§’ã€é˜´å½±ç­‰ï¼‰åªåº”ç”¨äºå®Œæ•´çš„æ®µè½

è¿™æ ·å¯ä»¥ç¡®ä¿æ®µè½æ ·å¼è®¾ç½®æ›´åŠ ç²¾ç¡®å’Œç¬¦åˆé¢„æœŸã€‚

## åˆ—è¡¨æ ·å¼

1. æœ‰åºåˆ—è¡¨é¡¹ä¸€
2. æœ‰åºåˆ—è¡¨é¡¹äºŒ  
3. æœ‰åºåˆ—è¡¨é¡¹ä¸‰

- æ— åºåˆ—è¡¨é¡¹ä¸€
- æ— åºåˆ—è¡¨é¡¹äºŒ
- æ— åºåˆ—è¡¨é¡¹ä¸‰

### é¦–å­—ä¸‹æ²‰æ•ˆæœæµ‹è¯•

é¦–å­—ä¸‹æ²‰æ˜¯ä¸€ç§ç»å…¸çš„æ’ç‰ˆæŠ€å·§ï¼Œèƒ½å¤Ÿå¸å¼•è¯»è€…æ³¨æ„åŠ›ï¼Œå¢åŠ æ–‡ç« çš„æ’ç‰ˆç¾æ„Ÿå’Œå¤å…¸éŸµå‘³ã€‚

## åˆ†å‰²çº¿æ•ˆæœ

ç« èŠ‚åˆ†å‰²

---

## æ®µè½æ ·å¼æµ‹è¯•ï¼ˆæŒ‰ç©ºè¡Œåˆ†éš”ï¼‰

è¿™é‡Œæ˜¯ç¬¬ä¸€æ®µçš„å†…å®¹ã€‚è™½ç„¶æˆ‘æ¢äº†ä¸€è¡Œï¼Œ
ä½†è¿™é‡Œä»ç„¶æ˜¯åŒä¸€ä¸ªæ®µè½ï¼Œå› ä¸ºæ²¡æœ‰ç©ºè¡Œåˆ†éš”ã€‚

è¿™é‡Œæ˜¯ç¬¬äºŒæ®µï¼Œä¸ä¸Šä¸€æ®µä¹‹é—´æœ‰ç©ºè¡Œåˆ†éš”ï¼Œ
æ‰€ä»¥æ˜¯ç‹¬ç«‹çš„æ®µè½ï¼Œä¼šåº”ç”¨å®Œæ•´çš„æ®µè½æ ·å¼è®¾ç½®ã€‚

è¿™é‡Œæ˜¯ç¬¬ä¸‰æ®µï¼Œç»§ç»­å±•ç¤ºæ®µè½æ•ˆæœã€‚
è™½ç„¶ä¹Ÿæ˜¯æ¢è¡Œï¼Œä½†æ²¡æœ‰ç©ºè¡Œï¼Œæ‰€ä»¥è¿˜æ˜¯ç¬¬ä¸‰æ®µã€‚

## å¼•ç”¨æ ·å¼ï¼ˆæŒ‰ç©ºè¡Œåˆ†éš”çš„æ®µè½ï¼‰

> è¿™æ˜¯ç¬¬ä¸€æ®µå¼•ç”¨å†…å®¹ï¼Œç”¨äºå±•ç¤ºå¼•ç”¨æ ·å¼æ•ˆæœã€‚

> è¿™æ˜¯ç¬¬äºŒæ®µå¼•ç”¨ï¼Œä¸ç¬¬ä¸€æ®µä¹‹é—´æœ‰ç©ºè¡Œåˆ†éš”ï¼Œä¼šåº”ç”¨ç‹¬ç«‹çš„å¼•ç”¨æ ·å¼ã€‚

> è¿™æ˜¯ç¬¬ä¸‰æ®µå¼•ç”¨ï¼ŒåŒæ ·æ˜¯ç‹¬ç«‹æ®µè½ï¼Œå±•ç¤ºä¸åŒå¼•ç”¨é£æ ¼çš„æ•ˆæœã€‚

## ä»£ç ç¤ºä¾‹

è¿™é‡Œæœ‰ä¸€æ®µ \`è¡Œå†…ä»£ç \` çš„æ¼”ç¤ºã€‚

\`\`\`javascript
function demo() {
    console.log("ä»£ç é«˜äº®æ•ˆæœ");
}
\`\`\`

[é“¾æ¥æ¼”ç¤º](https://example.com)`;

        // è®¾ç½®é»˜è®¤æ ·å¼
        document.getElementById('style-select').value = 'style-2';
        document.getElementById('heading-style-select').value = 'heading-style-2';
        document.getElementById('quote-style-select').value = 'quote-style-1';
        document.getElementById('quote-symbol-select').value = 'symbol-0';
        
        document.getElementById('template-style-select').value = 'template-style-1';
        
        editor.value = demoContent
        const html = autoFormatText(editor.value);
        preview.innerHTML = html;
        
        // å¤åˆ¶å…¬ä¼—å·å…¼å®¹å†…å®¹
        function copyWechatHTML() {
            const markdown = editor.value;
            const htmlContent = autoFormatText(markdown);

            // åˆ›å»ºä¸´æ—¶textareaå…ƒç´ 
            const textarea = document.createElement('textarea');
            textarea.value = htmlContent;
            document.body.appendChild(textarea);

            try {
                // é€‰æ‹©æ–‡æœ¬
                textarea.select();
                textarea.setSelectionRange(0, textarea.value.length);

                // æ‰§è¡Œå¤åˆ¶å‘½ä»¤
                const successful = document.execCommand('copy');
                
                if (successful) {
                    showToast('âœ¨ å¤åˆ¶æˆåŠŸï¼');
                } else {
                    showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·ä½¿ç”¨Ctrl+Cæ‰‹åŠ¨å¤åˆ¶');
                }
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·ä½¿ç”¨Ctrl+Cæ‰‹åŠ¨å¤åˆ¶');
            } finally {
                // ç§»é™¤ä¸´æ—¶å…ƒç´ 
                document.body.removeChild(textarea);
            }
        }

        function showToast(message, duration = 2000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // å›¾ç‰‡å¤„ç†ç›¸å…³å‡½æ•°
        function handleImageFiles(files) {
            const imageFilesList = Array.from(files).filter(file => file.type.startsWith('image/'));
            
            if (imageFilesList.length === 0) {
                showToast('è¯·é€‰æ‹©æœ‰æ•ˆçš„å›¾ç‰‡æ–‡ä»¶');
                return;
            }

            imageFilesList.forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    imageFiles.push(file);
                    imageSrcList.push(e.target.result);
                    updateImageList();
                    updateImagePreview();
                };
                reader.readAsDataURL(file);
            });
            
            showToast(`æˆåŠŸæ·»åŠ  ${imageFilesList.length} å¼ å›¾ç‰‡`);
        }

        // å¤„ç†URLå›¾ç‰‡å¹¶è½¬æ¢ä¸ºBase64
        function handleUrlImage() {
            const urlInput = document.getElementById('image-url-input');
            const url = urlInput.value.trim();
            
            if (!url) {
                showToast('è¯·è¾“å…¥å›¾ç‰‡URL');
                return;
            }
            
            // éªŒè¯URLæ ¼å¼
            try {
                new URL(url);
            } catch (e) {
                showToast('è¯·è¾“å…¥æœ‰æ•ˆçš„URL');
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºHTTP/HTTPS
            const urlObj = new URL(url);
            if (!['http:', 'https:'].includes(urlObj.protocol)) {
                showToast('åªæ”¯æŒHTTPå’ŒHTTPSåè®®çš„URL');
                return;
            }
            
            // åˆ›å»ºåŠ è½½çŠ¶æ€æ˜¾ç¤º
            showToast('ğŸ”„ æ­£åœ¨ä¸‹è½½å¹¶è½¬æ¢ä¸ºBase64...');
            
            // åˆ›å»ºè™šæ‹Ÿæ–‡ä»¶å¯¹è±¡ï¼ˆåˆå§‹çŠ¶æ€ï¼‰
            const urlImageInfo = {
                name: `URLå›¾ç‰‡_${new Date().getTime()}`,
                type: 'url',
                url: url,
                status: 'loading'
            };
            
            const tempIndex = imageFiles.length;
            imageFiles.push(urlImageInfo);
            imageSrcList.push(url); // ä¸´æ—¶æ˜¾ç¤ºåŸURL
            updateImageList();
            updateImagePreview();
            
            // å¼€å§‹è½¬æ¢ä¸ºBase64
            convertUrlToBase64(url, tempIndex)
                .then((base64Data) => {
                    // è½¬æ¢æˆåŠŸ
                    imageFiles[tempIndex].status = 'converted';
                    imageSrcList[tempIndex] = base64Data;
                    imageFiles[tempIndex].base64 = base64Data; // ä¿å­˜base64æ•°æ®
                    
                    updateImageList();
                    updateImagePreview();
                    showToast('âœ… URLå›¾ç‰‡å·²æˆåŠŸè½¬æ¢ä¸ºBase64');
                    
                    // è§¦å‘é¢„è§ˆæ›´æ–°
                    changeHtml();
                })
                .catch((error) => {
                    console.error('Base64è½¬æ¢å¤±è´¥:', error);
                    showToast('âš ï¸ Base64è½¬æ¢å¤±è´¥ï¼š' + (error.message || 'ç½‘ç»œé”™è¯¯æˆ–CORSé™åˆ¶'));
                    
                    // è½¬æ¢å¤±è´¥æ—¶ä»ç„¶ä¿ç•™åŸURL
                    imageFiles[tempIndex].status = 'failed';
                    updateImageList();
                    updateImagePreview();
                });
            
            urlInput.value = '';
        }

        // å°†URLå›¾ç‰‡è½¬æ¢ä¸ºBase64
        function convertUrlToBase64(url, imageIndex) {
            return new Promise((resolve, reject) => {
                // æ–¹æ³•1ï¼šå°è¯•ä½¿ç”¨CORSä»£ç†
                const corsProxy = 'https://api.allorigins.win/raw?url=';
                const proxyUrl = corsProxy + encodeURIComponent(url);
                
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.crossOrigin = 'anonymous'; // å°è¯•å¯ç”¨CORS
                
                img.onload = function() {
                    try {
                        // è®¾ç½®canvaså°ºå¯¸
                        canvas.width = img.naturalWidth;
                        canvas.height = img.naturalHeight;
                        
                        // ç»˜åˆ¶å›¾ç‰‡åˆ°canvas
                        ctx.drawImage(img, 0, 0);
                        
                        // è½¬æ¢ä¸ºBase64
                        const base64 = canvas.toDataURL('image/png');
                        
                        // æ¸…ç†
                        canvas.width = 0;
                        canvas.height = 0;
                        
                        resolve(base64);
                    } catch (error) {
                        reject(new Error('Canvaså¤„ç†å¤±è´¥'));
                    }
                };
                
                img.onerror = function() {
                    // æ–¹æ³•2ï¼šå°è¯•ä½¿ç”¨ä»£ç†
                    const proxyImg = new Image();
                    proxyImg.crossOrigin = 'anonymous';
                    
                    proxyImg.onload = function() {
                        try {
                            canvas.width = proxyImg.naturalWidth;
                            canvas.height = proxyImg.naturalHeight;
                            ctx.drawImage(proxyImg, 0, 0);
                            const base64 = canvas.toDataURL('image/png');
                            canvas.width = 0;
                            canvas.height = 0;
                            resolve(base64);
                        } catch (error) {
                            reject(new Error('ä»£ç†å›¾ç‰‡å¤„ç†å¤±è´¥'));
                        }
                    };
                    
                    proxyImg.onerror = function() {
                        reject(new Error('æ— æ³•è®¿é—®å›¾ç‰‡ï¼Œå¯èƒ½å­˜åœ¨CORSé™åˆ¶æˆ–å›¾ç‰‡ä¸å¯è®¿é—®'));
                    };
                    
                    proxyImg.src = proxyUrl;
                };
                
                img.src = url;
            });
        }

        // æ‰¹é‡è½¬æ¢æ‰€æœ‰URLå›¾ç‰‡ä¸ºBase64
        function convertAllUrlImagesToBase64() {
            const urlImages = imageFiles.filter(file => file.type === 'url');
            
            if (urlImages.length === 0) {
                showToast('æ²¡æœ‰éœ€è¦è½¬æ¢çš„URLå›¾ç‰‡');
                return;
            }

            // æ£€æŸ¥æ˜¯å¦æœ‰å·²è½¬æ¢çš„å›¾ç‰‡
            const unconvertedImages = urlImages.filter(file => file.status !== 'converted');
            
            if (unconvertedImages.length === 0) {
                showToast('æ‰€æœ‰URLå›¾ç‰‡å·²ç»æ˜¯Base64æ ¼å¼');
                return;
            }

            showToast(`ğŸ”„ å¼€å§‹è½¬æ¢ ${unconvertedImages.length} ä¸ªURLå›¾ç‰‡ä¸ºBase64...`);

            let convertedCount = 0;
            let failedCount = 0;
            const totalCount = unconvertedImages.length;

            // æ‰¹é‡è½¬æ¢ï¼ˆå¹¶å‘é™åˆ¶ï¼Œé¿å…è¿‡å¤šè¯·æ±‚ï¼‰
            const batchSize = 3;
            const batches = [];
            
            for (let i = 0; i < unconvertedImages.length; i += batchSize) {
                batches.push(unconvertedImages.slice(i, i + batchSize));
            }

            function processBatch(batch) {
                const promises = batch.map(urlImage => {
                    return new Promise((resolve) => {
                        // æ‰¾åˆ°å¯¹åº”çš„ç´¢å¼•
                        const imageIndex = imageFiles.indexOf(urlImage);
                        
                        if (imageIndex === -1) {
                            resolve(false);
                            return;
                        }

                        // å¦‚æœå·²ç»æ˜¯Base64ï¼Œç›´æ¥è·³è¿‡
                        if (urlImage.status === 'converted') {
                            resolve(true);
                            return;
                        }

                        // æ›´æ–°çŠ¶æ€ä¸ºè½¬æ¢ä¸­
                        urlImage.status = 'loading';
                        updateImageList();
                        updateImagePreview();

                        convertUrlToBase64(urlImage.url, imageIndex)
                            .then((base64Data) => {
                                // è½¬æ¢æˆåŠŸ
                                imageFiles[imageIndex].status = 'converted';
                                imageSrcList[imageIndex] = base64Data;
                                imageFiles[imageIndex].base64 = base64Data;
                                
                                convertedCount++;
                                resolve(true);
                            })
                            .catch((error) => {
                                console.error('Base64è½¬æ¢å¤±è´¥:', error);
                                imageFiles[imageIndex].status = 'failed';
                                failedCount++;
                                resolve(false);
                            });
                    });
                });

                return Promise.all(promises);
            }

            // å¤„ç†æ‰€æœ‰æ‰¹æ¬¡
            async function processAllBatches() {
                for (const batch of batches) {
                    await processBatch(batch);
                    
                    // æ›´æ–°ç•Œé¢
                    updateImageList();
                    updateImagePreview();
                    
                    // ç»™ç”¨æˆ·åé¦ˆè¿›åº¦
                    showToast(`è¿›åº¦: å·²è½¬æ¢ ${convertedCount + failedCount}/${totalCount}`);
                }

                // è½¬æ¢å®Œæˆåç»™å‡ºç»“æœ
                if (failedCount === 0) {
                    showToast(`âœ… æˆåŠŸè½¬æ¢ ${convertedCount} ä¸ªURLå›¾ç‰‡ä¸ºBase64`);
                } else if (convertedCount === 0) {
                    showToast(`âŒ è½¬æ¢å¤±è´¥ï¼Œæ‰€æœ‰ ${totalCount} ä¸ªå›¾ç‰‡éƒ½æ— æ³•è½¬æ¢`);
                } else {
                    showToast(`âš ï¸ éƒ¨åˆ†æˆåŠŸï¼šè½¬æ¢äº† ${convertedCount} ä¸ªï¼Œå¤±è´¥ ${failedCount} ä¸ª`);
                }

                // è§¦å‘é¢„è§ˆæ›´æ–°
                changeHtml();
            }

            processAllBatches();
        }

        function updateImageList() {
            const imageList = document.getElementById('image-list');
            if (imageFiles.length === 0) {
                imageList.innerHTML = '<span style="color: #6c757d; font-size: 14px;">æš‚æ— å›¾ç‰‡ï¼Œè¯·é€‰æ‹©æˆ–æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶</span>';
                return;
            }

            let html = '';
            imageFiles.forEach((file, index) => {
                const isUrlImage = file.type === 'url';
                let displayName, displaySrc, statusColor, statusText;
                
                if (isUrlImage) {
                    if (file.status === 'loading') {
                        displayName = `${file.name} (è½¬æ¢ä¸­...)`;
                        displaySrc = file.url;
                        statusColor = '#ffc107';
                        statusText = 'è½¬æ¢ä¸­';
                    } else if (file.status === 'converted') {
                        displayName = `${file.name} (Base64)`;
                        displaySrc = imageSrcList[index];
                        statusColor = '#28a745';
                        statusText = 'Base64';
                    } else {
                        displayName = `${file.name} (URL)`;
                        displaySrc = file.url;
                        statusColor = '#17a2b8';
                        statusText = 'URL';
                    }
                } else {
                    displayName = file.name;
                    displaySrc = imageSrcList[index];
                    statusColor = '#6c757d';
                    statusText = 'æœ¬åœ°';
                }
                
                html += `
                    <div style="display: inline-block; margin: 5px; padding: 8px; border: 1px solid #dee2e6; border-radius: 4px; background: #fff; position: relative;">
                        <img src="${displaySrc}" alt="${displayName}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 4px;" onerror="this.style.display='none'">
                        <div style="font-size: 11px; color: ${isUrlImage ? statusColor : '#6c757d'}; margin-top: 4px; max-width: 80px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${displayName}">
                            <span style="color: ${statusColor}; font-weight: bold;">â—</span> ${displayName}
                        </div>
                        <button onclick="removeImage(${index})" style="position: absolute; top: -5px; right: -5px; width: 20px; height: 20px; background: #dc3545; color: white; border: none; border-radius: 50%; cursor: pointer; font-size: 12px; line-height: 1;">Ã—</button>
                    </div>
                `;
            });
            imageList.innerHTML = html;
        }

        function updateImagePreview() {
            const previewContent = document.getElementById('image-preview-content');
            if (imageFiles.length === 0) {
                previewContent.innerHTML = '<span style="color: #6c757d; font-size: 14px; grid-column: 1 / -1; text-align: center; padding: 20px;">æš‚æ— å›¾ç‰‡ï¼Œè¯·é€‰æ‹©æˆ–æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶</span>';
                return;
            }

            // æ£€æŸ¥æ¯ä¸ªå›¾ç‰‡æ˜¯å¦åœ¨æ–‡æ¡£ä¸­è¢«ä½¿ç”¨ï¼ˆæ–°æ ¼å¼æ£€æµ‹ï¼‰
            const editor = document.getElementById('editor');
            const documentText = editor ? editor.value : '';
            
            let html = '';
            imageFiles.forEach((file, index) => {
                const imageRef = `å›¾ç‰‡${index + 1}`;
                const isUrlImage = file.type === 'url';
                
                let displaySrc, statusColor, statusText, indicatorText;
                
                if (isUrlImage) {
                    if (file.status === 'loading') {
                        displaySrc = file.url;
                        statusColor = '#ffc107';
                        statusText = 'è½¬æ¢ä¸­';
                        indicatorText = 'URL';
                    } else if (file.status === 'converted') {
                        displaySrc = imageSrcList[index];
                        statusColor = '#28a745';
                        statusText = 'Base64';
                        indicatorText = 'Base64';
                    } else {
                        displaySrc = file.url;
                        statusColor = '#dc3545';
                        statusText = 'å¤±è´¥';
                        indicatorText = 'URL';
                    }
                } else {
                    displaySrc = imageSrcList[index];
                    statusColor = '#6c757d';
                    statusText = 'æœ¬åœ°';
                    indicatorText = 'æœ¬åœ°';
                }
                
                // æ£€æŸ¥æ–°æ ¼å¼çš„ä½¿ç”¨æƒ…å†µï¼š![å›¾ç‰‡1] æ ¼å¼
                const isUsed = documentText.includes(`![${imageRef}]`);
                
                // å¦‚æœæ˜¯æ–°æ ¼å¼æœªæ£€æµ‹åˆ°ï¼Œå†æ£€æŸ¥æ—§æ ¼å¼ä½œä¸ºå¤‡ç”¨ï¼ˆåªå¯¹éURLå›¾ç‰‡æ£€æŸ¥base64ï¼‰
                const oldFormatUsed = !isUrlImage && documentText.includes(imageSrcList[index]);
                const finalIsUsed = isUsed || oldFormatUsed;
                
                const usedStatus = finalIsUsed ? 
                    '<span style="position: absolute; top: 8px; left: 8px; background: #28a745; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">å·²ä½¿ç”¨</span>' :
                    '<span style="position: absolute; top: 8px; left: 8px; background: #6c757d; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">æœªä½¿ç”¨</span>';
                
                const typeIndicator = `<span style="position: absolute; top: 8px; right: 8px; background: ${statusColor}; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">${indicatorText}</span>`;
                
                html += `
                    <div style="position: relative; border: 1px solid ${finalIsUsed ? '#28a745' : '#dee2e6'}; border-radius: 6px; overflow: hidden; background: #fff;">
                        ${usedStatus}
                        ${typeIndicator}
                        <img src="${displaySrc}" alt="${file.name}" style="width: 100%; height: 100px; object-fit: cover; cursor: pointer;" onclick="showImageModal('${displaySrc}', '${file.name}')" onerror="this.style.display='none'">
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 4px 6px; font-size: 11px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
                            <div style="font-weight: bold; color: #28a745;">${imageRef}</div>
                            <div style="font-size: 10px; color: #ccc; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                ${isUrlImage ? (file.status === 'converted' ? 'Base64æ ¼å¼' : file.url) : file.name}
                            </div>
                        </div>
                        <div style="position: absolute; bottom: 0; right: 0; background: ${finalIsUsed ? '#28a745' : '#ffc107'}; color: white; padding: 2px 6px; font-size: 10px; border-radius: 4px 0 0 0;">
                            ${finalIsUsed ? 'âœ…' : 'ğŸ“'}
                        </div>
                    </div>
                `;
            });
            previewContent.innerHTML = html;
        }

        function removeImage(index) {
            imageFiles.splice(index, 1);
            imageSrcList.splice(index, 1);
            updateImageList();
            updateImagePreview();
        }

        function clearImages() {
            imageFiles = [];
            imageSrcList = [];
            updateImageList();
            updateImagePreview();
        }

        function showImageModal(src, name) {
            // ç®€å•çš„å›¾ç‰‡é¢„è§ˆæ¨¡æ€æ¡†
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
            `;
            modal.innerHTML = `
                <div style="position: relative; max-width: 90%; max-height: 90%;">
                    <img src="${src}" alt="${name}" style="max-width: 100%; max-height: 100%; border-radius: 8px;">
                    <button onclick="this.closest('.image-modal').remove()" style="position: absolute; top: -40px; right: 0; background: #fff; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; font-size: 18px;">Ã—</button>
                </div>
            `;
            modal.className = 'image-modal';
            document.body.appendChild(modal);
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        function setupImageEventListeners() {
            // é€‰æ‹©å›¾ç‰‡æŒ‰é’®
            const pickImagesBtn = document.getElementById('pick-images-btn');
            const fileInputBtn = document.getElementById('file-input-btn');
            const clearImagesBtn = document.getElementById('clear-images-btn');
            const imageList = document.getElementById('image-list');

            // é€‰æ‹©å›¾ç‰‡æŒ‰é’®äº‹ä»¶
            pickImagesBtn.addEventListener('click', () => {
                fileInputBtn.click();
            });

            // æ’å…¥å›¾ç‰‡æŒ‰é’®äº‹ä»¶
            const insertImageBtn = document.getElementById('insert-image-btn');
            insertImageBtn.addEventListener('click', showImageSelectModal);

            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶
            fileInputBtn.addEventListener('change', (e) => {
                handleImageFiles(e.target.files);
                fileInputBtn.value = ''; // æ¸…ç©ºè¾“å…¥
            });

            // æ¸…ç©ºå›¾ç‰‡æŒ‰é’®äº‹ä»¶
            clearImagesBtn.addEventListener('click', () => {
                clearImages();
            });

            // æ·»åŠ URLå›¾ç‰‡æŒ‰é’®äº‹ä»¶
            const addUrlImageBtn = document.getElementById('add-url-image-btn');
            addUrlImageBtn.addEventListener('click', handleUrlImage);

            // æ‰¹é‡è½¬æ¢URLå›¾ç‰‡ä¸ºBase64æŒ‰é’®äº‹ä»¶
            const convertAllUrlBtn = document.getElementById('convert-all-url-btn');
            convertAllUrlBtn.addEventListener('click', convertAllUrlImagesToBase64);

            // å›è½¦é”®æ·»åŠ URLå›¾ç‰‡
            const imageUrlInput = document.getElementById('image-url-input');
            imageUrlInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleUrlImage();
                }
            });

            // å–æ¶ˆæ’å…¥æŒ‰é’®äº‹ä»¶
            const cancelInsertBtn = document.getElementById('cancel-insert-btn');
            cancelInsertBtn.addEventListener('click', hideImageSelectModal);

            // æ‹–æ‹½äº‹ä»¶
            imageList.addEventListener('dragover', (e) => {
                e.preventDefault();
                imageList.style.backgroundColor = '#e3f2fd';
                imageList.style.borderColor = '#2196f3';
            });

            imageList.addEventListener('dragleave', (e) => {
                e.preventDefault();
                imageList.style.backgroundColor = '#fff';
                imageList.style.borderColor = '#dee2e6';
            });

            imageList.addEventListener('drop', (e) => {
                e.preventDefault();
                imageList.style.backgroundColor = '#fff';
                imageList.style.borderColor = '#dee2e6';
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleImageFiles(files);
                }
            });

            // ç§»é™¤å…¨å±€æ‹–æ‹½äº‹ä»¶ï¼Œé¿å…é‡å¤å¤„ç†
        }

        // å›¾ç‰‡æ’å…¥ç›¸å…³å‡½æ•°
        function showImageSelectModal() {
            const modal = document.getElementById('image-select-modal');
            const grid = document.getElementById('image-select-grid');
            
            if (imageFiles.length === 0) {
                showToast('è¯·å…ˆé€‰æ‹©å›¾ç‰‡æ–‡ä»¶');
                return;
            }

            let html = '';
            imageFiles.forEach((file, index) => {
                const imageRef = `å›¾ç‰‡${index + 1}`;
                html += `
                    <div style="border: 1px solid #ddd; border-radius: 6px; overflow: hidden; cursor: pointer; transition: all 0.2s; position: relative;" 
                         onclick="insertImageAtCursor(${index})"
                         onmouseover="this.style.borderColor='#007bff'; this.style.transform='scale(1.02)'"
                         onmouseout="this.style.borderColor='#ddd'; this.style.transform='scale(1)'">
                        <img src="${imageSrcList[index]}" alt="${file.name}" style="width: 100%; height: 120px; object-fit: cover;">
                        <div style="padding: 8px; font-size: 11px; color: #666; text-align: center; background: #f8f9fa;">
                            <div style="font-weight: bold; color: #007bff; margin-bottom: 4px;">${imageRef}</div>
                            <div style="font-size: 10px; color: #999; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${file.name}</div>
                        </div>
                        <div style="position: absolute; top: 8px; right: 8px; background: #007bff; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px;">
                            ç‚¹å‡»æ’å…¥
                        </div>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
            modal.style.display = 'flex';
        }

        function hideImageSelectModal() {
            const modal = document.getElementById('image-select-modal');
            modal.style.display = 'none';
        }

        function insertImageAtCursor(imageIndex) {
            const editor = document.getElementById('editor');
            const file = imageFiles[imageIndex];
            
            // ç”Ÿæˆç®€æ´çš„å›¾ç‰‡æ ‡ç­¾ï¼ˆä½¿ç”¨è¯­ä¹‰åŒ–åç§°ï¼‰
            const imageName = `å›¾ç‰‡${imageIndex + 1}`;
            
            // è·å–å½“å‰å…‰æ ‡ä½ç½®
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const text = editor.value;
            
            // ä½¿ç”¨æ–°çš„çŸ­æ ¼å¼ï¼š![å›¾ç‰‡1] è€Œä¸æ˜¯é•¿Base64
            const imageMarkdown = `![${imageName}]\n\n`;
            
            // æ’å…¥å›¾ç‰‡åˆ°å…‰æ ‡ä½ç½®
            const newText = text.substring(0, start) + imageMarkdown + text.substring(end);
            editor.value = newText;
            
            // è®¾ç½®å…‰æ ‡ä½ç½®åˆ°æ’å…¥çš„å›¾ç‰‡åé¢
            const newCursorPos = start + imageMarkdown.length;
            editor.setSelectionRange(newCursorPos, newCursorPos);
            editor.focus();
            
            // éšè—æ¨¡æ€æ¡†
            hideImageSelectModal();
            
            // è§¦å‘é¢„è§ˆæ›´æ–°
            changeHtml();
            
            showToast(`å›¾ç‰‡å·²æ’å…¥åˆ°æ–‡ç« ä¸­ï¼š${file.name} (æ ¼å¼: ${imageMarkdown.trim()})`);
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.getElementById('image-select-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideImageSelectModal();
            }
        });
    </script>
    
    <!-- ä»£ç é«˜äº® -->
    <script src="./js/highlight.min.js"></script>
</body>
</html>