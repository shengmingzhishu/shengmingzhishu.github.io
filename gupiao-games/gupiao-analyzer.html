<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‚¡ç¥¨æ™ºèƒ½åˆ†æç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 10px;
            gap: 10px;
        }
        
        /* ä¸Šå±‚æ ·å¼ */
        .upper-section {
            height: 50%;
            display: flex;
            gap: 10px;
        }
        
        /* ä¸‹å±‚æ ·å¼ */
        .lower-section {
            height: 50%;
            display: flex;
            gap: 10px;
        }
        
        /* å·¦ä¾§é¢æ¿æ ·å¼ */
        .left-panel {
            width: 35%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }
        
        /* å³ä¾§é¢æ¿æ ·å¼ */
        .right-panel {
            width: 65%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }
        
        /* è¾“å…¥åŒºåŸŸæ ·å¼ */
        .input-area {
            height: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .input-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .input-textarea {
            flex: 1;
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            resize: none;
            transition: border-color 0.3s;
        }
        
        .input-textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .send-button {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .send-button:hover {
            transform: translateY(-2px);
        }
        
        .send-button:active {
            transform: translateY(0);
        }
        
        /* Markdowné¢„è§ˆæ ·å¼ */
        .markdown-preview {
            height: 100%;
            overflow-y: auto;
        }
        
        .markdown-content {
            line-height: 1.6;
            color: #333;
        }
        
        .markdown-content h1 {
            font-size: 2em;
            margin: 20px 0 10px 0;
            color: #667eea;
        }
        
        .markdown-content h2 {
            font-size: 1.5em;
            margin: 15px 0 8px 0;
            color: #764ba2;
        }
        
        .markdown-content h3 {
            font-size: 1.2em;
            margin: 10px 0 5px 0;
            color: #555;
        }
        
        .markdown-content p {
            margin: 8px 0;
        }
        
        .markdown-content ul {
            margin: 10px 0 10px 20px;
        }
        
        .markdown-content li {
            margin: 5px 0;
        }
        
        .markdown-content strong {
            color: #667eea;
            font-weight: bold;
        }
        
        /* è‚¡ç¥¨åˆ—è¡¨æ ·å¼ */
        .stock-list {
            height: 100%;
            overflow-y: auto;
        }
        
        .sector-group {
            margin-bottom: 20px;
        }
        
        .sector-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            padding: 8px 12px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
        }
        
        .stock-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        
        .stock-item:hover {
            transform: translateX(5px);
        }
        
        .stock-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .stock-code {
            font-weight: bold;
            color: #333;
        }
        
        .stock-name {
            color: #666;
        }
        
        .stock-score {
            width: 60px;
            height: 30px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 12px;
        }
        
        .score-5 {
            background: linear-gradient(135deg, #28a745, #20c997);
        }
        
        .score-4 {
            background: linear-gradient(135deg, #17a2b8, #20c997);
        }
        
        .score-3 {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
        }
        
        .score-2 {
            background: linear-gradient(135deg, #fd7e14, #dc3545);
        }
        
        .score-1 {
            background: linear-gradient(135deg, #dc3545, #6f42c1);
        }
        
        .trend-arrow {
            margin-left: 10px;
            font-size: 18px;
        }
        
        .trend-up {
            color: #28a745;
        }
        
        .trend-down {
            color: #dc3545;
        }
        
        .analyze-button {
            margin-left: 10px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }
        
        .analyze-button:hover {
            transform: scale(1.1);
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }
        
        .loading.active {
            display: block;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 5px;
                gap: 5px;
            }
            
            .upper-section, .lower-section {
                flex-direction: column;
                height: auto;
                min-height: 50%;
            }
            
            .left-panel, .right-panel {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ä¸Šå±‚ï¼šè¾“å…¥å’Œåˆ†æç»“æœ -->
        <div class="upper-section">
            <!-- å·¦ä¾§è¾“å…¥åŒºåŸŸ -->
            <div class="left-panel">
                <div class="input-area">
                    <div class="input-title">ğŸ“ æ™ºèƒ½åˆ†æè¾“å…¥</div>
                    <textarea 
                        class="input-textarea" 
                        placeholder="è¯·è¾“å…¥è¦åˆ†æçš„å†…å®¹ï¼Œä¾‹å¦‚ï¼š&#10;â€¢ æ”¿ç­–æ–°é—»ï¼šäººå¤§ä¼šè®®ç»æµæ”¿ç­–å†³ç­–&#10;â€¢ è¡Œä¸šçƒ­ç‚¹ï¼šæ–°èƒ½æºæ±½è½¦å‘å±•è§„åˆ’&#10;â€¢ å¸‚åœºäº‹ä»¶ï¼šç¾è”å‚¨åˆ©ç‡å†³è®®&#10;â€¢ å…³é”®è¯ï¼šäººå·¥æ™ºèƒ½ã€èŠ¯ç‰‡ã€æ–°èƒ½æºç­‰"
                        id="inputText"
                    ></textarea>
                    <button class="send-button" onclick="analyzeInput()">
                        ğŸš€ å¼€å§‹åˆ†æ
                    </button>
                </div>
            </div>
            
            <!-- å³ä¾§åˆ†æç»“æœ -->
            <div class="right-panel">
                <div class="markdown-preview">
                    <div class="loading" id="upperLoading">
                        <div class="spinner"></div>
                        <div>æ­£åœ¨åˆ†æä¸­ï¼Œè¯·ç¨å€™...</div>
                    </div>
                    <div class="markdown-content" id="analysisResult">
                        <h2>ğŸ“Š åˆ†æç»“æœé¢„è§ˆ</h2>
                        <p>è¯·åœ¨å·¦ä¾§è¾“å…¥è¦åˆ†æçš„å†…å®¹ï¼Œç³»ç»Ÿå°†ä¸ºæ‚¨åˆ†æç›¸å…³æ¿å—å’Œè‚¡ç¥¨æœºä¼šã€‚</p>
                        <p><strong>æ”¯æŒçš„åˆ†æç±»å‹ï¼š</strong></p>
                        <ul>
                            <li>æ”¿ç­–å½±å“åˆ†æ</li>
                            <li>è¡Œä¸šçƒ­ç‚¹è§£è¯»</li>
                            <li>å¸‚åœºäº‹ä»¶è¯„ä¼°</li>
                            <li>å…³é”®è¯å…³è”åˆ†æ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä¸‹å±‚ï¼šè‚¡ç¥¨åˆ—è¡¨å’Œè¯¦ç»†åˆ†æ -->
        <div class="lower-section">
            <!-- å·¦ä¾§è‚¡ç¥¨åˆ—è¡¨ -->
            <div class="left-panel">
                <div class="stock-list">
                    <div class="input-title" style="font-size: 1.2em; margin-bottom: 15px;">
                        ğŸ“ˆ è‚¡ç¥¨æœºä¼šåˆ—è¡¨
                    </div>
                    <div class="loading" id="lowerLoading">
                        <div class="spinner"></div>
                        <div>æ­£åœ¨åŠ è½½è‚¡ç¥¨æ•°æ®...</div>
                    </div>
                    <div id="stockList">
                        <p style="color: #666; text-align: center; margin-top: 50px;">
                            è¯·å…ˆè¿›è¡Œä¸Šæ–¹åˆ†æä»¥è·å–è‚¡ç¥¨åˆ—è¡¨
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- å³ä¾§è¯¦ç»†åˆ†æ -->
            <div class="right-panel">
                <div class="markdown-preview">
                    <div class="loading" id="detailLoading">
                        <div class="spinner"></div>
                        <div>æ­£åœ¨åˆ†æè‚¡ç¥¨è¯¦æƒ…ï¼Œè¯·ç¨å€™...</div>
                    </div>
                    <div class="markdown-content" id="stockDetail">
                        <h2>ğŸ” è‚¡ç¥¨è¯¦ç»†åˆ†æ</h2>
                        <p>ç‚¹å‡»è‚¡ç¥¨åˆ—è¡¨ä¸­çš„åˆ†ææŒ‰é’®æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚</p>
                        <p><strong>åˆ†æå†…å®¹åŒ…æ‹¬ï¼š</strong></p>
                        <ul>
                            <li>æŠ€æœ¯æŒ‡æ ‡æ£€æµ‹</li>
                            <li>çœŸå‡èµ„é‡‘åˆ¤æ–­</li>
                            <li>é£é™©ä¿¡å·è¯†åˆ«</li>
                            <li>æ“ä½œå»ºè®®</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥marked.jsç”¨äºMarkdownè§£æ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <script>
        // DeepSeek APIé…ç½®
        const DEEPSEEK_API_KEY = 'sk-ccff3a0580064305ab0edddcc561c2d2';
        const DEEPSEEK_API_URL = 'https://api.deepseek.com/v1/chat/completions';
        
        // å­˜å‚¨åˆ†æç»“æœ
        let analysisData = null;
        let stockData = null;
        
        // åˆ†æè¾“å…¥å†…å®¹
        async function analyzeInput() {
            const inputText = document.getElementById('inputText').value.trim();
            
            if (!inputText) {
                alert('è¯·è¾“å…¥è¦åˆ†æçš„å†…å®¹');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
            showLoading('upperLoading');
            
            try {
                // æ„å»ºåˆ†ææç¤ºè¯
                const prompt = buildAnalysisPrompt(inputText);
                
                // è°ƒç”¨DeepSeek API
                const response = await callDeepSeekAPI(prompt);
                
                // è§£æå“åº”
                const result = parseAnalysisResponse(response, inputText);
                
                // æ˜¾ç¤ºåˆ†æç»“æœ
                displayAnalysisResult(result);
                
                // æ˜¾ç¤ºè‚¡ç¥¨åˆ—è¡¨
                displayStockList(result.stocks);
                
            } catch (error) {
                console.error('åˆ†æå¤±è´¥:', error);
                showError('åˆ†æå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
            } finally {
                hideLoading('upperLoading');
            }
        }
        
        // æ„å»ºåˆ†ææç¤ºè¯
        function buildAnalysisPrompt(inputText) {
            return `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è‚¡ç¥¨åˆ†æå¸ˆï¼Œè¯·åˆ†æä»¥ä¸‹å†…å®¹å¹¶è¯†åˆ«ç›¸å…³çš„è‚¡ç¥¨æ¿å—ã€‚

è¾“å…¥å†…å®¹ï¼š${inputText}

è¯·æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¿›è¡Œåˆ†æï¼š

1. å…³é”®è¯è¯†åˆ«ï¼šæå–æ–‡æœ¬ä¸­çš„å…³é”®è¯
2. åˆ†ææ€è€ƒï¼šè¯¦ç»†è¯´æ˜è¿™äº›å…³é”®è¯å¦‚ä½•å½±å“ç›¸å…³æ¿å—ï¼Œä¸ºä»€ä¹ˆè¿™äº›æ¿å—ä¼šå—ç›Š
3. æ¿å—æ¨èï¼šåˆ—å‡º7ä¸ªæœ€ç›¸å…³çš„å—ç›Šæ¿å—ï¼Œæ¯ä¸ªæ¿å—åŒ…å«3-5åªä»£è¡¨æ€§è‚¡ç¥¨

è¦æ±‚ï¼š
- æ¿å—è¦å…·ä½“ï¼Œä¸è¦è¿‡äºå®½æ³›
- è€ƒè™‘çŸ­æœŸï¼ˆ1å‘¨å†…ï¼‰å’Œä¸­æœŸï¼ˆ1-3ä¸ªæœˆï¼‰çš„å½±å“
- ä¼˜å…ˆè€ƒè™‘ç›´æ¥å—ç›Šçš„æ¿å—
- æ¯åªè‚¡ç¥¨åŒ…å«ä»£ç ã€åç§°ã€è¯„åˆ†ï¼ˆ1-5åˆ†ï¼‰ã€è¶‹åŠ¿ï¼ˆçœ‹æ¶¨/çœ‹è·Œï¼‰
- è¯„åˆ†æ ‡å‡†ï¼š5åˆ†=å¼ºçƒˆæ¨èï¼Œ4åˆ†=æ¨èï¼Œ3åˆ†=ä¸­æ€§ï¼Œ2åˆ†=è°¨æ…ï¼Œ1åˆ†=è§„é¿

è¯·ç”¨JSONæ ¼å¼è¿”å›ç»“æœï¼š
{
    "keywords": ["å…³é”®è¯1", "å…³é”®è¯2", ...],
    "thinking": "è¯¦ç»†çš„åˆ†ææ€è€ƒè¿‡ç¨‹",
    "sectors": [
        {
            "name": "æ¿å—åç§°",
            "reason": "å—ç›ŠåŸå› ",
            "timeframe": "çŸ­æœŸ/ä¸­æœŸ",
            "confidence": "é«˜/ä¸­/ä½",
            "stocks": [
                {
                    "code": "è‚¡ç¥¨ä»£ç ",
                    "name": "è‚¡ç¥¨åç§°",
                    "score": è¯„åˆ†æ•°å­—,
                    "trend": "çœ‹æ¶¨/çœ‹è·Œ",
                    "reason": "æ¨èç†ç”±"
                }
            ]
        }
    ]
}`;
        }
        
        // è°ƒç”¨DeepSeek API
        async function callDeepSeekAPI(prompt) {
            const response = await fetch(DEEPSEEK_API_URL, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${DEEPSEEK_API_KEY}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: 'deepseek-chat',
                    messages: [
                        {
                            role: 'system',
                            content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è‚¡ç¥¨åˆ†æå¸ˆï¼Œæ“…é•¿åˆ†ææ”¿ç­–ã€äº‹ä»¶å¯¹è‚¡å¸‚æ¿å—çš„å½±å“ã€‚'
                        },
                        {
                            role: 'user',
                            content: prompt
                        }
                    ],
                    temperature: 0.3,
                    max_tokens: 2000
                })
            });
            
            if (!response.ok) {
                throw new Error(`APIè°ƒç”¨å¤±è´¥: ${response.status}`);
            }
            
            const data = await response.json();
            return data.choices[0].message.content;
        }
        
        // è§£æåˆ†æå“åº”
        function parseAnalysisResponse(response, inputText) {
            try {
                // å°è¯•ç›´æ¥è§£æJSON
                let result;
                if (response.trim().startsWith('{')) {
                    result = JSON.parse(response);
                } else {
                    // æå–JSONéƒ¨åˆ†
                    const jsonMatch = response.match(/\{.*\}/s);
                    if (jsonMatch) {
                        result = JSON.parse(jsonMatch[0]);
                    } else {
                        throw new Error('æ— æ³•è§£æå“åº”æ ¼å¼');
                    }
                }
                
                // æ•´ç†è‚¡ç¥¨æ•°æ®
                const stocks = [];
                result.sectors.forEach(sector => {
                    sector.stocks.forEach(stock => {
                        stocks.push({
                            ...stock,
                            sector: sector.name,
                            sectorReason: sector.reason
                        });
                    });
                });
                
                return {
                    input: inputText,
                    keywords: result.keywords,
                    thinking: result.thinking,
                    sectors: result.sectors,
                    stocks: stocks
                };
                
            } catch (error) {
                console.error('è§£æå“åº”å¤±è´¥:', error);
                throw error;
            }
        }
        
        // æ˜¾ç¤ºåˆ†æç»“æœ
        function displayAnalysisResult(result) {
            const content = `
# ğŸ“Š æ™ºèƒ½åˆ†æç»“æœ

## ğŸ¯ åˆ†æå†…å®¹
${result.input}

## ğŸ” å…³é”®è¯è¯†åˆ«
${result.keywords.map(keyword => `**${keyword}**`).join(' â€¢ ')}

## ğŸ’­ åˆ†ææ€è€ƒ
${result.thinking}

## ğŸ“ˆ å—ç›Šæ¿å—

${result.sectors.map(sector => `
### ${sector.name}
- **å—ç›ŠåŸå› **: ${sector.reason}
- **æ—¶é—´æ¡†æ¶**: ${sector.timeframe}
- **ä¿¡å¿ƒç¨‹åº¦**: ${sector.confidence}
- **åŒ…å«è‚¡ç¥¨**: ${sector.stocks.map(s => `${s.name}(${s.code})`).join('ã€')}
`).join('')}

---
*åˆ†ææ—¶é—´: ${new Date().toLocaleString()}*
            `;
            
            document.getElementById('analysisResult').innerHTML = marked.parse(content);
            analysisData = result;
        }
        
        // æ˜¾ç¤ºè‚¡ç¥¨åˆ—è¡¨
        function displayStockList(stocks) {
            if (!stocks || stocks.length === 0) {
                document.getElementById('stockList').innerHTML = '<p style="color: #666; text-align: center;">æœªæ‰¾åˆ°ç›¸å…³è‚¡ç¥¨</p>';
                return;
            }
            
            // æŒ‰æ¿å—åˆ†ç»„
            const sectors = {};
            stocks.forEach(stock => {
                if (!sectors[stock.sector]) {
                    sectors[stock.sector] = [];
                }
                sectors[stock.sector].push(stock);
            });
            
            let html = '';
            Object.entries(sectors).forEach(([sectorName, sectorStocks]) => {
                html += `
                    <div class="sector-group">
                        <div class="sector-title">${sectorName}</div>
                        ${sectorStocks.map(stock => `
                            <div class="stock-item">
                                <div class="stock-info">
                                    <span class="stock-code">${stock.code}</span>
                                    <span class="stock-name">${stock.name}</span>
                                    <span class="trend-arrow ${stock.trend === 'çœ‹æ¶¨' ? 'trend-up' : 'trend-down'}">
                                        ${stock.trend === 'çœ‹æ¶¨' ? 'ğŸ“ˆ' : 'ğŸ“‰'}
                                    </span>
                                </div>
                                <div class="stock-score score-${stock.score}">
                                    ${stock.score}åˆ†
                                </div>
                                <button class="analyze-button" onclick="analyzeStock('${stock.code}', '${stock.name}')">
                                    ğŸ”
                                </button>
                            </div>
                        `).join('')}
                    </div>
                `;
            });
            
            document.getElementById('stockList').innerHTML = html;
            stockData = stocks;
        }
        
        // åˆ†æå•ä¸ªè‚¡ç¥¨
        async function analyzeStock(code, name) {
            showLoading('detailLoading');
            
            try {
                // æ„å»ºè‚¡ç¥¨åˆ†ææç¤ºè¯
                const prompt = buildStockAnalysisPrompt(code, name);
                
                // è°ƒç”¨DeepSeek API
                const response = await callDeepSeekAPI(prompt);
                
                // æ˜¾ç¤ºè‚¡ç¥¨è¯¦ç»†åˆ†æ
                displayStockDetail(code, name, response);
                
            } catch (error) {
                console.error('è‚¡ç¥¨åˆ†æå¤±è´¥:', error);
                showError('è‚¡ç¥¨åˆ†æå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
            } finally {
                hideLoading('detailLoading');
            }
        }
        
        // æ„å»ºè‚¡ç¥¨åˆ†ææç¤ºè¯
        function buildStockAnalysisPrompt(code, name) {
            return `è¯·å¯¹è‚¡ç¥¨${code}ï¼ˆ${name}ï¼‰è¿›è¡Œè¯¦ç»†çš„æŠ€æœ¯åˆ†æå’ŒçœŸå‡èµ„é‡‘åˆ¤æ–­ã€‚

è¯·åˆ†æä»¥ä¸‹å›ºå®šæ£€æµ‹é¡¹ï¼š
1. ä¸€å‘¨å†…å‡ºç°ä¸¤æ¬¡æ¢æ‰‹ç‡é«˜10%ä»¥ä¸Š
2. ä¸€å‘¨å†…è¶‹åŠ¿å‘ä¸Š
3. 20æ—¥å†…è¶‹åŠ¿å‘ä¸Š
4. 20æ—¥å†…å‡ºç°è¿‡7%ä»¥ä¸Šæ¶¨åœ
5. 10æ—¥èµ„é‡‘ä¸ºå‡€æµå…¥
6. 5æ—¥å†…èµ„é‡‘ä¸ºå‡€æµå…¥
7. æˆäº¤é‡3å¤©å†…æœ‰æ–°é«˜
8. æˆäº¤é‡æ˜¨å¤©æˆ–å‰å¤©ï¼Œæˆäº¤é‡ç¼©é‡8-10æˆï¼Œå½¢æˆé‡‘å‰ï¼›ä»Šæ—¥å°å¹…æ”€å‡
9. è¿‘ä¸¤å¤©å¼€ç›˜ä»·æ ¼åœ¨æ°´é¢ä¹‹ä¸Š

è¯·æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¿”å›åˆ†æç»“æœï¼š

# ${code} ${name} è¯¦ç»†åˆ†æ

## ğŸ” æŠ€æœ¯æŒ‡æ ‡æ£€æµ‹
å¯¹æ¯ä¸ªæ£€æµ‹é¡¹è¿›è¡Œç¬¦åˆ/ä¸ç¬¦åˆçš„åˆ¤æ–­ï¼Œå¹¶è¯´æ˜åŸå› 

## ğŸ’° çœŸå‡èµ„é‡‘åˆ¤æ–­
è¯¦ç»†åˆ†æè¯¥è‚¡ç¥¨çš„èµ„é‡‘æµå‘æƒ…å†µï¼ŒåŒ…æ‹¬ï¼š
- å½“å‰æ˜¯çœŸèµ„é‡‘æµå…¥è¿˜æ˜¯å‡èµ„é‡‘æ‹‰å‡
- æˆäº¤é‡å’Œä»·æ ¼çš„å…³ç³»
- ä¸»åŠ›èµ„é‡‘åŠ¨å‘
- é£é™©ä¿¡å·è¯†åˆ«

## ğŸ“Š ç³»ç»Ÿè¯„ä¼°
ç»¼åˆæŠ€æœ¯åˆ†æå’Œèµ„é‡‘åˆ¤æ–­ï¼Œç»™å‡ºï¼š
- å½“å‰é£é™©è¯„ä¼°
- æ“ä½œå»ºè®®ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡º/è§‚æœ›ï¼‰
- é‡ç‚¹å…³æ³¨çš„æŒ‡æ ‡
- ä¹°å…¥å¿ å‘Š

è¯·æä¾›è¯¦ç»†çš„åˆ†æè¿‡ç¨‹å’Œç»“è®ºã€‚`;
        }
        
        // æ˜¾ç¤ºè‚¡ç¥¨è¯¦ç»†åˆ†æ
        function displayStockDetail(code, name, analysis) {
            const content = analysis;
            document.getElementById('stockDetail').innerHTML = marked.parse(content);
        }
        
        // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
        function showLoading(loadingId) {
            document.getElementById(loadingId).classList.add('active');
        }
        
        // éšè—åŠ è½½åŠ¨ç”»
        function hideLoading(loadingId) {
            document.getElementById(loadingId).classList.remove('active');
        }
        
        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            const errorHtml = `
                <div style="color: #dc3545; padding: 20px; text-align: center;">
                    <h3>âŒ ${message}</h3>
                    <p>è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•</p>
                </div>
            `;
            
            // æ ¹æ®å½“å‰æ“ä½œåŒºåŸŸæ˜¾ç¤ºé”™è¯¯
            if (document.querySelector('#upperLoading.active')) {
                document.getElementById('analysisResult').innerHTML = errorHtml;
            } else if (document.querySelector('#detailLoading.active')) {
                document.getElementById('stockDetail').innerHTML = errorHtml;
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ·»åŠ å›è½¦é”®æ”¯æŒ
            document.getElementById('inputText').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    analyzeInput();
                }
            });
        });
    </script>
</body>
</html>